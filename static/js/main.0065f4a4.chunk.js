(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){e.exports=n(210)},209:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"play",function(){return W}),n.d(a,"pause",function(){return Y}),n.d(a,"togglePlayPause",function(){return U}),n.d(a,"newSegmentIndex",function(){return H}),n.d(a,"incrementSegmentIndex",function(){return q}),n.d(a,"newBarIndex",function(){return K});var r={};n.r(r),n.d(r,"incrementBPM",function(){return te}),n.d(r,"decrementBPM",function(){return ne}),n.d(r,"changeBPMByAmount",function(){return ae}),n.d(r,"changeBPMToAmount",function(){return re});var c={};n.r(c),n.d(c,"changeReverbSecondsToAmount",function(){return oe}),n.d(c,"changeReverbDecayToAmount",function(){return ue});var i={};n.r(i),n.d(i,"newBufferSegment",function(){return de}),n.d(i,"clearBufferSegments",function(){return he}),n.d(i,"clearBufferSegment",function(){return pe});var o={};n.r(o),n.d(o,"newNotification",function(){return ge}),n.d(o,"clearNotification",function(){return be});var u={};n.r(u),n.d(u,"authStateChange",function(){return ye});var s={};n.r(s),n.d(s,"changeVolumeToAmount",function(){return xe}),n.d(s,"changePitchToAmount",function(){return Ve}),n.d(s,"changeDecayToAmount",function(){return De}),n.d(s,"changePanToAmount",function(){return Le}),n.d(s,"toggleReverb",function(){return Fe}),n.d(s,"changeSelectedChannel",function(){return Me}),n.d(s,"changeSelectedSound",function(){return Re}),n.d(s,"toggleSoloChannel",function(){return Be}),n.d(s,"toggleMuteChannel",function(){return Xe}),n.d(s,"toggleBeat",function(){return Ge}),n.d(s,"newBankIndex",function(){return We}),n.d(s,"changeSwingToAmount",function(){return Ye});var l={};n.r(l),n.d(l,"newTrackLoading",function(){return Ze}),n.d(l,"loadDefaultTrack",function(){return Qe}),n.d(l,"saveTrack",function(){return $e}),n.d(l,"newTrackSave",function(){return et}),n.d(l,"newTrackLoaded",function(){return tt});var m={};n.r(m),n.d(m,"changeTrackTitle",function(){return ct}),n.d(m,"changeTrackCreatedDate",function(){return it}),n.d(m,"changeTrackUpdatedDate",function(){return ot});var d={};n.r(d),n.d(d,"uploadSample",function(){return Et}),n.d(d,"newSampleUploaded",function(){return yt}),n.d(d,"samplesLoaded",function(){return Ot}),n.d(d,"sampleUploading",function(){return jt}),n.d(d,"samplesUploadError",function(){return kt}),n.d(d,"samplesUploadReset",function(){return Nt}),n.d(d,"deleteSample",function(){return It}),n.d(d,"sampleDeleted",function(){return Ct}),n.d(d,"sampleDeleteError",function(){return wt});var h={};n.r(h),n.d(h,"playPreview",function(){return At}),n.d(h,"pausePreview",function(){return Pt}),n.d(h,"loadingPreview",function(){return xt});var p={};n.r(p),n.d(p,"changeSynthParam",function(){return Dt});var f=n(0),v=n.n(f),g=n(108),b=n.n(g),E=n(42),y=n(212),O=n(111),j=n(19),k=n(4),N=n(5),I=n(7),C=n(6),w=n(8),S=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=void 0===t?"":t,a=e.onClick,r=e.selected,c=void 0!==r&&r,i=e.classes,o=void 0===i?"":i,u=c?"selected":"",s=c?"true":"false";return v.a.createElement("button",{ref:"toggleButton",className:"button toggle-button "+o+" "+u,"aria-pressed":s,onClick:a},n)}}]),t}(v.a.Component);function T(e,t,n){return e<t?t:e>n?n:e}function _(e,t,n){return(e-t)/(n-t)*100}function A(e,t,n){return((n-t)*e+100*t)/100}function P(){var e=0;return function(){return e++}}function x(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function V(e,t){return function(e){return e*(180/Math.PI)}(function(e,t){return Math.acos(e/t)}(e,t))}var D=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={touching:!1,currentTouch:[0,0],previousRotation:[0,0]},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.value,a=t.min,r=void 0===a?0:a,c=t.max,i=void 0===c?100:c,o=t.name,u=t.onValueChange,s=t.classes;if(this.state.touching){var l=this.state,m=(l.currentTouch,l.newValue);e=this.getRotationFromValue(m)}else e=this.getRotationFromValue(n);var d={transform:"rotate("+e+"deg)"};return v.a.createElement("div",{ref:"knobContainer",className:(s||"channel-item")+" rotator"},v.a.createElement("h3",{ref:"name",className:"item-label"},o),v.a.createElement("input",{type:"range",ref:"value",min:r,max:i,step:"1",className:"item-value assistive",onChange:function(e){return u(+e.target.value)}}),v.a.createElement("div",{className:"knob-container","aria-hidden":"true"},v.a.createElement("div",{className:"value-indicator"}),v.a.createElement("div",{className:"value-indicator"}),v.a.createElement("div",{className:"value-indicator"}),v.a.createElement("div",{className:"value-indicator"}),v.a.createElement("div",{className:"value-indicator"}),v.a.createElement("div",{className:"value-indicator"}),v.a.createElement("div",{ref:"knob",className:"knob",style:d})))}},{key:"getRotationFromValue",value:function(e){var t=this.props,n=t.min,a=void 0===n?0:n,r=t.max,c=void 0===r?100:r;t.name,t.onValueChange,t.classes;return A(T(_(e,a,c),0,100),-155,155)}},{key:"componentDidMount",value:function(){var e=this,t=this.refs.knob,n=document;t.addEventListener("touchstart",function(t){return e.onStart(t)}),t.addEventListener("touchmove",function(t){return e.onMove(t)}),t.addEventListener("touchend",function(t){return e.onEnd(t)}),t.addEventListener("mousedown",function(t){return e.onStart(t)}),n.addEventListener("mousemove",function(t){return e.onMove(t)}),n.addEventListener("mouseup",function(t){return e.onEnd(t)})}},{key:"getLengthAndAngleFromCentre",value:function(e){var t=this.refs.knob,n=(this.state.currentTouch,t.getBoundingClientRect()),a=window.pageYOffset,r=n.left+n.width/2,c=n.top+n.height/2+a,i=e[0]-r,o=c-e[1],u=e[0]-r,s=x({x:i,y:o},{x:0,y:0});return{length:s,angle:function(e,t){var n=t.x,a=t.y;return n<0&&a>=0?90+e:n>=0&&a>0?270-e:n>0&&a<=0?270+e:n<0&&a<0?90-e:0}(V(x({x:u,y:0},{x:0,y:0}),s),{x:i,y:o})}}},{key:"getValueFromLengthAndAngle",value:function(e){e.length;var t=e.angle-180,n=this.props,a=n.min,r=void 0===a?0:a,c=n.max,i=void 0===c?100:c;n.value;return A(_(T(t,-155,155),-155,155),r,i)}},{key:"getValueFromTouch",value:function(e){var t=this.getLengthAndAngleFromCentre(e);return this.getValueFromLengthAndAngle(t)}},{key:"onStart",value:function(e){e.preventDefault();var t=void 0!==e.pageX?e.pageX:e.touches[0].pageX,n=void 0!==e.pageY?e.pageY:e.touches[0].pageY,a=[t,n],r=this.getValueFromTouch(a);this.setState({touching:!0,currentTouch:[t,n],newValue:r})}},{key:"onMove",value:function(e){var t=this;if(e.target&&this.state.touching){e.preventDefault();var n=this.props,a=n.onValueChange,r=n.value,c=void 0!==e.pageX?e.pageX:e.touches[0].pageX,i=void 0!==e.pageY?e.pageY:e.touches[0].pageY,o=[c,i],u=this.getValueFromTouch(o);this.rafId&&window.cancelAnimationFrame(this.rafId),this.rafId=window.requestAnimationFrame(function(){t.state.touching&&(r!==u&&a(u),t.setState({touching:!0,currentTouch:[c,i],newValue:u}))})}}},{key:"onEnd",value:function(e){e.target&&this.state.touching&&(e.preventDefault(),this.setState({touching:!1}))}}]),t}(v.a.Component),L=n(10),F="play",M="pause",R="toggle_play_pause",B="new_segment_index",X="increment_segment_index",G="new_bar_index";function W(){return{type:F}}function Y(){return{type:M}}function U(){return{type:R}}function H(e){return{type:B,value:e}}function q(e){return{type:X,value:e}}function K(e){return{type:G,value:e}}var J="increment_bpm",z="decrement_bpm",Z="change_bpm_by_amount",Q="change_bpm",$=50,ee=190;function te(){return{type:J}}function ne(){return{type:z}}function ae(e){return{type:Z,amount:e}}function re(e){return{type:Q,value:e}}var ce="CHANGE_REVERB_SECONDS_TO_AMOUNT",ie="CHANGE_REVERB_DECAY_TO_AMOUNT";function oe(e,t){return{type:ce,machineId:e,value:t}}function ue(e,t){return{type:ie,machineId:e,value:t}}var se="new_buffer_segment",le="clear_buffer_segments",me="clear_buffer_segment";function de(e,t,n){return{type:se,index:e,time:t,duration:n}}function he(){return{type:le}}function pe(e){return{type:me,id:e}}var fe="new_notification",ve="clear_notification";function ge(e,t){return{type:fe,value:e,notificationType:t}}function be(e){return{type:ve,value:e}}var Ee="auth_state_change";function ye(e){return{type:Ee,value:e}}var Oe="change_volume_to_amount",je="change_pitch_to_amount",ke="change_decay_to_amount",Ne="change_pan_to_amount",Ie="change_selected_channel",Ce="change_solo_channel",we="toggle_mute_channel",Se="TOGGLE_REVERB",Te="TOGGLE_BEAT_STATE",_e="NEW_BANK_INDEX",Ae="CHANGE_SWING_TO_AMOUNT",Pe="CHANGE_SELECTED_SOUND";function xe(e,t,n){return{type:Oe,channelId:t,machineId:e,value:n}}function Ve(e,t,n){return{type:je,channelId:t,machineId:e,value:n}}function De(e,t,n){return{type:ke,channelId:t,machineId:e,value:n}}function Le(e,t,n){return{type:Ne,channelId:t,machineId:e,value:n}}function Fe(e,t,n){return{type:Se,channelId:t,machineId:e,value:n}}function Me(e,t){return{type:Ie,machineId:e,value:t}}function Re(e,t,n){return{type:Pe,machineId:e,channelId:t,value:n}}function Be(e,t){return{type:Ce,machineId:e,value:t}}function Xe(e,t){return{type:we,machineId:e,value:t}}function Ge(e,t,n,a,r){return{type:Te,machineId:e,channelId:t,bankId:n,index:a,value:r}}function We(e,t){return{type:_e,machineId:e,value:t}}function Ye(e,t){return{type:Ae,machineId:e,value:t}}var Ue=n(1),He="NEW_TRACK_LOADING",qe="NEW_TRACK_LOADED",Ke="LOAD_DEFAULT_TRACK",Je="TRACK_SAVE",ze="NEW_TRACK_SAVE";function Ze(e,t){return{type:He,userId:e,trackId:t}}function Qe(){return{type:Ke}}function $e(){return{type:Je}}function et(e,t){return{type:ze,userId:e,trackId:t}}function tt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(Ue.a)({type:qe,write:t},e)}var nt="CHANGE_TRACK_TITLE",at="CHANGE_TRACK_CREATED_DATE",rt="CHANGE_TRACK_UPDATED_DATE";function ct(e){return{type:nt,title:e}}function it(e){return{type:at,createdDate:e}}function ot(e){return{type:rt,updatedDate:e}}var ut="SAMPLES_LOADING",st="SAMPLES_LOADED",lt="SAMPLES_LOAD_ERROR",mt="UPLOAD_SAMPLE",dt="SAMPLE_UPLOADED",ht="SAMPLE_UPLOAD_ERROR",pt="SAMPLE_UPLOAD_RESET",ft="SAMPLE_UPLOADING",vt="DELETE_SAMPLE",gt="SAMPLE_DELETED",bt="SAMPLE_DELETE_ERROR";function Et(e,t,n){return{type:mt,name:e,shortName:t,file:n}}function yt(e){var t=e.name,n=e.shortName,a=e.path,r=e.createdDate,c=e.sampleId,i=e.userId;return{type:dt,name:t,shortName:n,path:a,createdDate:r,sampleId:c,userId:i}}function Ot(e,t){return{type:st,userId:e,samples:t}}function jt(){return{type:ft}}function kt(){return{type:ht}}function Nt(){return{type:pt}}function It(e,t){return{type:vt,userId:e,id:t}}function Ct(e,t){return{type:gt,userId:e,id:t}}function wt(e,t){return{type:bt,userId:e,id:t}}var St="PLAY_PREVIEW",Tt="PAUSE_PREVIEW",_t="LOADING_PREVIEW",At=function(e,t){return{type:St,userId:e,id:t}},Pt=function(){return{type:Tt}},xt=function(e){return{type:_t,id:e}},Vt="CHANGE_SYNTH_PARAM";function Dt(e,t,n,a){return{type:Vt,machineId:e,param:t,paramItem:n,value:a}}var Lt=a,Ft=r,Mt=c,Rt=i,Bt=o,Xt=s,Gt=l,Wt=l,Yt=m,Ut=d,Ht=h,qt=p,Kt=n(85),Jt=function(e){return e.condition?e.children:null},zt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={open:!1},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"onOpen",value:function(){this.setState({open:!0})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=this.state;return v.a.createElement("div",{className:"modal-container"+(n.open?" open":"")},v.a.createElement(Jt,{condition:!t.trigger},v.a.createElement("button",{className:"modal-button open-button",onClick:function(){return e.onOpen()}},"Open Modal")),v.a.createElement(Jt,{condition:t.trigger},t.trigger({onOpen:function(){return e.onOpen()}})),v.a.createElement("div",{className:"model-overlay"}),n.open?v.a.createElement("div",{className:"modal"},v.a.createElement("div",{className:"modal-title"},v.a.createElement("h3",null,t.title),v.a.createElement("button",{className:"modal-button close-button",onClick:function(){return e.onClose()}},v.a.createElement("span",{className:"assistive"},"Close Modal"),v.a.createElement("span",{className:"icon__close"}))),v.a.createElement("div",{className:"modal-body"},t.children({onClose:function(){return e.onClose()}}))):null)}}]),t}(f.Component),Zt=n(110);function Qt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],a=0;a<e;a++)n[a]=a+t;return n}function $t(e){var t=Object(Zt.a)(e),n=t[0];t.slice(1);return n}function en(e){return e[e.length-1]}function tn(e){return Object.keys(e).map(function(t){return e[t]})}function nn(e){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})}var an=function(e,t){return t.split("/").reduce(function(e,t){return e&&e[t]},e)},rn=function(e,t){return function(e){var t={};return e.forEach(function(e){var n=e.key,a=e.value;t[n]=a}),t}(nn(e).filter(t))},cn=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props;this.state;return v.a.createElement("div",{className:"tabs"},t.tabs.map(function(n){var a=n.name,r=n.id,c=t.selected===r;return v.a.createElement("h4",{class:c?"selected":""},v.a.createElement("a",{onClick:function(){return e.changeTab(r)}},a))}))}},{key:"changeTab",value:function(e){this.props.onTabChange(e)}}]),t}(f.Component),on=n(66),un=function(e,t){var n=Object(on.a)(e,t),a=e.split("/").filter(function(e){return!!e}),r=t.split("/").filter(function(e){return!!e});if(n&&a.length===r.length)return n},sn=function(e){return function(e){return un(e,"/users/:userId/tracks/:trackId")}(e)||function(e){return un(e,"/")}(e)},ln=function(e,t){return"/users/".concat(e,"/tracks/").concat(t)},mn=function(e){return"/users/".concat(e,"/tracks/")},dn=function(e){return"/users/".concat(e,"/samples/")},hn=function(e){var t=e.id,n=e.userId,a=e.preview,r=a.soundId,c=a.state,i=e.dispatch,o=Object(L.b)(Ht,i),u=r===t&&"playing"===c,s=r===t&&"loading"===c;return v.a.createElement("button",{className:"preview-sound",onClick:function(){u?o.pausePreview():o.playPreview(n,t)}},v.a.createElement(Jt,{condition:u},v.a.createElement("span",{className:"icon icon__pause"}),v.a.createElement("span",{className:"preview-sound__label"},"Pause")),v.a.createElement(Jt,{condition:s},v.a.createElement("span",{className:"icon icon__loading-dots"},v.a.createElement("span",{className:"dot"}),v.a.createElement("span",{className:"dot"}),v.a.createElement("span",{className:"dot"})),v.a.createElement("span",{className:"preview-sound__label"},"Loading")),v.a.createElement(Jt,{condition:!u&&!s},v.a.createElement("span",{className:"icon icon__play"}),v.a.createElement("span",{className:"preview-sound__label"},"Play")))},pn=function(e){var t=e.onChange,n=e.selectedId,a=nn(e.librarySounds);return v.a.createElement("ul",{className:"generic-list"},a.map(function(a){var r=a.key,c=a.value.name,i=""+r===""+n;return v.a.createElement("li",null,v.a.createElement("label",{className:"choice-item"},v.a.createElement("input",{type:"radio",name:"sound-choice",value:r,checked:i,onChange:function(e){return t(e.target.value)}}),v.a.createElement("span",null,c),v.a.createElement("span",{className:"assistive"},i?" - Selected":"")),v.a.createElement(hn,Object.assign({},e,{id:r})))}))},fn=function(e){var t=e.onChange,n=e.selectedId,a=(e.track,e.auth),r=e.samples,c=an(a,"user/uid"),i=nn(an(r,"samples/".concat(c))||{}),o=!!c;return v.a.createElement("ul",{className:"generic-list"},v.a.createElement("li",{className:"cta-item"},o?v.a.createElement(Kt.a,{to:dn(c)},"Upload samples"):v.a.createElement(Kt.a,{to:"/user/login/"},"Login to upload samples")),i.map(function(a){var r=a.key,i=a.value.name,o=""+r===""+n;return v.a.createElement("li",null,v.a.createElement("label",{className:"choice-item"},v.a.createElement("input",{type:"radio",name:"sound-choice",value:r,checked:o,onChange:function(e){return t(e.target.value)}}),v.a.createElement("span",null,i),v.a.createElement("span",{className:"assistive"},o?" - Selected":"")),v.a.createElement(hn,Object.assign({},e,{id:r,userId:c})))}))},vn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={selectedId:n.props.soundId,selectedTab:"library-sounds"},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"soundHasChanged",value:function(){return this.state.selectedId!==this.props.soundId}},{key:"onChange",value:function(e){this.setState({selectedId:e})}},{key:"onTabChange",value:function(e){this.setState({selectedTab:e})}},{key:"getSelectedTab",value:function(){switch(this.state.selectedTab){case"library-sounds":return pn;case"samples":return fn}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.soundId,t.onSoundChange),a=this.getSelectedTab();return v.a.createElement(zt,Object.assign({},this.props,{title:"Change Sound",icon:"folder",trigger:function(e){var t=e.onOpen;return v.a.createElement("button",{className:"sound-change-button",onClick:t},v.a.createElement("span",{className:"assistive"},"Change Sound"),v.a.createElement("span",{className:"icon__folder"}))}}),function(t){var r=t.onClose;return v.a.createElement("div",{className:"sound-selector"},v.a.createElement(cn,{onTabChange:function(t){return e.onTabChange(t)},selected:e.state.selectedTab,tabs:[{name:"Library Sounds",id:"library-sounds"},{name:"Samples",id:"samples"}]}),v.a.createElement(a,Object.assign({},e.props,{selectedId:e.state.selectedId,onChange:function(t){return e.onChange(t)}})),v.a.createElement("div",{className:"button-tray"},v.a.createElement("button",{className:"button",onClick:function(){n(e.state.selectedId),r()},disabled:!e.soundHasChanged()},"Update")))})}}]),t}(f.Component),gn=null;function bn(){return gn||(gn=new(window.AudioContext||window.webkitAudioContext))}function En(e,t){return new Promise(function(n,a){return e.decodeAudioData(t,n,a)})}var yn=function(e,t){return(n=t,fetch(n).then(function(e){return e.arrayBuffer()})).then(function(t){return En(e,t)});var n},On={},jn=function(e,t,n){var a=t.librarySounds,r=t.track,c=t.samples;n=n||an(r,"userId");var i=an(c,"samples/".concat(n,"/").concat(e)),o=a[e];return i||o||{name:"---",shortName:"---"}},kn=function(e,t,n){var a=jn(e,t,n);if(a)return{id:e,path:a.path,soundPromise:Nn(a.path)}},Nn=function(e){var t=bn();return On[e]||(On[e]=yn(t,e)),On[e]},In=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.machine,a=t.machineId,r=(t.playState,t.dispatch),c=n.channels,i=(Object(L.b)(Lt,r),Object(L.b)(Xt,r));return v.a.createElement("div",{className:"channels-container"},v.a.createElement("div",{className:"channels"},c.map(function(t,n){var r=jn(t.sound,e.props).name,c=t.selected,o=t.solo,u=t.mute,s=t.sound;return v.a.createElement("div",{className:"channel "+(t.selected?"selected":""),ref:"channel"},v.a.createElement("div",{className:"channel-head"},v.a.createElement("div",{className:"channel-item"},v.a.createElement("div",{className:"channel-title"},v.a.createElement("h3",{ref:"name"},r),v.a.createElement(vn,Object.assign({},e.props,{channel:t,soundId:s,onSoundChange:function(e){return i.changeSelectedSound(a,n,e)}})))),v.a.createElement(S,{ref:"toggleButton",classes:"channel-item select-button",selected:c,name:"Select",onClick:function(){return i.changeSelectedChannel(a,n)}}),v.a.createElement("div",{className:"channel-tray"},v.a.createElement(S,{ref:"soloButton",classes:"channel-item green",selected:o,name:"Solo",onClick:function(){return i.toggleSoloChannel(a,n)}}),v.a.createElement(S,{ref:"muteButton",classes:"channel-item red",selected:u,name:"Mute",onClick:function(){return i.toggleMuteChannel(a,n)}}))),v.a.createElement("div",{className:"channel-tray"},v.a.createElement(D,{name:"Volume",value:t.volume,onValueChange:function(e){return i.changeVolumeToAmount(a,n,e)}}),v.a.createElement(D,{name:"Pitch",value:t.pitch,onValueChange:function(e){return i.changePitchToAmount(a,n,e)}}),v.a.createElement(D,{name:"Decay",value:t.decay,onValueChange:function(e){return i.changeDecayToAmount(a,n,e)}}),v.a.createElement(D,{name:"Pan",value:t.pan,onValueChange:function(e){return i.changePanToAmount(a,n,e)}})),v.a.createElement("div",{className:"channel-item"},v.a.createElement("h3",{ref:"name",className:"item-title light"},"FX")),v.a.createElement("div",{className:"channel-tray"},v.a.createElement("div",{className:"toggle-button-item"},v.a.createElement("h3",{className:"item-label"},"Reverb"),v.a.createElement(S,{classes:"channel-item red",selected:t.reverb,onClick:function(e){return i.toggleReverb(a,n,e)}}))))})))}}]),t}(f.Component),Cn=n(14),wn=n.n(Cn),Sn=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.index,n=e.current,a=e.selected,r=e.onToggle,c=e.showIndicator,i=void 0===c||c,o=t+1,u=a?"on":"off";return v.a.createElement("div",{className:wn()("pattern-beat",{current:n,selected:a})},i&&v.a.createElement("span",{className:wn()("indicator",{on:n})}),v.a.createElement("button",{onClick:function(){return r()},className:"button"},v.a.createElement("span",null,"Beat ",o," - is ",u)))}}]),t}(v.a.Component),Tn=function(e){var t=e.children;return v.a.createElement("div",{className:"time-signature"},t)},_n=function(e){var t=e.children;return v.a.createElement("div",{className:"time-signature-group"},t)},An=function(e){var t=e.children;return v.a.createElement("div",{className:"time-signature-4-4"},t)},Pn=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.machine,n=e.playState,a=e.machineId,r=e.tempo,c=e.dispatch,i=t.channels,o=t.currentBankIndex,u=Object(L.b)(Xt,c);return v.a.createElement("div",{className:"pattern"},v.a.createElement(Tn,null,Qt(r.beatsPerBar).map(function(e){var t=Qt(r.segmentsPerBeat,e*r.segmentsPerBeat);return v.a.createElement(_n,null,v.a.createElement(An,null,t.map(function(e){return v.a.createElement("span",{className:"signature-item"},e+1)})),v.a.createElement("div",{className:"pattern-tray"},i.map(function(e,t){return{id:t,channel:e}}).filter(function(e,t){return e.channel.selected}).map(function(e,r){var c=e.channel.patterns,i=e.id;return c[o].filter(function(e,n){return-1!==t.indexOf(n)}).map(function(e,n){return{beat:e,index:t[n]}}).map(function(e){var t=e.beat,r=e.index;return v.a.createElement(Sn,{index:r,current:n.currentSegmentIndex===r,selected:!!t,onToggle:function(){return u.toggleBeat(a,i,o,r,t?0:1)}})})})))})))}}]),t}(v.a.Component),xn=(v.a.Component,function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isPlaying,n=e.onPlayPause,a=t?"Pause":"Play",r=t?"selected":"",c=t?"true":"false";return v.a.createElement("div",{className:"play-toggle channel-item"},v.a.createElement("button",{className:"button "+r,"aria-pressed":c,onClick:function(){return n()}},a))}}]),t}(v.a.Component)),Vn=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.machineId,n=e.reverb,a=e.dispatch,r=n[t],c=Object(L.b)(Mt,a);return v.a.createElement("div",{className:"effects-parameters"},v.a.createElement("h3",{className:"item-label"},"Reverb"),v.a.createElement("div",{className:"effects-tray"},v.a.createElement(D,{name:"Length",classes:"effect-item",value:r.seconds,onValueChange:function(e){return c.changeReverbSecondsToAmount(t,e)}}),v.a.createElement(D,{name:"Decay",classes:"effect-item",value:r.decay,onValueChange:function(e){return c.changeReverbDecayToAmount(t,e)}})))}}]),t}(v.a.Component),Dn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).calculateContainerWidth=function(){var e=n.refs.slider;n.setState({containerWidth:e.getBoundingClientRect().width})},n.onStart=function(e){e.preventDefault();var t=void 0!==e.pageX?e.pageX:e.touches[0].pageX;n.setState({touching:!0,touches:[t],currentX:n.getXFromCurrentValue(),previousX:n.getXFromCurrentValue()})},n.onMove=function(e){if(e.target&&n.state.touching){e.preventDefault();var t=n.props,a=t.onValueChange,r=t.value,c=void 0!==e.pageX?e.pageX:e.touches[0].pageX,i=n.getCurrentValueFromX(n.getCurrentX());n.rafId&&window.cancelAnimationFrame(n.rafId),n.rafId=window.requestAnimationFrame(function(){n.state.touching&&(r!==i&&a(i),n.setState({touching:!0,touches:n.state.touches.concat([c]),currentX:n.getCurrentX()}))})}},n.onEnd=function(e){e.target&&n.state.touching&&(e.preventDefault(),(0,n.props.onValueChange)(n.getCurrentValueFromX(n.getCurrentX())),n.setState({touching:!1}))},n.state={touching:!1,touches:[],coordinates:{containerWidth:0},currentX:0,previousX:0},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.min,a=t.max,r=t.step,c=t.value,i=t.onValueChange,o=t.name,u=function(e,t,n){for(var a=[],r=e;r<=t;)a.push(r),r+=n;return a}(n,a,r);this.state.touching?(e=this.state.currentX,c=this.getCurrentValueFromX(e)):e=this.getXFromCurrentValue();var s={transform:"translate("+e+"%, 0)",transition:this.state.touching?"":"transform 300ms ease"},l=this.state.touching?"slider grabbing":"slider";return v.a.createElement("div",{className:"slider-container"},v.a.createElement("h3",{className:"item-label"},o),v.a.createElement("input",{type:"range",ref:"value",min:n,max:a,step:r,className:"item-value assistive",onChange:function(e){return i(+e.target.value)}}),v.a.createElement("div",{className:l,ref:"slider","aria-hidden":"true"},v.a.createElement("div",{className:"slider-wrapper",style:s},u.map(function(e,t){var n=e===c?"item selected":"item";return v.a.createElement("div",{className:n},e)}))))}},{key:"getTouchDistance",value:function(){return $t(this.state.touches)-en(this.state.touches)}},{key:"getXFromCurrentValue",value:function(){var e=this.props,t=e.min,n=(e.max,e.step),a=e.value;e.onChange;return 33.34*((a-t)/n+-1)*-1}},{key:"getCurrentValueFromX",value:function(e){var t=this.props,n=t.min,a=t.max,r=t.step,c=e/-33.34- -1;return T((Math.round(c)+n)*r,n,a)}},{key:"getCurrentX",value:function(){var e,t,n=this.getTouchDistance(),a=(e=n,t=this.state.containerWidth,e/t*100);return this.state.previousX-a}},{key:"getSnapToX",value:function(e){return e}},{key:"componentDidMount",value:function(){var e=this.refs.slider;this.calculateContainerWidth(),window.addEventListener("resize",this.calculateContainerWidth),e.addEventListener("touchstart",this.onStart),e.addEventListener("touchmove",this.onMove),e.addEventListener("touchend",this.onEnd),e.addEventListener("mousedown",this.onStart),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onEnd)}},{key:"componentWillUnmount",value:function(){var e=this.refs.slider;window.removeEventListener("resize",this.calculateContainerWidth),e.removeEventListener("touchstart",this.onStart),e.removeEventListener("touchmove",this.onMove),e.removeEventListener("touchend",this.onEnd),e.removeEventListener("mousedown",this.onStart),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onEnd)}}]),t}(v.a.Component),Ln=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tempo,n=e.playState,a=e.dispatch,r=e.machine,c=e.machineId,i=Object(L.b)(Lt,a),o=Object(L.b)(Ft,a),u=Object(L.b)(Xt,a),s=r.currentBankIndex,l=r.swing;return v.a.createElement("div",{className:"toolbar"},v.a.createElement("div",{className:"toolbar-item play-pause"},v.a.createElement(xn,{isPlaying:n.isPlaying,onPlayPause:i.togglePlayPause})),v.a.createElement("div",{className:"toolbar-item tempo"},v.a.createElement(Dn,{name:"Tempo",min:50,max:190,step:1,value:t.beatsPerMinute,onValueChange:function(e){return o.changeBPMToAmount(e)}})),v.a.createElement("div",{className:"toolbar-item swing"},v.a.createElement(Dn,{name:"Swing",min:0,max:100,step:5,value:l,onValueChange:function(e){return u.changeSwingToAmount(c,e)}})),v.a.createElement("div",{className:"toolbar-item bank-selector"},v.a.createElement("h3",{className:"item-label"},"Pattern Bank"),v.a.createElement("div",{className:"banks-available"},Qt(8).map(function(e){return v.a.createElement(S,{onClick:function(){return u.newBankIndex(c,e)},name:"A"+(e+1),selected:e===s,classes:"red"})}))),v.a.createElement("div",{className:"toolbar-item reverb"},v.a.createElement(Vn,Object.assign({machineId:0},this.props))))}}]),t}(f.Component),Fn=function(e){function t(e){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).call(this,e))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.machine,a=t.machineId,r=t.dispatch,c=n.channels,i=Object(L.b)(Xt,r);return v.a.createElement("div",{className:"channel-selector"},v.a.createElement("h3",{ref:"name",className:"item-title"},"Sound Selector"),v.a.createElement("div",{className:"item-tray"},c.map(function(t,n){var r=jn(t.sound,e.props);return v.a.createElement("div",{className:"selector-button"},v.a.createElement(S,{onClick:function(){return i.changeSelectedChannel(a,n)},name:r.shortName,selected:t.selected,classes:"red"}))})))}}]),t}(f.Component),Mn=function(e){var t=e.drumMachine[e.machineId];return v.a.createElement("div",{className:"drum-machine"},v.a.createElement(Ln,Object.assign({},e,{machine:t})),v.a.createElement(Fn,Object.assign({},e,{machine:t})),v.a.createElement(In,Object.assign({},e,{machine:t})),v.a.createElement(Pn,Object.assign({},e,{machine:t})))},Rn=n(11),Bn=n(13),Xn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).calculateContainerDimensions=function(){var e=n.refs.faderContainer.getBoundingClientRect();n.setState({containerWidth:e.width,containerHeight:e.height,faderWidth:n.getFaderWidth(),faderHeight:n.getFaderHeight()})},n.onStart=function(e){e.preventDefault();var t=void 0!==e.pageX?e.pageX:e.touches[0].pageX,a=void 0!==e.pageY?e.pageY:e.touches[0].pageY;n.setState({touching:!0,touchesX:[t],touchesY:[a],currentX:n.getXFromCurrentValue(),previousX:n.getXFromCurrentValue(),currentY:n.getYFromCurrentValue(),previousY:n.getYFromCurrentValue()})},n.onMove=function(e){if(e.target&&n.state.touching){e.preventDefault();var t,a=n.props,r=a.onValueChange,c=a.value,i=a.orientation,o=void 0!==e.pageX?e.pageX:e.touches[0].pageX,u=void 0!==e.pageY?e.pageY:e.touches[0].pageY;t="vertical"===i?n.getCurrentValueFromY(n.getCurrentY()):n.getCurrentValueFromX(n.getCurrentX()),n.rafId&&window.cancelAnimationFrame(n.rafId),n.rafId=window.requestAnimationFrame(function(){n.state.touching&&(c!==t&&r(t),n.setState({touching:!0,touchesX:[].concat(Object(Bn.a)(n.state.touchesX),[o]),touchesY:[].concat(Object(Bn.a)(n.state.touchesY),[u]),currentX:n.getCurrentX(),currentY:n.getCurrentY()}))})}},n.onEnd=function(e){if(e.target&&n.state.touching){e.preventDefault();var t=n.props;(0,t.onValueChange)("vertical"===t.orientation?n.getCurrentValueFromY(n.getCurrentY()):n.getCurrentValueFromX(n.getCurrentX())),n.setState({touching:!1})}},n.state={touching:!1,touches:[],containerWidth:0,containerHeight:0,faderWidth:0,faderHeight:0,currentX:0,currentY:0,previousY:0},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e,t,n,a=this.props,r=a.min,c=a.max,i=a.step,o=a.onValueChange,u=a.name,s=a.id,l=a.orientation,m=a.type,d=a.width,h=a.height;this.state.touching?(t=this.state.currentX,n=this.state.currentY):(t=this.getXFromCurrentValue(),n=this.getYFromCurrentValue());var p={width:d,height:h},f={height:h?this.getFaderHeight():null,width:d?this.getFaderWidth():null,transform:"translate(".concat(t,"px, ").concat(n,"px)")};return v.a.createElement("div",{className:wn()("fader-container",(e={},Object(Rn.a)(e,"fader-container-".concat(m),m),Object(Rn.a)(e,"orientation-vertical","vertical"===l),e)),ref:"faderContainer",style:p},v.a.createElement("h3",{className:"item-label"},u),v.a.createElement("input",{id:s,type:"range",ref:"value",min:r,max:c,step:i,className:"item-value assistive",onChange:function(e){return o(+e.target.value)}}),v.a.createElement("div",{className:wn()("fader",{grabbing:this.state.touching}),ref:"fader","aria-hidden":"true",style:f}))}},{key:"getFaderHeight",value:function(){var e=this.props,t=e.min,n=e.max,a=e.orientation,r=e.height;return"vertical"===a&&r?r/(n+1-t):20}},{key:"getFaderWidth",value:function(){var e=this.props,t=e.min,n=e.max,a=e.orientation,r=e.width;return"vertical"!==a&&r?r/(n+1-t):20}},{key:"getTouchDistanceX",value:function(){return $t(this.state.touchesX)-en(this.state.touchesX)}},{key:"getTouchDistanceY",value:function(){return $t(this.state.touchesY)-en(this.state.touchesY)}},{key:"getXFromCurrentValue",value:function(){var e=this.props,t=e.min,n=e.max,a=e.step,r=e.value;return"vertical"===e.orientation?0:(r-t)/a*this.getContainerWidth()/(n-t)}},{key:"getYFromCurrentValue",value:function(){var e=this.props,t=e.min,n=e.max,a=e.step,r=e.value;return"vertical"!==e.orientation?0:(r-t)/a*this.getContainerHeight()/(n-t)}},{key:"getCurrentValueFromX",value:function(e){var t=this.props,n=t.min,a=t.max,r=t.step,c=e/this.getContainerWidth()*100;return T(A((Math.round(c)+n)*r,n,a),n,a)}},{key:"getCurrentValueFromY",value:function(e){var t=this.props,n=t.min,a=t.max,r=t.step,c=e/this.getContainerHeight()*100;return T(A((Math.round(c)+n)*r,n,a),n,a)}},{key:"getContainerWidth",value:function(){return(this.props.width||this.state.containerWidth)-this.getFaderWidth()}},{key:"getContainerHeight",value:function(){return(this.props.height||this.state.containerHeight)-this.getFaderHeight()}},{key:"getCurrentX",value:function(){if("vertical"===this.props.orientation)return 0;var e=this.getTouchDistanceX();return T(this.state.previousX-e,0,this.getContainerWidth())}},{key:"getCurrentY",value:function(){if("vertical"!==this.props.orientation)return 0;var e=this.getTouchDistanceY();return T(this.state.previousY-e,0,this.getContainerHeight())}},{key:"componentDidMount",value:function(){var e=this.refs.fader;this.calculateContainerDimensions(),window.addEventListener("resize",this.calculateContainerDimensions),e.addEventListener("touchstart",this.onStart),e.addEventListener("touchmove",this.onMove),e.addEventListener("touchend",this.onEnd),e.addEventListener("mousedown",this.onStart),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onEnd)}},{key:"componentWillUnmount",value:function(){var e=this.refs.fader;window.removeEventListener("resize",this.calculateContainerDimensions),e.removeEventListener("touchstart",this.onStart),e.removeEventListener("touchmove",this.onMove),e.removeEventListener("touchend",this.onEnd),e.removeEventListener("mousedown",this.onStart),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onEnd)}}]),t}(v.a.Component),Gn=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],Wn=[32.7032,34.6479,36.7081,38.8909,41.2035,43.6536,46.2493,48.9995,51.913,55,58.2705,61.7354,65.4064,69.2957,73.4162,77.7817,82.4069,87.3071,92.4986,97.9989,103.826,110,116.541,123.471,130.813,138.591,146.832,155.563,164.814,174.614,184.997,195.998,207.652,220,233.082,246.942,261.626,277.183,293.665,311.127,329.628,349.228,369.994,391.995,415.305,440,466.164,493.883,523.251,554.365,587.33,622.254,659.255,698.456,739.989,783.991,830.609,880,932.328,987.767,1046.5,1108.73,1174.66,1244.51,1318.51,1396.91,1479.98,1567.98,1661.22,1760,1864.66,1975.53,2093,2217.46,2349.32,2489.02,2637.02,2793.83,2959.96,3135.96,3322.44,3520,3729.31,3951.07,4186.01],Yn=.088,Un=88e-5,Hn=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"handleIncrement",value:function(){var e=this.props,t=e.onValueChange,n=e.children,a=(e.id,0);if(n.length){var r=f.Children.map(n,function(e,t){return e.props.selected&&(a=t),e.props});++a>=n.length&&(a=0),t(r[a].value)}}},{key:"handleDecrement",value:function(){var e=this.props,t=e.onValueChange,n=e.children,a=(e.id,0);if(n.length){var r=f.Children.map(n,function(e,t){return e.props.selected&&(a=t),e.props});--a<0&&(a=n.length-1),t(r[a].value)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.onValueChange,a=t.children,r=t.id;return v.a.createElement("div",{className:"selector-container"},v.a.createElement("div",{className:"visual-selector","aria-hidden":"true"},v.a.createElement("div",{className:"selector-options"},a),v.a.createElement("div",{className:"selector-buttons"},v.a.createElement("button",{className:"button",onClick:function(){return e.handleDecrement()}},v.a.createElement("span",{className:"icon__arrow-up"}),v.a.createElement("span",{className:"assistive"},"Decrement")),v.a.createElement("button",{className:"button",onClick:function(){return e.handleIncrement()}},v.a.createElement("span",{className:"icon__arrow-down"}),v.a.createElement("span",{className:"assistive"},"Increment")))),v.a.createElement("select",{className:"assistive",id:r,onChange:function(e){return n(e.target.value)}},a))}}]),t}(f.Component),qn=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,a=e.selected,r=e.children;return v.a.createElement("div",{className:wn()("selector-option",{selected:a}),ref:"faderContainer"},v.a.createElement("span",{className:"selector-option-label"},r),v.a.createElement("option",{value:n,selected:a,name:t,className:"assistive"},r))}}]),t}(f.Component),Kn=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(I.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={open:"open"===n.props.initialState},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"handleToggle",value:function(e,t){t.props.onClick&&t.props.onClick(e),this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state.open;return v.a.createElement("div",{className:wn()("collapsible",{open:n,closed:!n})},f.Children.map(t,function(t){return"CollapsibleHeader"===t.type.displayName?v.a.cloneElement(t,{onClick:function(n){return e.handleToggle(n,t)}}):t}))}}]),t}(f.Component),Jn=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClick;return v.a.createElement("div",{className:"collapsible-header"},v.a.createElement("h3",null,v.a.createElement("a",{onClick:n},v.a.createElement("span",{className:"icon__arrow-down-dark"}),t)))}}]),t}(f.Component);Jn.displayName="CollapsibleHeader";var zn=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.children;return v.a.createElement("div",{className:"collapsible-content"},e)}}]),t}(f.Component),Zn=35,Qn=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(I.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={containerWidth:0,containerHeight:0,max:{columns:0,rows:0},offset:{column:0,row:0}},n.calculateContainerDimensions=function(){var e=n.refs.grid,t=n.props,a=t.columns,r=t.rows,c=e.getBoundingClientRect(),i=Math.floor(c.width/Zn)-2;n.setState({containerWidth:c.width,containerHeight:c.height,max:{columns:i,rows:i},offset:{column:n.state.offset.column+i<a?n.state.offset.column:a-i,row:n.state.offset.row+i<r?n.state.offset.row:r-i}})},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.calculateContainerDimensions(),window.addEventListener("resize",this.calculateContainerDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.calculateContainerDimensions)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.columns,r=t.rows,c=this.state,i=c.max,o=c.offset;return v.a.createElement("div",{className:wn()("grid-container",{"grid-container-show-scroll-x":i.columns<a,"grid-container-show-scroll-y":i.rows<r}),ref:"grid"},f.Children.map(n,function(e){return Object(f.cloneElement)(e,Object(Ue.a)({},e.props,{max:i,offset:o}))}),v.a.createElement(aa,{type:"x"},v.a.createElement(Xn,{id:"grid-container-scroll-x",width:i.columns*Zn,type:"narrow",min:0,max:a-i.columns,value:o.column,onValueChange:function(t){return e.setState({offset:Object(Ue.a)({},o,{column:t})})},step:1})),v.a.createElement(aa,{type:"y"},v.a.createElement(Xn,{id:"grid-container-scroll-y",height:i.rows*Zn,orientation:"vertical",type:"narrow",min:0,max:r-i.rows,value:o.row,onValueChange:function(t){return e.setState({offset:Object(Ue.a)({},o,{row:t})})},step:1})))}}]),t}(f.PureComponent),$n=function(e){var t=e.children,n=e.type,a=e.max,r=a.columns,c=void 0===r?0:r,i=a.rows,o=void 0===i?0:i,u=e.offset,s=u.column,l=void 0===s?0:s,m=u.row,d=void 0===m?0:m;return v.a.createElement("div",{className:wn()("grid-axis",Object(Rn.a)({},"grid-axis-".concat(n),n))},c||o?t.filter(function(e,t){return"x"===n?t>=l&&t<c+l:t>=d&&t<o+d}):t)},ea=function(e){var t=e.children,n=e.type;return v.a.createElement("div",{className:wn()("grid-axis-item",Object(Rn.a)({},"grid-axis-item-".concat(n),n))},t)},ta=function(e){var t=e.children,n=e.max,a=e.max.rows,r=void 0===a?0:a,c=e.offset,i=e.offset.row,o=void 0===i?0:i;return v.a.createElement("div",{className:"grid"},f.Children.map(t,function(e,t){return r&&t>=o&&t<r+o?Object(f.cloneElement)(e,Object(Ue.a)({},e.props,{max:n,offset:c})):null}))},na=function(e){var t=e.children,n=e.type,a=e.max.columns,r=void 0===a?0:a,c=e.offset.column,i=void 0===c?0:c;return v.a.createElement("div",{className:wn()("grid-row",Object(Rn.a)({},"grid-row-".concat(n),n))},r?t.filter(function(e,t){return t>=i&&t<r+i}):t)},aa=function(e){var t=e.children,n=e.type;return v.a.createElement("div",{className:wn()("grid-scroll",Object(Rn.a)({},"grid-scroll-".concat(n),n))},t)},ra=function(e){var t=e.synth,n=e.machineId,a=e.dispatch,r=e.playState,c=t[n],i=Object(L.b)(qt,a);return v.a.createElement("div",{className:"synth-machine"},v.a.createElement("div",{className:"basic-controls"},v.a.createElement(Kn,{initialState:"closed"},v.a.createElement(Jn,null,"Basic Controls"),v.a.createElement(zn,null,v.a.createElement("div",{className:"basic-controls-inner"},v.a.createElement(Dn,{name:"Voices",min:1,max:8,step:1,value:c.voices,onValueChange:function(e){return i.changeSynthParam(n,"voices",null,e)}}),v.a.createElement(D,{name:"Volume",value:c.volume,onValueChange:function(e){return i.changeSynthParam(n,"volume",null,e)}}),v.a.createElement(D,{name:"Pan",value:c.pan,onValueChange:function(e){return i.changeSynthParam(n,"pan",null,e)}}),v.a.createElement(D,{name:"Send 1",value:c.sends.send1,onValueChange:function(e){return i.changeSynthParam(n,"sends","send1",e)}}),v.a.createElement(D,{name:"Send 2",value:c.sends.send2,onValueChange:function(e){return i.changeSynthParam(n,"sends","send2",e)}}))))),v.a.createElement("div",{className:"filter"},v.a.createElement(Kn,{initialState:"closed"},v.a.createElement(Jn,null,"Filter"),v.a.createElement(zn,null,v.a.createElement("div",{className:"filter-controls"},v.a.createElement("div",{className:"select-item"},v.a.createElement("h3",{className:"item-label"},"Type"),v.a.createElement(Hn,{id:"filter-type",onValueChange:function(e){return i.changeSynthParam(n,"filter","type",e)}},v.a.createElement(qn,{value:"highpass",selected:"highpass"===c.filter.type},"High Pass"),v.a.createElement(qn,{value:"lowpass",selected:"lowpass"===c.filter.type},"Low Pass"),v.a.createElement(qn,{value:"bandpass",selected:"bandpass"===c.filter.type},"Band Pass"))),v.a.createElement("div",{className:"parameter-group"},v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"filter-frequency",className:"item-label"},"Frequency"),v.a.createElement(Xn,{id:"filter-frequency",type:"range",min:0,max:100,value:c.filter.frequency,onValueChange:function(e){return i.changeSynthParam(n,"filter","frequency",e)},step:"1"})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"filter-resonance",className:"item-label"},"Resonance"),v.a.createElement(Xn,{id:"filter-resonance",type:"range",min:0,max:100,value:c.filter.resonance,onValueChange:function(e){return i.changeSynthParam(n,"filter","resonance",e)},step:"1"}))))))),v.a.createElement("div",{className:"oscillator-container"},v.a.createElement("div",{className:"oscillator"},v.a.createElement(Kn,{initialState:"open"},v.a.createElement(Jn,null,"Oscillator 1"),v.a.createElement(zn,null,v.a.createElement("div",{className:"oscillator-controls"},v.a.createElement("div",{className:"select-item"},v.a.createElement("h3",{className:"item-label"},"Type"),v.a.createElement(Hn,{id:"osc1-type",onValueChange:function(e){return i.changeSynthParam(n,"osc1","waveType",e)}},v.a.createElement(qn,{value:"sine",selected:"sine"===c.oscillators.osc1.waveType},"Sine"),v.a.createElement(qn,{value:"square",selected:"square"===c.oscillators.osc1.waveType},"Square"),v.a.createElement(qn,{value:"sawtooth",selected:"sawtooth"===c.oscillators.osc1.waveType},"Sawtooth"),v.a.createElement(qn,{value:"triangle",selected:"triangle"===c.oscillators.osc1.waveType},"Triangle"))),v.a.createElement(Dn,{name:"Octave",min:0,max:7,step:1,value:c.oscillators.osc1.octave,onValueChange:function(e){return i.changeSynthParam(n,"osc1","octave",e)}}),v.a.createElement(Dn,{name:"Semitone",min:0,max:11,step:1,value:c.oscillators.osc1.semitone,onValueChange:function(e){return i.changeSynthParam(n,"osc1","semitone",e)}}),v.a.createElement(Dn,{name:"Cent",min:0,max:100,step:1,value:c.oscillators.osc1.cent,onValueChange:function(e){return i.changeSynthParam(n,"osc1","cent",e)}}),v.a.createElement(D,{name:"Amount",value:c.oscillators.osc1.amount,onValueChange:function(e){return i.changeSynthParam(n,"osc1","amount",e)}}))))),v.a.createElement("div",{className:"oscillator"},v.a.createElement(Kn,{initialState:"open"},v.a.createElement(Jn,null,"Oscillator 2"),v.a.createElement(zn,null,v.a.createElement("div",{className:"oscillator-controls"},v.a.createElement("div",{className:"select-item"},v.a.createElement("h3",{className:"item-label"},"Type"),v.a.createElement(Hn,{id:"osc2-type",onValueChange:function(e){return i.changeSynthParam(n,"osc2","waveType",e)}},v.a.createElement(qn,{value:"sine",selected:"sine"===c.oscillators.osc2.waveType},"Sine"),v.a.createElement(qn,{value:"square",selected:"square"===c.oscillators.osc2.waveType},"Square"),v.a.createElement(qn,{value:"sawtooth",selected:"sawtooth"===c.oscillators.osc2.waveType},"Sawtooth"),v.a.createElement(qn,{value:"triangle",selected:"triangle"===c.oscillators.osc2.waveType},"Triangle"))),v.a.createElement(Dn,{name:"Octave",min:0,max:7,step:1,value:c.oscillators.osc2.octave,onValueChange:function(e){return i.changeSynthParam(n,"osc2","octave",e)}}),v.a.createElement(Dn,{name:"Semitone",min:0,max:11,step:1,value:c.oscillators.osc2.semitone,onValueChange:function(e){return i.changeSynthParam(n,"osc2","semitone",e)}}),v.a.createElement(Dn,{name:"Cent",min:0,max:100,step:1,value:c.oscillators.osc2.cent,onValueChange:function(e){return i.changeSynthParam(n,"osc2","cent",e)}}),v.a.createElement(D,{name:"Amount",value:c.oscillators.osc2.amount,onValueChange:function(e){return i.changeSynthParam(n,"osc2","amount",e)}})))))),v.a.createElement("div",{className:"envelope"},v.a.createElement(Kn,{initialState:"closed"},v.a.createElement(Jn,null,"Amp Envelope"),v.a.createElement(zn,null,v.a.createElement("div",{className:"envelope-controls"},v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"amp-attack",className:"item-label"},"Attack"),v.a.createElement(Xn,{id:"amp-attack",type:"range",min:0,max:100,value:c.envelopes.amp.attack,onValueChange:function(e){return i.changeSynthParam(n,"amp","attack",e)},step:1})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"amp-decay",className:"item-label"},"Decay"),v.a.createElement(Xn,{id:"amp-decay",type:"range",min:0,max:100,value:c.envelopes.amp.decay,onValueChange:function(e){return i.changeSynthParam(n,"amp","decay",e)},step:1})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"amp-sustain",className:"item-label"},"Sustain"),v.a.createElement(Xn,{id:"amp-sustain",type:"range",min:0,max:100,value:c.envelopes.amp.sustain,onValueChange:function(e){return i.changeSynthParam(n,"amp","sustain",e)},step:1})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"amp-release",className:"item-label"},"Release"),v.a.createElement(Xn,{id:"amp-release",type:"range",min:0,max:100,value:c.envelopes.amp.release,onValueChange:function(e){return i.changeSynthParam(n,"amp","release",e)},step:1})))))),v.a.createElement("div",{className:"envelope"},v.a.createElement(Kn,{initialState:"closed"},v.a.createElement(Jn,null,"Filter Envelope"),v.a.createElement(zn,null,v.a.createElement("div",{className:"envelope-controls"},v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"filter-attack",className:"item-label"},"Attack"),v.a.createElement(Xn,{id:"filter-attack",type:"range",min:0,max:100,value:c.envelopes.filter.attack,onValueChange:function(e){return i.changeSynthParam(n,"env-filter","attack",e)},step:1})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"filter-decay",className:"item-label"},"Decay"),v.a.createElement(Xn,{id:"filter-decay",type:"range",min:0,max:100,value:c.envelopes.filter.decay,onValueChange:function(e){return i.changeSynthParam(n,"env-filter","decay",e)},step:1})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"filter-sustain",className:"item-label"},"Sustain"),v.a.createElement(Xn,{id:"filter-sustain",type:"range",min:0,max:100,value:c.envelopes.filter.sustain,onValueChange:function(e){return i.changeSynthParam(n,"env-filter","sustain",e)},step:1})),v.a.createElement("div",{className:"parameter"},v.a.createElement("label",{htmlFor:"filter-release",className:"item-label"},"Release"),v.a.createElement(Xn,{id:"filter-release",type:"range",min:0,max:100,value:c.envelopes.filter.release,onValueChange:function(e){return i.changeSynthParam(n,"env-filter","release",e)},step:1})),v.a.createElement(D,{name:"Amount",value:c.envelopes.filter.amount,onValueChange:function(e){return i.changeSynthParam(n,"env-filter","amount",e)}}))))),v.a.createElement(Qn,{columns:16,rows:12},v.a.createElement($n,{type:"x"},tn(c.banks[c.currentBankIndex]).map(function(e,t){return v.a.createElement(ea,{type:t%4===0?"start":t%4===3?"end":null},t+1)})),v.a.createElement($n,{type:"y"},Qt(12).map(function(e,t){var n=11-t;return v.a.createElement(ea,null,Gn[n])})),v.a.createElement(ta,null,Qt(12).map(function(e,t){var a=11-t,o=Gn[a];return v.a.createElement(na,{type:wn()({dark:o.includes("#"),light:!o.includes("#")})},tn(c.banks[c.currentBankIndex]).map(function(t,o){return v.a.createElement(ea,{type:o%4===0?"start":o%4===3?"end":null},v.a.createElement(Sn,{key:"pattern-item-".concat(o,"-").concat(e),index:o,current:r.currentSegmentIndex===o,selected:t===a,onToggle:function(){return i.changeSynthParam(n,"pattern-item","".concat(c.currentBankIndex,".").concat(o),t===a?-1:a)},showIndicator:!1}))}))}))))},ca=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.instruments.filter(function(e){return e.selected})[0];if(e){var t=e.type,n=e.machineId;switch(t){case"drumMachine":return v.a.createElement(Mn,Object.assign({},this.props,{machineId:n}));case"synth":return v.a.createElement(ra,Object.assign({},this.props,{machineId:n}));default:return null}}return null}}]),t}(f.Component),ia=n(215),oa=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={value:e.value||""},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"onChange",value:function(e,t){var n=e.target.value;this.setState({value:n,focus:t}),!t&&this.props.onValueChange&&this.props.onValueChange(n)}},{key:"componentWillReceiveProps",value:function(e){this.state.focus||this.setState({value:e.value})}},{key:"render",value:function(){var e=this;return v.a.createElement("div",{className:"default-input-wrapper"},v.a.createElement("span",{className:"default-spacer","aria-hidden":"true"},this.state.value),v.a.createElement("input",{className:"default-input",disabled:this.props.disabled,type:"text",value:this.state.value,onChange:function(t){return e.onChange(t,!0)},onBlur:function(t){return e.onChange(t,!1)}}))}}]),t}(f.Component),ua=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={open:!1},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"onOpen",value:function(){this.setState({open:!0})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"onToggle",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this,t=this.props,n=this.state.open,a=t.items;return v.a.createElement("div",{className:"dropdown-menu "+(n?"open":"")},v.a.createElement("button",{onClick:function(){return e.onToggle()},className:"dropdown-menu-trigger"},v.a.createElement("span",{className:"icon__menu"}),v.a.createElement("span",{className:"icon__menu-hover"}),v.a.createElement("span",{className:"assistive"},n?"Close Menu":"Open Menu")),v.a.createElement("div",{className:"dropdown-menu-panel-overlay",onClick:function(){return e.onClose()}}),v.a.createElement("div",{className:"dropdown-menu-panel"},v.a.createElement("ul",null,a.filter(function(e){return!e.condition||e.condition()}).map(function(t){return t.callback?v.a.createElement("li",null,v.a.createElement("button",{className:"dropdown-link",onClick:function(){return t.callback()&&e.onClose()}},t.name)):v.a.createElement("li",null,v.a.createElement(ia.a,{to:t.link,className:"dropdown-link",activeClassName:"active"},t.name))}))))}}]),t}(f.Component),sa=function(e){var t=e.dispatch,n=e.auth,a=Object(L.b)(Gt,t),r=an(n,"user/uid");return[{name:"Save Track",callback:function(){return a.saveTrack()},condition:function(){return e.auth&&e.auth.user&&e.track.write}},{name:"New Track",link:"/"},{name:"My Tracks",link:mn(r),condition:function(){return e.auth&&e.auth.user}},{name:"My Samples",link:dn(r),condition:function(){return e.auth&&e.auth.user}},{name:"Logout",link:"/user/logout",condition:function(){return e.auth&&e.auth.user}},{name:"Login",link:"/user/login",condition:function(){return!(e.auth&&e.auth.user)}}]},la=function(e){var t=e.dispatch,n=Object(L.b)(Yt,t);return v.a.createElement("div",{className:"header"},v.a.createElement("div",{className:"tray"},v.a.createElement("div",{className:"logo"},v.a.createElement("h1",null,v.a.createElement(ia.a,{to:"/",activeClassName:"active icon__logo"},v.a.createElement("span",{className:"assistive"},"Drum Machine")))),e.meta.title?v.a.createElement(oa,{disabled:!e.track.write,value:e.meta.title,onValueChange:function(e){return n.changeTrackTitle(e)}}):null),v.a.createElement("div",{className:"tray"},v.a.createElement(ua,{items:sa(e)})))},ma=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={open:!0},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.state.open,n=this.props.notifications[0],a=t&&n?"show":"hide";return v.a.createElement("div",{className:"notification "+a},n?n.value:"",v.a.createElement("button",{className:"close",onClick:function(){return e.closeNotification(n.id)}},v.a.createElement("span",{className:"assistive"},"Close notification")," X"))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.notifications,n=e.notifications,a=t[0],r=n[0];r&&a!==r&&(this.setState({open:!0}),"timeout"===r.notificationType&&this.setExpiryTimout(r.id))}},{key:"closeNotification",value:function(e){this.setState({open:!1}),this.deleteNotification(e)}},{key:"setExpiryTimout",value:function(e){var t=this;setTimeout(function(){return t.closeNotification(e)},5e3)}},{key:"deleteNotification",value:function(e){var t=this;setTimeout(function(){var n=t.props.dispatch;Object(L.b)(Bt,n).clearNotification(e)},300)}}]),t}(f.Component),da=function(e){return v.a.createElement("div",{className:"view "+e.view.name},v.a.createElement(la,e),e.children,v.a.createElement(ma,e))},ha=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props;return v.a.createElement(da,Object.assign({},e,{view:{name:"track"}}),v.a.createElement("div",{className:"container"},e&&e.track&&"loading"===e.track.state?v.a.createElement("div",{className:"status loading"},v.a.createElement("span",{className:"icon icon__loading"}),v.a.createElement("p",null,"Loading Track")):v.a.createElement("div",{className:""},v.a.createElement(ca,e))))}}]),t}(f.Component);var pa=Object(j.c)(function(e){return e})(ha),fa=n(112),va=n.n(fa),ga=function(e){var t=e.tracks.tracks,n=e.match,a=e.dispatch,r=an(n,"params/userId"),c=an(t,r)||[],i=Object(L.b)(Wt,a);return c.length?v.a.createElement("div",{className:"large-list"},v.a.createElement("h2",null,"Tracks"),v.a.createElement("ul",null,c.map(function(e){var t=an(e,"meta/title")||"Untitled Track",n=an(e,"meta/updatedDate")||"2017-12-01T00:00:00.000Z",a=va()(n).fromNow(),c=an(e,"track/trackId");return v.a.createElement("li",{key:c,className:"highlight"},v.a.createElement(Kt.a,{to:ln(r,c),className:"list-item-title"},v.a.createElement("div",{className:"title"},t)," ",v.a.createElement("div",{className:"meta date"},a)),v.a.createElement(ua,{items:[{name:"Select Track",link:ln(r,c)},{name:"Delete Track",callback:function(){return i.deleteTrack()},condition:function(){return!1}}]}))}))):v.a.createElement(Ea,e)},ba=function(e){return v.a.createElement("div",{className:"status loading"},v.a.createElement("span",{className:"icon icon__loading"}),v.a.createElement("p",null,"Loading Tracks"))},Ea=function(e){return v.a.createElement("div",{className:"status error"},v.a.createElement("p",null,"There were no tracks found for this user."))},ya=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=this.getTrackStateFromProps(e);return v.a.createElement(da,Object.assign({},e,{view:{name:"tracks"}}),v.a.createElement("div",{className:"container"},v.a.createElement(t,e)))}},{key:"getTrackStateFromProps",value:function(e){switch(an(e,"tracks/state")){case"idle":case"loading":return ba;default:return ga}}}]),t}(f.Component);var Oa=Object(j.c)(function(e){return e})(ya),ja=function(e){var t=(e=e.split(".")[0]).substring(0,2).toUpperCase();return{name:e,shortName:t}},ka=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(I.a)(this,Object(C.a)(t).call(this,e))).state={dragover:!1},n}return Object(w.a)(t,e),Object(N.a)(t,[{key:"onDragOver",value:function(e){e.preventDefault(e),e.dataTransfer.dropEffect="copy",this.setState({dragover:!0})}},{key:"onDragLeave",value:function(e){this.setState({dragover:!1})}},{key:"onDrop",value:function(e){var t=this.props.dispatch;e.preventDefault();var n=e.dataTransfer;if(n.items){if("file"==n.items[0].kind){var a=n.items[0].getAsFile(),r=ja(a.name);t(Et(r.name,r.shortName,a))}}else{var c=n.files[0],i=ja(c.name);t(Et(i.name,i.shortName,c))}}},{key:"onFileInput",value:function(e){var t=this.props.dispatch,n=e.target.files[0],a=ja(n.name);t(Et(a.name,a.shortName,n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.samples,a=t.match,r=t.auth,c=t.dispatch,i=an(a,"params/userId"),o=an(r,"user/uid"),u=an(n,"upload/state"),s=this.state.dragover,l=Object(L.b)(Ut,c);return v.a.createElement(Jt,{condition:i===o},v.a.createElement("div",{className:"upload-a-sample"},v.a.createElement(zt,{title:"Upload a sample",text:"Upload a sample",trigger:function(e){var t=e.onOpen;return v.a.createElement("a",{className:"cta-link",onClick:t},"Upload a sample")}},function(t){return v.a.createElement("div",{className:"upload-container"},v.a.createElement(Jt,{condition:"idle"===u},v.a.createElement("div",{className:"upload"+(s?" highlight":""),onDragOver:function(t){return e.onDragOver(t)},onDragLeave:function(t){return e.onDragLeave(t)},onDrop:function(t){return e.onDrop(t)}},v.a.createElement("span",{className:"upload-cta"},"Drag a file to upload here"),v.a.createElement("label",{className:"upload-label",htmlFor:"upload"},"or upload a file"),v.a.createElement("input",{className:"upload-input",type:"file",id:"upload",onChange:function(t){return e.onFileInput(t)}}))),v.a.createElement(Jt,{condition:"error"===u},v.a.createElement("div",{className:"upload error"},v.a.createElement("span",{className:"upload-cta"},"There was an error uploading the file"),v.a.createElement("span",{className:"upload-label"},"the following issues may have occured"),v.a.createElement("ul",null,v.a.createElement("li",null,"File was too big (1MB max)"),v.a.createElement("li",null,"File wasn't a WAV audio file")),v.a.createElement("a",{className:"upload-label",onClick:function(){return l.samplesUploadReset()}},"Try again"))),v.a.createElement(Jt,{condition:"uploading"===u},v.a.createElement("div",{className:"upload uploading"},v.a.createElement("span",{className:"upload-cta"},"Uploading..."),v.a.createElement("span",{className:"icon icon__loading"}))),v.a.createElement(Jt,{condition:"uploaded"===u},v.a.createElement("div",{className:"upload uploaded"},v.a.createElement("span",{className:"upload-cta"},"File Uploaded Successfully"),v.a.createElement("span",{className:"icon icon__tick"}),v.a.createElement("a",{className:"upload-label",onClick:function(){return l.samplesUploadReset()}},"Upload another file"))))})))}}]),t}(f.Component),Na=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.samples,a=t.match,r=t.auth,c=t.dispatch,i=an(a,"params/userId"),o=an(r,"user/uid"),u=nn(an(n,"samples/".concat(i))||{}),s=Object(L.b)(Ut,c);return v.a.createElement("div",{className:"large-list"},v.a.createElement("h2",null,"Samples"),v.a.createElement(ka,this.props),v.a.createElement(Jt,{condition:u.length},v.a.createElement("ul",null,u.map(function(t){var n=t.key,a=t.value,r=a.name,c=a.deleted;return v.a.createElement("li",{key:n,className:c?"disabled":""},v.a.createElement("span",{className:"list-item-title"},r),v.a.createElement(hn,Object.assign({},e.props,{id:n,userId:i})),v.a.createElement(Jt,{condition:i===o},v.a.createElement(ua,{items:[{name:"Delete Sample",callback:function(){return s.deleteSample(i,n)},condition:function(){return i===o}}]})))}))))}}]),t}(f.Component),Ia=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props;return v.a.createElement(da,Object.assign({},e,{view:{name:"samples"}}),v.a.createElement("div",{className:"container"},v.a.createElement(Na,e)))}}]),t}(f.Component);var Ca,wa=Object(j.c)(function(e){return e})(Ia),Sa=n(213),Ta=n(12),_a=n.n(Ta),Aa=n(35),Pa={apiKey:"AIzaSyAWA-6GU2ARBmfMOTniWEZLtz_LYE5N828",authDomain:"drum-machine-12c62.firebaseapp.com",databaseURL:"https://drum-machine-12c62.firebaseio.com",projectId:"drum-machine-12c62",storageBucket:"drum-machine-12c62.appspot.com",messagingSenderId:"444715842758"},xa=!1,Va=function(){return Promise.resolve().then(function(){xa||(_a.a.initializeApp(Pa),xa=!0)})},Da=(n(206),function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from;return this.props.auth.user?v.a.createElement(Sa.a,{to:e}):v.a.createElement("div",{id:"firebase-auth"})}},{key:"componentDidMount",value:function(){var e=this;this.props.auth.user||Va().then(function(){(Ca=Ca||new Aa.auth.AuthUI(_a.a.auth())).start("#firebase-auth",Object(Ue.a)({},{signInFlow:"popup",signInOptions:[_a.a.auth.GoogleAuthProvider.PROVIDER_ID,_a.a.auth.EmailAuthProvider.PROVIDER_ID,_a.a.auth.PhoneAuthProvider.PROVIDER_ID],signInSuccessUrl:"/"},{callbacks:{signInSuccess:function(t){var n=e.props.dispatch;Object(L.b)(Bt,n).newNotification("Login successful!"),e.setState({signedIn:!0})}}}))})}}]),t}(f.Component));var La=Object(j.c)(function(e){return e})(function(e){return v.a.createElement(da,Object.assign({},e,{view:{name:"login"}}),v.a.createElement("div",{className:"container"},v.a.createElement("h2",null,"Log In"),v.a.createElement("p",null,"Log in or register to your save tracks!"),v.a.createElement(Da,e)))}),Fa=function(e){function t(){return Object(k.a)(this,t),Object(I.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from;return this.props.auth.user?v.a.createElement("div",{className:"signout"},v.a.createElement("p",null,"Logging out...")):v.a.createElement(Sa.a,{to:e})}},{key:"componentDidMount",value:function(){var e=this;this.props.auth.user&&Va().then(function(){_a.a.auth().signOut().then(function(){var t=e.props.dispatch;Object(L.b)(Bt,t).newNotification("Logout successful"),e.setState({signedIn:!1})})})}}]),t}(f.Component);var Ma=Object(j.c)(function(e){return e})(function(e){return v.a.createElement(da,Object.assign({},e,{view:{name:"logout"}}),v.a.createElement("div",{className:"container"},v.a.createElement(Fa,e)))}),Ra=n(32),Ba=n(107),Xa=Object(Ra.a)(),Ga=Object(Ba.a)(Xa),Wa={},Ya={0:{currentBankIndex:0,swing:0,channels:[{sound:0,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,selected:!0,pitch:50,decay:100,pan:50,reverb:!1},{sound:1,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:2,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:3,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:4,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:5,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:6,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:7,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1},{sound:8,patterns:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},volume:50,pitch:50,decay:100,pan:50,reverb:!1}]}};var Ua={beatsPerMinute:120,beatsPerBar:4,segmentsPerBeat:4};var Ha={0:{name:"Bass Drum",shortName:"BD",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fbd01.WAV?alt=media&token=77f710d5-78d0-444f-8b0e-33ffd2a5809b"},1:{name:"Snare Drum",shortName:"SD",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fsd01.WAV?alt=media&token=b1910128-3f74-4d76-bb9e-7cdb4cbd9330"},2:{name:"Low Tom",shortName:"LT",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Flt01.WAV?alt=media&token=522e7d1e-8d8d-46ff-905a-a4e16718f7e0"},3:{name:"Mid Tom",shortName:"MT",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fmt01.WAV?alt=media&token=79ce4bf6-4ded-4224-a38f-4be0d032017c"},4:{name:"Hi Tom",shortName:"HT",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fht01.WAV?alt=media&token=f6662245-be58-483f-9302-ecec094a8705"},5:{name:"Rim Shot",shortName:"RS",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Frs01.WAV?alt=media&token=7e741312-8207-4f52-90d1-6d7d54ef25b3"},6:{name:"Hand Clap",shortName:"HC",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fcp01.WAV?alt=media&token=17f0c66a-6d4f-4783-93c6-0cb636b784c1"},7:{name:"Hi Hat",shortName:"HH",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fhh01.WAV?alt=media&token=52125594-e5a5-420d-9aa1-d88f51b4c4b3"},8:{name:"Cymbal",shortName:"CY",path:"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Frd01.WAV?alt=media&token=1ce6c343-51e7-4c16-acbf-f03f4bdf6ee3"}};var qa={currentSegmentIndex:0,currentBarIndex:0,isPlaying:!1,looping:!0};var Ka={},Ja={0:{seconds:100,decay:100,reverse:!1}};var za=[];P();var Za={user:void 0};var Qa=[],$a=P();var er=[],tr=[{id:0,type:"drumMachine",machineId:0,selected:!0},{id:1,type:"reverb",machineId:0,selected:!1},{id:3,type:"master",machineId:0,selected:!1},{id:4,type:"synth",machineId:0,selected:!1}];P();var nr=[],ar=[{id:0,from:{machineId:0,type:"drumMachine",nodePath:"outputs/main"},to:{machineId:0,type:"master",nodePath:"inputs/main"}},{id:1,from:{machineId:0,type:"drumMachine",nodePath:"outputs/send1"},to:{machineId:0,type:"reverb",nodePath:"inputs/main"}},{id:2,from:{machineId:0,type:"reverb",nodePath:"outputs/main"},to:{machineId:0,type:"master",nodePath:"inputs/main"}},{id:3,from:{machineId:0,type:"synth",nodePath:"outputs/main"},to:{machineId:0,type:"master",nodePath:"inputs/main"}}];P();var rr={},cr={trackId:"default",userId:void 0,state:"idle",write:!0};var ir="USER_TRACKS_LOADING",or="USER_TRACKS_LOADED",ur="USER_TRACKS_LOAD_ERROR",sr={state:"idle",tracks:{}};var lr={title:""},mr={title:"Untitled Track"};var dr={state:"idle",upload:{state:"idle",file:void 0},samples:{}};var hr={state:"idle",soundId:void 0};var pr=n(113),fr={},vr={0:{oscillators:{osc1:{waveType:"sine",octave:4,semitone:0,cent:0,amount:50},osc2:{waveType:"sine",octave:4,semitone:0,cent:0,amount:50}},fm:!0,envelopes:{amp:{attack:0,decay:100,sustain:100,release:0},filter:{attack:0,decay:100,sustain:100,release:0,amount:0}},filter:{frequency:100,resonance:0,type:"lowpass"},lfos:{lfo1:{rate:0,amount:0,waveType:"sine",destination:["osc12"]},lfo2:{rate:0,amount:0,waveType:"square",destination:["ffreq"]}},voices:4,sends:{send1:0,send2:0},volume:50,pan:50,currentBankIndex:0,banks:{0:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],1:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],2:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],3:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],4:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],5:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],6:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],7:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]}}};var gr=Object(L.c)({tempo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:var n=T(e.beatsPerMinute+1,$,ee);return Object.assign({},e,{beatsPerMinute:Math.round(n)});case z:var a=T(e.beatsPerMinute-1,$,ee);return Object.assign({},e,{beatsPerMinute:Math.round(a)});case Z:var r=T(e.beatsPerMinute+t.amount,$,ee);return Object.assign({},e,{beatsPerMinute:Math.round(r)});case Q:var c=T(t.value,$,ee);return Object.assign({},e,{beatsPerMinute:Math.round(c)});case He:case Ke:return Ua;case qe:return t.tempo;default:return e}},librarySounds:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&arguments[1],Ha},drumMachine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.channelId===n?Object(Ue.a)({},e,{volume:t.value}):e})})));case je:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.channelId===n?Object(Ue.a)({},e,{pitch:t.value}):e})})));case ke:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.channelId===n?Object(Ue.a)({},e,{decay:t.value}):e})})));case Ne:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.channelId===n?Object(Ue.a)({},e,{pan:t.value}):e})})));case Se:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.channelId===n?Object(Ue.a)({},e,{reverb:!e.reverb}):e})})));case Ie:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return Object(Ue.a)({},e,{selected:t.value===n})})})));case Pe:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return Object(Ue.a)({},e,{sound:t.channelId===n?t.value:e.sound})})})));case Ce:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.value===n?Object(Ue.a)({},e,{solo:!e.solo}):e})})));case we:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(e,n){return t.value===n?Object(Ue.a)({},e,{mute:!e.mute}):e})})));case Te:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{channels:e[t.machineId].channels.map(function(n,a){return t.channelId===a?Object(Ue.a)({},n,{patterns:Object(Ue.a)({},e[t.machineId].channels[t.channelId].patterns,Object(Rn.a)({},t.bankId,e[t.machineId].channels[t.channelId].patterns[t.bankId].map(function(e,n){return n===t.index?t.value:e})))}):n})})));case _e:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{currentBankIndex:t.value})));case Ae:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{swing:t.value})));case He:return Wa;case Ke:return Ya;case qe:return t.drumMachine;default:return e}},playState:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F:return e(Object.assign({},t,{isPlaying:!0}),H(0));case M:return Object.assign({},t,{isPlaying:!1});case R:return t.isPlaying?e(t,Y()):e(t,W());case B:return Object.assign({},t,{currentSegmentIndex:n.value});case G:return Object.assign({},t,{currentBarIndex:n.value});case X:return e(t,H(t.looping&&t.currentSegmentIndex>=15?0:t.currentSegmentIndex+1));case He:return qa;default:return t}},reverb:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{seconds:t.value})));case ie:return Object(Ue.a)({},e,Object(Rn.a)({},t.machineId,Object(Ue.a)({},e[t.machineId],{decay:t.value})));case He:return Ka;case Ke:return Ja;case qe:return t.reverb;default:return e}},buffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:za,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:var n=t.time,a=t.index,r=t.duration,c=en(e||[]),i=c?c.id:-1;return[].concat(Object(Bn.a)(e),[{time:n,index:a,bar:0,duration:r,id:i+1}]);case me:return e.filter(function(e){return e.id!==t.id});case le:return[];case He:return za;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return{user:t.value};default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return[{id:$a(),value:t.value,notificationType:t.notificationType||"timeout"}].concat(Object(Bn.a)(e));case ve:return e.filter(function(e){return e.id!==t.value});default:return e}},instruments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return er;case Ke:return tr;case qe:return t.instruments;default:return e}},connections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return nr;case Ke:return ar;case qe:return t.connections;default:return e}},track:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return Object(Ue.a)({},e,{trackId:t.trackId,userId:t.userId,state:"loading"});case Ke:return cr;case ze:return Object(Ue.a)({},e,{trackId:t.trackId,userId:t.userId});case qe:return Object(Ue.a)({},e,t.track,{state:"idle",write:t.write});default:return e}},tracks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ir:return Object(Ue.a)({},e,{state:"loading"});case or:return Object(Ue.a)({},e,{state:"loaded",tracks:Object(Ue.a)({},e.tracks,Object(Rn.a)({},t.userId,t.tracks))});case ur:return Object(Ue.a)({},e,{state:"error",error:t.error});default:return e}},meta:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return lr;case Ke:return mr;case qe:return t.meta||mr;case nt:return Object(Ue.a)({},e,{title:t.title});case at:return Object(Ue.a)({},e,{createdDate:t.createdDate});case rt:return Object(Ue.a)({},e,{updatedDate:t.updatedDate});default:return e}},samples:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ut:return Object(Ue.a)({},t,{state:"loading"});case st:return Object(Ue.a)({},t,{state:"loaded",samples:Object(Ue.a)({},t.samples,Object(Rn.a)({},n.userId,n.samples))});case dt:return e={name:n.name,shortName:n.shortName,path:n.path,createdDate:n.createdDate},Object(Ue.a)({},t,{upload:{state:"uploaded"},samples:Object(Ue.a)({},t.samples,Object(Rn.a)({},n.userId,Object(Ue.a)(Object(Rn.a)({},n.sampleId,e),t.samples[n.userId])))});case gt:return Object(Ue.a)({},t,{samples:Object(Ue.a)({},t.samples,Object(Rn.a)({},n.userId,Object(Ue.a)({},rn(t.samples[n.userId],function(e){var t=e.key;return e.value,t!==n.id}))))});case vt:return e=Object(Ue.a)({},t.samples[n.userId][n.id],{deleted:!0}),Object(Ue.a)({},t,{samples:Object(Ue.a)({},t.samples,Object(Rn.a)({},n.userId,Object(Ue.a)({},t.samples[n.userId],Object(Rn.a)({},n.id,e))))});case bt:return e=Object(Ue.a)({},t.samples[n.userId][n.id],{deleted:!1}),Object(Ue.a)({},t,{samples:Object(Ue.a)({},t.samples,Object(Rn.a)({},n.userId,Object(Ue.a)({},t.samples[n.userId],Object(Rn.a)({},n.id,e))))});case lt:return Object(Ue.a)({},t,{state:"error",error:n.error});case mt:return Object(Ue.a)({},t,{upload:{state:"idle",file:{name:n.name,shortName:n.shortName,file:n.file}}});case ht:return Object(Ue.a)({},t,{upload:Object(Ue.a)({},t.upload,{state:"error"})});case ft:return Object(Ue.a)({},t,{upload:Object(Ue.a)({},t.upload,{state:"uploading"})});case pt:return Object(Ue.a)({},t,{upload:{state:"idle",file:void 0}});default:return t}},preview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return{state:"playing",soundId:t.id};case Tt:return Object(Ue.a)({},e,{state:"idle"});case _t:return{state:"loading",soundId:t.id};default:return e}},synth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.machineId,r=t.param,c=t.paramItem,i=t.value,o=Object(pr.fromJS)(e);switch(n){case Vt:switch(a=a.toString(),r){case"voices":case"volume":case"pan":return o.updateIn([a,r],function(e){return i}).toJS();case"osc1":case"osc2":return o.updateIn([a,"oscillators",r,c],function(e){return i}).toJS();case"filter":case"sends":return o.updateIn([a,r,c],function(e){return i}).toJS();case"lfo1":case"lfo2":return o.updateIn([a,"lfos",r,c],function(e){return i}).toJS();case"amp":return o.updateIn([a,"envelopes",r,c],function(e){return i}).toJS();case"env-filter":return o.updateIn([a,"envelopes","filter",c],function(e){return i}).toJS();case"pattern-item":return o.updateIn([a,"banks"].concat(Object(Bn.a)(c.split("."))),function(e){return i}).toJS();default:return e}case He:return fr;case Ke:return vr;case qe:return t.synth||fr;default:return e}return e},router:Object(E.b)(Xa)}),br=n(87);if("function"!==typeof Er)var Er=function(e){return setTimeout(e,0)};var yr=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return br.a.create(function(t){!function e(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{a=t.next(r)}catch(o){return n.error(o)}var c,i=a.value;if(a.done)return n.complete();"undefined"!==typeof(c=i)&&"function"===typeof c.then?i.then(function(a){n.next(a),Er(function(){return e(t,n,a)})}).catch(function(e){return n.error(e)}):(n.next(i),Er(function(){return e(t,n,i)}))}(e.apply(void 0,n),t)})}},Or=yr.ogen=yr.default=yr,jr=60,kr=0,Nr=25;function Ir(e){return 1/function(e){return e/jr}(e)}function Cr(e,t){return Ir(e)/t}function wr(e,t){return Math.floor(e/t)}function Sr(e,t,n){var a=e.looping,r=t.beatsPerBar,c=t.segmentsPerBeat;return a?n%(r*c):n}var Tr=.25,_r=.1;var Ar=function(e,t){return void 0===e?t:t.reduce(function(t,n){var a=t.shouldAdd||n.id===e,r=t.items;return t.shouldAdd&&(r=[].concat(Object(Bn.a)(r),[n])),{items:r,shouldAdd:a}},{items:[],shouldAdd:!1}).items},Pr=n(86),xr=n.n(Pr),Vr=(br.a.create,xr.a.mark(function e(t,n){return xr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t()){e.next=5;break}return e.next=3,n();case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)})),Dr=function(){return new Promise(window.requestAnimationFrame)},Lr=n(114),Fr=-1,Mr=1;function Rr(e){var t=A(e,Fr,Mr);return[t,0,1-Math.abs(t)]}var Br=.4,Xr=1.6;var Gr=.03,Wr=1;var Yr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=function(e,t){var n=e.createBufferSource();return n.buffer=t,n}(e,t);return r.playbackRate.value=n||1,r.start(a),r},Ur=function(){var e=bn(),t=[],n=void 0,a=e.createGain(),r=e.createGain(),c=e.createGain(),i=function(e,t){var n=e.machineId,a=t.drumMachine[n].channels.map(function(e){return e.sound});(function(e,t){return e.map(function(e){return kn(e,t)})})(a,t)},o=function(e,n){var a,r=e.machineId,c=n.drumMachine[r].channels,i=c.reduce(function(e,t){return e||t.solo},!1);(a=[c,t],a[0].map(function(e,t){return a.map(function(e){return e[t]})})).forEach(function(e,t){var n,a=Object(Lr.a)(e,2),r=a[0],c=a[1];c.pre.gain.value=r.mute?0:r.solo?1:i?0:1,c.volume.gain.value=.01*r.volume,(n=c.pan).setPosition.apply(n,Object(Bn.a)(Rr(r.pan))),c.send1.gain.value=r.reverb?1:0,c.send2.gain.value=0})},u=function(a,r){var c=a.machineId,i=r.drumMachine,o=r.buffer,u=(r.playState,r.tempo),s=u.beatsPerMinute,l=u.segmentsPerBeat,m=i[c],d=m.channels,h=m.currentBankIndex,p=m.swing;o.length||(n=void 0);var f=void 0!==n?Ar(n,o):o;f.length&&(n=en(f).id),f.forEach(function(n){var a=n.time,c=n.index;n.bar;a+=function(e,t,n,a){var r=Cr(e,t),c=n%2===0,i=A(a,kr,Nr);return c?0:r/100*i}(s,l,c,p),d.forEach(function(n,i){var o=n.sound,u=n.pitch,s=n.decay,l=n.patterns;u=function(e){return A(e,Br,Xr)}(u),s=A(s,Gr,Wr);var m=l[h],d=kn(o,r);if(d){var p=d.soundPromise;d.path;m&&m[c]&&p.then(function(n){e.time>a||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=Yr(e,t,n,a),i=e.createGain();return i.gain.linearRampToValueAtTime(0,a+r),c.connect(i),i}(e,n,u,a,s).connect(t[i].pre)})}})})};return(t=Qt(9).map(function(t){return{send1:e.createGain(),send2:e.createGain(),volume:e.createGain(),pre:e.createGain(),post:e.createGain(),pan:e.createPanner()}})).forEach(function(e){e.pre.connect(e.volume),e.volume.connect(e.pan),e.pan.connect(e.post),e.post.connect(a),e.post.connect(e.send1),e.post.connect(e.send2),e.send1.connect(r),e.send2.connect(c),e.pan.panningModel="equalpower"}),{update:function(e,t){i(e,t),o(e,t),u(e,t)},remove:function(){e=null,t=null},outputs:{main:a,send1:r,send2:c,channels:t}}};function Hr(e,t){this.input=this.output=e.createConvolver(),this._context=e;var n=this.meta.params;t=t||{},this._seconds=t.seconds||n.seconds.defaultValue,this._decay=t.decay||n.decay.defaultValue,this._reverse=t.reverse||n.reverse.defaultValue,this._buildImpulse()}Hr.prototype=Object.create(null,{connect:{value:function(e){this.output.connect(e.input?e.input:e)}},disconnect:{value:function(){this.output.disconnect()}},_buildImpulse:{value:function(){var e,t,n=this._context.sampleRate,a=n*this.seconds,r=this.decay,c=this._context.createBuffer(2,a,n),i=c.getChannelData(0),o=c.getChannelData(1);for(t=0;t<a;t++)e=this.reverse?a-t:t,i[t]=(2*Math.random()-1)*Math.pow(1-e/a,r),o[t]=(2*Math.random()-1)*Math.pow(1-e/a,r);this.input.buffer=c}},meta:{value:{name:"SimpleReverb",params:{seconds:{min:1,max:50,defaultValue:3,type:"float"},decay:{min:0,max:100,defaultValue:2,type:"float"},reverse:{min:0,max:1,defaultValue:0,type:"bool"}}}},seconds:{enumerable:!0,get:function(){return this._seconds},set:function(e){this._seconds=e,this._buildImpulse()}},decay:{enumerable:!0,get:function(){return this._decay},set:function(e){this._decay=e,this._buildImpulse()}},reverse:{enumerable:!0,get:function(){return this._reverse},set:function(e){this._reverse=e,this._buildImpulse()}}});var qr=.2,Kr=2,Jr=.2,zr=2;var Zr=function(){var e=bn(),t=new Hr(e,{seconds:2,decay:2,reverse:0}),n=(e.createGain(),e.createGain()),a=e.createGain();n.connect(t.input),t.connect(a);return{update:function(e,n){var a=e.machineId,r=n.reverb[a],c=r.seconds,i=r.decay,o=A(c,qr,Kr),u=function(e){return A(e,Jr,zr)}(i);t.seconds!==o&&(t.seconds=o),t.decay!==u&&(t.decay=u)},remove:function(){},inputs:{main:n},outputs:{main:a}}},Qr=br.a.create,$r=(Math.min,Math.max,function(e){return e*e*.01}),ec=function(e){return T(.02*e,.003,2)},tc=function(e,t,n){var a,r=e.attack,c=e.decay,i=e.sustain,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$r;n.setTargetAtTime(o(100),t,ec(r)),n.setTargetAtTime(o(i),t+T((a=r)*a*.001,.015,10),ec(100-c))},nc=function(e,t,n){var a=e.release,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$r;n.setTargetAtTime(r(0),t,ec(a))},ac=function(e){return T(2*e*e,0,2e4)},rc=n(214),cc=function(){var e,t=bn(),n=t.createGain(),a=null,r=null,c=null,i=null,o=null,u=null,s=null,l=null,m=null,d=null,h=null,p=null,f=null,v=null,g=8,b=0,E={},y=new rc.a,O=function(){e=function(e){var t;return Qr(function(n){return e.subscribe(function(e){e.length||(t=void 0);var a=void 0!==t?Ar(t,e):e;a.length&&(t=en(a).id,a.forEach(function(e){return n.next(e)}))}),function(){return e.unsubscribe()}})}(y).subscribe(function(e){var t=e.time,n=void 0===t?0:t,r=e.index,c=void 0===r?0:r,i=(e.bar,e.duration),o=E,u=o.currentBankIndex,s=o.banks,l=o.oscillators,m=s[u][c];if(-1!==m&&l){++b>=g&&(b=0);var d=a[b],h=d.oscillators,p=h.osc1.osc,f=h.osc2.osc,v=d.gains,y=v.amp,O=v.filter,j=E,k=j.oscillators,N=k.osc1,I=N.octave,C=N.semitone,w=N.cent,S=k.osc2,_=S.octave,A=S.semitone,P=S.cent,x=j.envelopes,V=x.amp,D=V.attack,L=V.decay,F=V.sustain,M=V.release,R=x.filter,B=R.attack,X=R.decay,G=R.sustain,W=R.release,Y=R.amount,U=j.filter,H=U.frequency,q=(U.resonance,U.type,T(Gn.length*(0+I)+m,0,83)),K=T(Gn.length*(0+_)+m,0,83),J=Wn[q],z=Wn[K];J+=C*J*Yn+w*J*Un,z+=A*z*Yn+P*z*Un,p.frequency.setValueAtTime(J,n),f.frequency.setValueAtTime(z,n);var Z={attack:D,decay:L,sustain:F,release:M},Q=.5*i;tc(Z,n,y.gain),nc(Z,n+Q,y.gain);var $={attack:B,decay:X,sustain:G,release:W};tc($,n,O.frequency,function(e){return ac(H+.01*Y*(e-H))}),nc($,n+Q,O.frequency,function(e){return ac(H+.01*Y*(e-H))})}})},j=function(e,t){var n=e.machineId,a=t.synth[n];E=a},k=function(e,t){},N=function(){var e=t.currentTime;a.forEach(function(t){var n;if(E.oscillators){var a=t.oscillators,u=a.osc1,s=u.osc,l=u.amount,m=a.osc2,d=m.osc,h=m.amount,p=t.gains.filter,f=E,v=f.oscillators,b=v.osc1,y=b.waveType,O=b.amount,j=v.osc2,k=j.waveType,N=j.amount,I=f.filter,C=I.frequency,w=I.resonance,S=I.type,T=f.lfos,_=T.lfo1,A=(_.rate,_.amount,_.waveType,T.lfo2),P=(A.rate,A.amount,A.waveType,f.voices),x=f.volume,V=f.pan,D=f.sends,L=D.send1,F=D.send2;g=P,s.type!=y&&(s.type=y),d.type!=k&&(d.type=k),l.gain.setValueAtTime(.01*O,e),h.gain.setValueAtTime(.01*N,e),r.gain.setValueAtTime(.01*x*.005,e),i.gain.setValueAtTime(.01*L,e),o.gain.setValueAtTime(.01*F,e),p.type!=S&&(p.type=S),p.frequency.setValueAtTime(ac(C),e),p.Q.setValueAtTime(.05*w,e),(n=c).setPosition.apply(n,Object(Bn.a)(Rr(V)))}})};return function(){var e;a=Qt(8).map(function(e){return{oscillators:{osc1:{osc:t.createOscillator(),amount:t.createGain()},osc2:{osc:t.createOscillator(),amount:t.createGain()}},gains:{amount:t.createGain(),amp:t.createGain(),filter:t.createBiquadFilter(),output:t.createGain()}}}),r=t.createGain(),c=t.createPanner(),i=t.createGain(),o=t.createGain(),u=t.createGain(),s=t.createOscillator(),m=t.createGain(),l=t.createGain(),d=t.createGain(),h=t.createOscillator(),v=t.createGain(),p=t.createGain(),f=t.createGain(),a.forEach(function(e,n){var a=e.oscillators,c=a.osc1,i=c.osc,o=c.amount,u=a.osc2,s=u.osc,l=u.amount,m=e.gains,d=m.amount,h=m.amp,p=m.filter,f=m.output;i.type="sine",i.frequency.setValueAtTime(220,t.currentTime),i.start(),i.connect(o),s.type="sine",s.frequency.setValueAtTime(110,t.currentTime),s.start(),s.connect(l),o.connect(h),l.connect(h),h.connect(p),h.gain.value=0,p.connect(d),d.connect(f),f.connect(r)}),r.gain.value=1,r.connect(u),u.connect(m),l.gain.value=0,s.frequency.value=0,s.connect(l),m.connect(c),l.connect(d),l.connect(c),u.connect(v),p.gain.value=0,h.frequency.value=0,h.connect(p),v.connect(c),p.connect(f),p.connect(c),c.panningModel="equalpower",(e=c).setPosition.apply(e,Object(Bn.a)(Rr(50))),c.connect(n),O()}(),{update:function(e,t){k(e,t),j(e,t),N(e,t),y.next(t.buffer)},remove:function(){t=null,e.unsubscribe()},outputs:{main:n}}},ic={},oc=function(e){var t,n={},a=e.instruments;try{(t=a.map(function(e){var t,n=e.id,a=e.type,r=ic[n];if(r)return r;switch(a){case"drumMachine":t=Ur();break;case"synth":t=cc();break;case"reverb":t=Zr();break;case"master":t=function(){var e=bn(),t=e.createGain();return t.connect(e.destination),{inputs:{main:t}}}();break;default:t=null}return{instrument:e,machine:t}})).forEach(function(t){var a=t.instrument,r=t.machine;ic=Object(Ue.a)({},ic,Object(Rn.a)({},a.id,{instrument:a,machine:r})),n[a.id]=!0,r.update&&r.update(a,e)}),nn(ic).forEach(function(e){var t=e.key,a=e.value.machine;!n[t]&&a.remove&&(a.remove(),uc(t))})}catch(r){console.error(r)}return t},uc=function(e){ic=nn(ic).filter(function(t){return t.key===e}).reduce(function(e,t){var n=t.key,a=t.value;return Object(Ue.a)({},e,Object(Rn.a)({},n,a))},{})},sc={},lc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.machineId,a=e.type,r=t.filter(function(e){return e.instrument.type===a&&e.instrument.machineId===n})[0];return r&&r.machine},mc=n(18),dc=function(e,t,n){return Va().then(function(){return _a.a.database().ref("users/".concat(e,"/tracks/").concat(t)).set(n)})},hc=["connections","drumMachine","instruments","reverb","tempo","track","meta","synth"],pc=function(e){return function(t){var n=e.getState(),a=gr(n,t);if(n.router.location){var r=sn(a.router.location.pathname);if(!("loading"===a.track.state)&&!!r){var c=r.params,i=c.userId,o=c.trackId,u=void 0===o?"default":o,s=n.track.trackId,l=u!==s;return!s||l?{userId:i,trackId:u}:void 0}}}},fc=function(){return(new Date).toISOString()},vc=Object(L.a)(function(e){return function(e){var t;return t=function(t){e(ye(t))},Va().then(function(){return _a.a.auth().onAuthStateChanged(t)}),function(t){return e(t)}}},function(e){return function(t){var n=bn(),a=!1,r=Or(Vr),c=Rt,i=function(){a||(a=!0,o())},o=function(){r(function(){return a},Dr).subscribe(function(){try{var a=e.getState();(function(e,t){var n=t.playState,a=t.tempo,r=t.buffer,c=e+Tr,i=Cr(a.beatsPerMinute,a.segmentsPerBeat),o=Qt(wr(Tr,i)),u=en(r);return!u||u.time<c?o.reduce(function(e,t,r){var c=en(e);return[].concat(Object(Bn.a)(e),[{index:Sr(n,a,c.index+1),time:c.time+i,duration:i}])},[u||{index:0,time:e+_r,duration:i}]).filter(function(e,t){return!u||0!==t}):[]})(n.currentTime,a).forEach(function(e){var n=e.index,a=e.time,r=e.duration;return t(c.newBufferSegment(n,a,r))})}catch(r){console.error(r)}},function(e){return console.error(e)},function(){return t(c.clearBufferSegments())})},u=function(){a=!1};return function(n){return function(t){var n=e.getState(),r=gr(n,t).playState;r.isPlaying&&!a?i():!r.isPlaying&&a&&u()}(n),t(n)}}},function(e){return function(t){var n=bn(),a=!1,r=Or(Vr),c=Lt,i=function(){a||(a=!0,o())},o=function(){r(function(){return a},Dr).subscribe(function(){var a=e.getState(),r=a.buffer,i=n.currentTime;if(r.length){var o=r.reduce(function(e,t){return t.time<=i?t:e});o.index!==a.playState.currentSegmentIndex&&t(c.newSegmentIndex(o.index))}},function(e){return console.error(e)})},u=function(){a=!1};return function(n){return function(t){var n=e.getState(),r=gr(n,t).playState;r.isPlaying&&!a?i():!r.isPlaying&&a&&u()}(n),t(n)}}},function(e){return function(e){var t=bn(),n=!1;return function(a){switch(a.type){case R:return function(){if(!n){n=!0;for(var e=t.createBuffer(2,48,t.sampleRate),a=0;a<2;a++)for(var r=e.getChannelData(a),c=0;c<48;c++)r[c]=2*Math.random()-1;var i=t.createBufferSource(),o=t.createGain();o.gain.value=.1,i.buffer=e,i.connect(o),o.connect(t.destination),i.start()}}(),e(a);default:return e(a)}}}},function(e){return function(t){return function(n){switch(n.type){case"TRACK_SAVE":return function(n){var a=e.getState().meta.createdDate;a||(a=fc(),t(it(a)));var r=fc();t(ot(r))}(),t(n);default:return t(n)}}}},function(e){return function(t){var n=pc(e),a=function(n,a){var r=!n;Dr().then(function(e){t(Ze(n,a))}).then(function(c){r?Dr().then(function(e){t(Qe())}):function(e,t){return Va().then(function(){return _a.a.database().ref("users/".concat(e,"/tracks/").concat(t)).once("value").then(function(e){return e.val()})})}(n,a).then(function(a){var r=e.getState(),c=function(e,t){return e===t}(r.auth.user?r.auth.user.uid:void 0,n);t(tt(a,c)),t(ge("Track loaded!"))}).catch(function(e){t(ge("Error loading track"))})})},r=function(e){return hc.reduce(function(t,n){return t[n]=e[n],t},{})},c=function(n){var a=e.getState(),c=gr(a,n),i=c.track,o=i.userId,u=i.trackId;u&&"default"!==u?dc(o,u,r(c)).then(function(){t(ge("Track saved!"))}).catch(function(e){t(ge("Error saving track"))}):function(e){return Va().then(function(){return _a.a.database().ref("users/".concat(e)).child("tracks").push().key})}(o=c.auth.user.uid).then(function(t){u=t;var n=e.getState();return c=gr(n,et(o,u)),dc(o,t,r(c))}).then(function(){return Dr().then(function(e){t(et(o,u)),t(Object(mc.d)(ln(o,u))),t(ge("Track saved!"))})}).catch(function(e){t(ge("Error saving track"))})};return function(e){switch(e.type){case"TRACK_SAVE":return c(e),t(e);default:return function(e){var t=n(e);if(t){var r=t.userId,c=t.trackId;a(r,c)}}(e),t(e)}}}},function(e){return function(t){var n=function(t){var n=gr(e.getState(),t);!function(e,t){var n={};t.connections.forEach(function(t){var a=t.id,r=t.from,c=t.to,i=sc[a];if(n[a]=!0,!i){var o=lc(r,e),u=r.nodePath,s=an(o,u),l=lc(c,e),m=c.nodePath,d=an(l,m);s&&d&&(s.connect(d),sc=Object(Ue.a)({},sc,Object(Rn.a)({},a,{from:r,to:c})))}}),nn(sc).forEach(function(t){var a=t.key,r=t.value,c=(r.id,r.from),i=r.to;if(!n[a]){var o=lc(c,e),u=c.nodePath,s=an(o,u),l=lc(i,e),m=i.nodePath,d=an(l,m);s&&d&&s.disconnect(d),delete sc[a]}})}(oc(n),n)};return function(e){return n(e),t(e)}}},function(e){return function(t){var n=function(t){var n=e.getState(),a=gr(n,t);if(n.router.location){var r,c=(r=a.router.location.pathname,un(r,"/users/:userId/tracks/"));if("loading"!==a.tracks.state&&c)return{userId:c.params.userId}}},a=function(e){var a=n(e);if(a){var r=a.userId;Dr().then(function(e){t(function(e){return{type:ir,userId:e}}(r))}).then(function(e){(function(e){return Va().then(function(){return _a.a.database().ref("users/".concat(e,"/tracks/")).orderByChild("meta/updatedDate").once("value").then(function(e){var t=[];return e.forEach(function(e){t=[].concat(Object(Bn.a)(t),[e.val()])}),t.reverse(),t})})})(r).then(function(e){t(function(e,t){return{type:or,userId:e,tracks:t}}(r,e))}).catch(function(e){t(function(e){return{type:ur,error:e}}("There was an error loading tracks."))})})}};return function(e){return a(e),t(e)}}},function(e){return function(t){var n=void 0,a=bn();return function(r){switch(r.type){case St:return void function(r){var c=r.userId,i=r.id,o=e.getState(),u=kn(i,o,c).soundPromise;t(xt(i)),u.then(function(e){t(At(c,i)),(n=Yr(a,e)).connect(a.destination),n.onended=function(){t(Pt())}})}(r)}return t(r)}}},function(e){return function(t){var n=function(t){var n=e.getState(),a=gr(n,t);if(n.router.location){var r,c=(r=a.router.location.pathname,un(r,"/users/:userId/samples/"));if(c)return{userId:c.params.userId}}},a=function(a){var r=function(t){var a=pc(e)(t),r=n(t);return a||r}(a);r&&function(e){return Va().then(function(){return _a.a.database().ref("users/".concat(e,"/samples/")).orderByChild("createdDate").once("value").then(function(t){return{userId:e,samples:t.val()}})})}(r.userId).then(function(e){var n=e.userId,a=e.samples;t(Ot(n,a))}).catch(function(e){t(ge("There was an error loading the samples."))})},r=function(n){var a=n.name,r=n.shortName,c=n.file,i=e.getState(),o=i.samples,u=i.auth,s=an(o,"upload/state"),l=an(u,"user/uid");if("idle"===s){var m=fc();Dr().then(function(e){t(jt())}),function(e,t,n,a,r){return Va().then(function(){var c=_a.a.storage().ref(),i=n+r;return c.child("user/".concat(e,"/samples/").concat(i)).put(t).then(function(t){var c=_a.a.database().ref("users/".concat(e,"/samples/")).push().key,i={name:n,shortName:a,createdDate:r,path:t.downloadURL};return _a.a.database().ref("users/".concat(e,"/samples/").concat(c)).set(i).then(function(){return Object(Ue.a)({},i,{userId:e,sampleId:c})})})})}(l,c,a,r,m).then(function(e){t(yt(e))}).catch(function(e){t(kt()),t(ge("There was an error uploading the sample."))})}},c=function(n){var a=n.id,r=n.userId,c=e.getState(),i=c.samples,o=(c.auth,an(i,"samples/".concat(r,"/").concat(a,"/path")));(function(e,t,n){return Va().then(function(){return _a.a.storage().refFromURL(n).delete().then(function(n){return _a.a.database().ref("users/".concat(e,"/samples/").concat(t)).remove()})})})(r,a,o).then(function(e){t(Ct(r,a)),t(ge("Sample deleted."))}).catch(function(e){t(wt(r,a)),t(ge("There was an error deleting the sample."))})};return function(e){switch(e.type){case mt:r(e);break;case vt:c(e);break;default:a(e)}return t(e)}}},Ga);n(209);var gc,bc=vc(L.d)(gr,gc);b.a.render(v.a.createElement(j.a,{store:bc},v.a.createElement(E.a,{history:Xa},v.a.createElement(y.a,null,v.a.createElement(O.a,{path:"/user/login",component:La}),v.a.createElement(O.a,{path:"/user/logout",component:Ma}),v.a.createElement(O.a,{path:"/users/:userId/tracks/:trackId",component:pa}),v.a.createElement(O.a,{path:"/users/:userId/tracks",component:Oa}),v.a.createElement(O.a,{path:"/users/:userId/samples",component:wa}),v.a.createElement(O.a,{path:"/",component:pa})))),document.getElementById("app"))}},[[115,1,2]]]);
//# sourceMappingURL=main.0065f4a4.chunk.js.map