{"version":3,"sources":["js/components/toggle-button/toggle.button.react.jsx","js/library/natives/numbers.js","js/library/geometry/line.js","js/library/geometry/triangle.js","js/components/rotator/rotator.react.jsx","js/constants/play.state.constants.js","js/actions/play.state.actions.js","js/constants/tempo.constants.js","js/actions/tempo.actions.js","js/constants/reverb.constants.js","js/actions/reverb.actions.js","js/constants/buffer.constants.js","js/actions/buffer.actions.js","js/constants/notifications.constants.js","js/actions/notifications.actions.js","js/constants/auth.constants.js","js/actions/auth.actions.js","js/constants/drum.machine.constants.js","js/actions/drum.machine.actions.js","js/constants/track.constants.js","js/actions/track.actions.js","js/constants/meta.constants.js","js/actions/meta.actions.js","js/constants/samples.constants.js","js/actions/samples.actions.js","js/constants/preview.constants.js","js/actions/preview.actions.js","js/constants/synth.constants.js","js/actions/synth.actions.js","js/actions/root.actions.js","js/components/maybe/maybe.react.jsx","js/components/modal/modal.react.jsx","js/library/natives/array.js","js/library/natives/object.js","js/components/tabs/tabs.react.jsx","js/library/routing/routing.js","js/components/sound-preview/sound.preview.react.jsx","js/components/sound-selector/sound.selector.react.jsx","js/library/audio-api/context.js","js/library/audio-api/request.js","js/library/request/arraybuffer.js","js/library/audio-api/load.sounds.js","js/components/channel/channels.react.jsx","js/components/pattern/pattern.beat.react.jsx","js/components/pattern/pattern.time.signature.react.jsx","js/components/pattern/pattern.react.jsx","js/components/play-toggle/play.toggle.react.jsx","js/components/display/display.react.jsx","js/components/toolbar/reverb/reverb.react.jsx","js/components/slider/slider.react.jsx","js/components/toolbar/toolbar.react.jsx","js/components/channel-selector/channel.selector.react.jsx","js/components/drum-machine/drum.machine.react.jsx","js/components/fader/fader.react.jsx","js/library/keyboard/index.js","js/components/selector/selector.react.jsx","js/components/collapsible/collapsible.react.jsx","js/components/grid/grid.react.jsx","js/components/synth/synth.react.jsx","js/components/instrument/instrument.react.jsx","js/components/input/input.react.jsx","js/components/dropdown/dropdown.react.jsx","js/components/header/header.react.jsx","js/components/notifications/notifications.react.jsx","js/components/views/view.react.jsx","js/components/views/user/track.react.jsx","js/components/views/user/tracks.react.jsx","js/components/views/user/samples.react.jsx","js/components/firebase/auth.react.jsx","js/library/firebase/config.js","js/library/firebase/firebase.js","js/components/views/user/login.react.jsx","js/components/firebase/logout.react.jsx","js/components/views/user/logout.react.jsx","js/middleware/history.js","js/reducers/drum.machine.reducer.js","js/reducers/tempo.reducer.js","js/reducers/library.sounds.reducer.js","js/reducers/play.state.reducer.js","js/reducers/reverb.reducer.js","js/reducers/buffer.reducer.js","js/reducers/auth.reducer.js","js/reducers/notifications.reducer.js","js/reducers/instruments.reducer.js","js/reducers/connections.reducer.js","js/reducers/track.reducer.js","js/constants/tracks.constants.js","js/reducers/tracks.reducer.js","js/reducers/meta.reducer.js","js/reducers/samples.reducer.js","js/reducers/preview.reducer.js","js/reducers/synth.reducer.js","js/reducers/root.reducer.js","js/library/generator/ogen.js","js/library/audio-api/tempo.js","js/library/audio-api/play.state.js","js/library/audio-api/buffer.js","js/library/audio-api/interval.js","js/library/audio-api/pan.js","js/library/audio-api/playback.rate.js","js/library/audio-api/decay.js","js/library/audio-api/instruments/trigger.buffer.js","js/library/audio-api/instruments/drum.machine.js","js/library/web-audio-components/simple.reverb.js","js/library/audio-api/reverb.js","js/library/audio-api/instruments/reverb.js","js/library/audio-api/buffer.stream.js","js/library/audio-api/adsr.js","js/library/audio-api/filter.js","js/library/audio-api/instruments/synth.js","js/library/audio-api/instruments/instrument.audio.js","js/library/audio-api/instruments/master.js","js/library/audio-api/instruments/connections.js","js/library/firebase/db.js","js/middleware/track.js","js/library/natives/date.js","js/middleware/middleware.js","js/middleware/auth.js","js/library/firebase/auth.js","js/middleware/buffer.js","js/middleware/play.state.js","js/middleware/start.noise.js","js/middleware/meta.js","js/middleware/instruments.js","js/middleware/tracks.js","js/actions/tracks.actions.js","js/middleware/preview.js","js/middleware/samples.js","js/store/store.js","index.js"],"names":["ToggleButton","props","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_this$props","_this$props$name","name","onClick","_this$props$selected","selected","_this$props$classes","classes","selectToggleClass","selectAriaPressed","react_default","a","createElement","ref","className","aria-pressed","React","Component","normaliseValue","value","min","max","valueAsPercentageOfRange","percentageToValueOfRange","unique","uniqueIndex","lengthOfLine","pointa","pointb","Math","sqrt","pow","x","y","angleInRightTriangleInDegrees","adjacent","hypotenuse","radians","PI","radiansToDegrees","acos","angleInRightTriangle","Rotator","_this","state","touching","currentTouch","previousRotation","rotation","_this$props$min","_this$props$max","onValueChange","_this$state","newValue","getRotationFromValue","knobStyle","transform","type","step","onChange","e","target","aria-hidden","style","_this$props2","_this$props2$min","_this$props2$max","_this2","$knob","refs","knob","$knobContainer","document","addEventListener","onStart","onMove","onEnd","movePoint","knobCoordinates","getBoundingClientRect","scrollY","window","pageYOffset","originx","left","width","originy","top","height","ax","ay","bx","aLength","length","angle","_ref2","angleFromVerticalGivenXandY","_ref","angleLess180","_this$props3","_this$props3$min","_this$props3$max","touch","lengthAndAngle","getLengthAndAngleFromCentre","getValueFromLengthAndAngle","preventDefault","touchX","undefined","pageX","touches","touchY","pageY","getValueFromTouch","setState","_this3","_this$props4","rafId","cancelAnimationFrame","requestAnimationFrame","PLAY","PAUSE","TOGGLE_PLAY_PAUSE","NEW_SEGMENT_INDEX","INCREMENT_SEGMENT_INDEX","NEW_BAR_INDEX","play","pause","togglePlayPause","newSegmentIndex","incrementSegmentIndex","newBarIndex","INCREMENT_BPM","DECREMENT_BPM","CHANGE_BPM_BY_AMOUNT","CHANGE_BPM","MIN_BEATS_PER_MINUTE","MAX_BEATS_PER_MINUTE","incrementBPM","decrementBPM","changeBPMByAmount","amount","changeBPMToAmount","CHANGE_REVERB_SECONDS_TO_AMOUNT","CHANGE_REVERB_DECAY_TO_AMOUNT","changeReverbSecondsToAmount","machineId","changeReverbDecayToAmount","NEW_BUFFER_SEGMENT","CLEAR_BUFFER_SEGMENTS","CLEAR_BUFFER_SEGMENT","newBufferSegment","index","time","duration","clearBufferSegments","clearBufferSegment","id","NEW_NOTIFICATION","CLEAR_NOTIFICATION","newNotification","text","notificationType","clearNotification","AUTH_STATE_CHANGE","authStateChange","user","CHANGE_VOLUME_TO_AMOUNT","CHANGE_PITCH_TO_AMOUNT","CHANGE_DECAY_TO_AMOUNT","CHANGE_PAN_TO_AMOUNT","CHANGE_SELECTED_CHANNEL","TOGGLE_SOLO_CHANNEL","TOGGLE_MUTE_CHANNEL","TOGGLE_REVERB","TOGGLE_BEAT_STATE","NEW_BANK_INDEX","CHANGE_SWING_TO_AMOUNT","CHANGE_SELECTED_SOUND","changeVolumeToAmount","channelId","changePitchToAmount","changeDecayToAmount","changePanToAmount","toggleReverb","changeSelectedChannel","newChannelId","changeSelectedSound","newSoundId","toggleSoloChannel","toggleMuteChannel","toggleBeat","bankId","newBankIndex","changeSwingToAmount","NEW_TRACK_LOADING","NEW_TRACK_LOADED","LOAD_DEFAULT_TRACK","TRACK_SAVE","NEW_TRACK_SAVE","newTrackLoading","userId","trackId","loadDefaultTrack","saveTrack","newTrackSave","newTrackLoaded","write","arguments","objectSpread","CHANGE_TRACK_TITLE","CHANGE_TRACK_CREATED_DATE","CHANGE_TRACK_UPDATED_DATE","changeTrackTitle","title","changeTrackCreatedDate","createdDate","changeTrackUpdatedDate","updatedDate","SAMPLES_LOADING","SAMPLES_LOADED","SAMPLES_LOAD_ERROR","UPLOAD_SAMPLE","SAMPLE_UPLOADED","SAMPLE_UPLOAD_ERROR","SAMPLE_UPLOAD_RESET","SAMPLE_UPLOADING","DELETE_SAMPLE","SAMPLE_DELETED","SAMPLE_DELETE_ERROR","uploadSample","shortName","file","newSampleUploaded","path","sampleId","samplesLoaded","samples","sampleUploading","samplesUploadError","samplesUploadReset","deleteSample","sampleDeleted","sampleDeleteError","PLAY_PREVIEW","PAUSE_PREVIEW","LOADING_PREVIEW","playPreview","pausePreview","loadingPreview","CHANGE_SYNTH_PARAM","changeSynthParam","param","paramItem","root_actions","playState","tempo","reverb","buffer","notifications","drumMachine","track","tracks","meta","preview","synth","Maybe","condition","children","Modal","open","trigger","onOpen","onClose","numberToArrayLength","offset","array","i","first","toArray","head","slice","last","objectToArray","object","keys","map","key","objectToArrayWithKeyValue","getValueFromPath","split","reduce","obj","filter","objectList","forEach","_ref3","keyValueArrayToObject","Tabs","tabs","class","changeTab","onTabChange","exactMatchPath","pattern","match","matchPath","pathsItems","item","patternItems","matchesTrackRoute","matchesUserTrackRoute","matchesDefaultTrackRoute","buildTrackRoute","concat","buildUserTracksRoute","buildUserSamplesRoute","SoundPreview","_props$preview","soundId","dispatch","previewActions","bindActionCreators","DrumMachineActions","currentSoundIsPlaying","currentSoundIsLoading","LibraryTab","selectedId","librarySoundsList","librarySounds","checked","event","sound_preview_react_SoundPreview","assign","SamplesTab","auth","samplesList","loggedIn","Link","to","SoundSelector","selectedTab","onSoundChange","Tab","getSelectedTab","modal_react_Modal","icon","_ref4","tabs_react_Tabs","disabled","soundHasChanged","context","getAudioContext","AudioContext","webkitAudioContext","decodeAudioData","Promise","resolve","reject","requestAndDecodeSound","url","fetch","then","response","arrayBuffer","data","cache","getSound","userSample","librarySample","loadSound","sound","soundPromise","requestSound","Channels","machine","channels","actions","channel","solo","mute","sound_selector_react_SoundSelector","toggle_button_react_ToggleButton","rotator_react_Rotator","volume","pitch","decay","pan","PatternBeat","current","onToggle","_this$props$showIndic","showIndicator","num","onOff","classnames","on","PatternTimeSignature","PatternTimeSignatureGroup","PatternTimeSignature44","Pattern","currentBankIndex","drumMachineActions","pattern_time_signature_react_PatternTimeSignature","beatsPerBar","beatIndex","segments","segmentsPerBeat","pattern_time_signature_react_PatternTimeSignatureGroup","pattern_time_signature_react_PatternTimeSignature44","segmentIndex","patterns","beat","indexOf","pattern_beat_react_PatternBeat","currentSegmentIndex","PlayToggle","isPlaying","onPlayPause","toggleClass","ariaPressed","Reverb","reverbActions","seconds","Slider","calculateContainerWidth","$slider","slider","containerWidth","currentX","getXFromCurrentValue","previousX","getCurrentValueFromX","getCurrentX","coordinates","steps","push","_","sliderStyle","transition","sliderClass","currentStep","round","touchDistance","getTouchDistance","percentage","removeEventListener","Toolbar","playStateActions","tempoActions","swing","play_toggle_react_PlayToggle","slider_react_Slider","beatsPerMinute","reverb_react_Reverb","ChannelSelector","DrumMachine","toolbar_react_Toolbar","channel_selector_react_ChannelSelector","channels_react_Channels","pattern_react_Pattern","Fader","calculateContainerDimensions","faderContainerDimensions","faderContainer","containerHeight","faderWidth","getFaderWidth","faderHeight","getFaderHeight","touchesX","touchesY","currentY","getYFromCurrentValue","previousY","orientation","getCurrentValueFromY","getCurrentY","toConsumableArray","_classnames","containerStyle","faderStyle","defineProperty","grabbing","_this$props5","_this$props6","getContainerWidth","_this$props7","getContainerHeight","_this$props8","viewStep","_this$props9","getTouchDistanceX","getTouchDistanceY","$fader","fader","keyboardArray","keyboardFrequencies","keyTranspose","Selector","selectedIndex","childProps","Children","child","handleDecrement","handleIncrement","SelectorOption","Collapsible","initialState","closed","displayName","cloneElement","handleToggle","CollapsibleHeader","CollapsibleContent","GRID_SIZE_DEFAULT","GridContainer","columns","rows","column","row","$grid","grid","dimensions","maxColumns","floor","grid-container-show-scroll-x","grid-container-show-scroll-y","grid_react_GridScroll","fader_react_Fader","PureComponent","GridAxis","_props$max","_props$max$columns","_props$max$rows","_props$offset","_props$offset$column","_props$offset$row","GridAxisItem","Grid","_props$max$rows2","_props$offset$row2","GridRow","_props$max$columns2","_props$offset$column2","GridScroll","Synth","synthParams","synthActions","collapsible_react_Collapsible","collapsible_react_CollapsibleHeader","collapsible_react_CollapsibleContent","voices","sends","send1","send2","selector_react_Selector","selector_react_SelectorOption","htmlFor","frequency","resonance","oscillators","osc1","waveType","octave","semitone","cent","osc2","envelopes","amp","attack","sustain","release","grid_react_GridContainer","grid_react_GridAxis","banks","grid_react_GridAxisItem","keyIndex","keyValue","grid_react_Grid","keyName","grid_react_GridRow","dark","includes","light","Instrument","instrument","instruments","drum_machine_react_DrumMachine","synth_react_Synth","DefaultInput","_Component","inherits","createClass","focus","onBlur","DropDownMenu","items","callback","NavLink","link","activeClassName","getMenuItemsFromProps","trackActions","Header","metaActions","input_react_DefaultInput","dropdown_react_DropDownMenu","Notifications","notification","showHideClass","closeNotification","nextProps","newNotifications","oldNotification","setExpiryTimout","deleteNotification","setTimeout","_this4","View","view","header_react_Header","notifications_react_Notifications","Track","view_react_View","instrument_react_Instrument","connect","TracksList","userTracks","updatedMoment","moment","fromNow","deleteTrack","tracks_react_TracksEmpty","TracksLoading","TracksEmpty","Tracks","TrackState","getTrackStateFromProps","generateSampleName","substring","toUpperCase","UploadSampleModal","dragover","dataTransfer","dropEffect","dt","kind","getAsFile","_generateSampleName","files","_generateSampleName2","_generateSampleName3","currentUserId","samplesActions","onDragOver","onDragLeave","onDrop","onFileInput","SamplesList","userSamplesList","samples_react_UploadSampleModal","_ref2$value","deleted","Samples","samples_react_SamplesList","ui","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","initialised","init","firebase","initializeApp","Auth","from","location","pathname","Redirect","firebaseui","AuthUI","start","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","EmailAuthProvider","PhoneAuthProvider","signInSuccessUrl","callbacks","signInSuccess","signedIn","auth_react_Auth","Logout","signOut","logout_react_Logout","history","createHashHistory","historyMiddleware","routerMiddleware","defaultState","0","1","2","3","4","5","6","7","8","currentBarIndex","looping","reverse","idGenerator","nodePath","USER_TRACKS_LOADING","USER_TRACKS_LOADED","USER_TRACKS_LOAD_ERROR","upload","fm","lfos","lfo1","rate","destination","lfo2","rootReducer","combineReducers","action","normalisedIncrementBPM","normalisedDecrementBPM","normalisedChangeByBPM","normalisedChangeBPM","lastEntry","lastId","bar","segment","connections","error","sample","$state","fromJS","toString","updateIn","oldValue","toJS","router","connectRouter","setImmediate","fn","ogen","_len","args","Array","_key","Observable","create","observer","next","iter","prev","err","done","complete","val","catch","apply","default","SECONDS_IN_MINUTE","MIN_PERCENTAGE_OF_SEGMENT_TO_SWING","MAX_PERCENTAGE_OF_SEGMENT_TO_SWING","getBeatTimeInSeconds","getBeatsPerSecond","getSegmentTimeInSeconds","getSegmentsInTimespan","timespan","segmentTime","normalisedIndex","LOOK_AHEAD_IN_SECONDS","BUFFER_DELAY_IN_SECONDS","buffersSinceId","curr","shouldAdd","intervalGenerator","regenerator_default","mark","shouldContinue","timeout","wrap","_context","stop","MIN_PAN","MAX_PAN","panPercentageToValue","panPercentage","abs","MIN_PLAYBACK_RATE","MAX_PLAYBACK_RATE","MIN_DECAY","MAX_DECAY","triggerBuffer","bufferSource","source","createBufferSource","playbackRate","createDrumMachine","channelNodes","lastBufferId","output","createGain","updateSounds","soundIds","loadSounds","updateGains","arrays","atLeastOneChannelSolod","_channelNode$pan","slicedToArray","channelNode","pre","gain","setPosition","updateSoundTriggers","_state$tempo","_drumMachine$machineI","buffers","even","swingPercentage","getSwingOffset","channelIndex","pitchToPlaybackRate","soundObject","soundBuffer","decayNode","linearRampToValueAtTime","triggerBufferAndDecay","post","createPanner","panningModel","update","remove","outputs","main","SimpleReverb","opts","input","createConvolver","p","params","_seconds","defaultValue","_decay","_reverse","_buildImpulse","prototype","dest","disconnect","n","sampleRate","impulse","createBuffer","impulseL","getChannelData","impulseR","random","enumerable","get","set","MIN_REVERB_SECONDS","MAX_REVERB_SECONDS","MIN_REVERB_DECAY","MAX_REVERB_DECAY","createReverb","reverbNode","reverbSeconds","reverbDecay","reverbPercentage","reverbDecayPercentageToValue","inputs","divideBy100","percentToTimeConstant","setAttackDecayValues","startTime","audioParam","normalise","setTargetAtTime","setSustainReleaseValues","filterPercentageToValue","createSynth","bufferStream","voiceNodes","volumeNode","panNode","send1Node","send2Node","preLfoNode","lfo1Node","lfo1WetNode","lfo1DryNode","lfo1OutNode","lfo2Node","lfo2WetNode","lfo2OutNode","lfo2DryNode","availableVoice","updateStream","Subject","createNoteStream","onUpdate","subscribe","unsubscribe","createBufferStream","_buffer$time","_buffer$index","_state","noteIndex","voiceNode","_voiceNode$oscillator","osc1osc","osc","osc2osc","_voiceNode$gains","gains","_state2","_state2$oscillators","_state2$oscillators$o","osc1Octave","osc1Semitone","osc1Cent","_state2$oscillators$o2","osc2Octave","osc2Semitone","osc2Cent","_state2$envelopes","_state2$envelopes$amp","ampAttack","ampDecay","ampSustain","ampRelease","_state2$envelopes$fil","filterAttack","filterDecay","filterSustain","filterRelease","filterAmount","_state2$filter","filterFrequency","osc1keyIndex","osc2keyIndex","osc1frequency","osc2frequency","setValueAtTime","adsrValues","keyPressDuration","filterAdsrValues","updateState","newState","synthState","updateConnections","updateParams","currentTime","_panNode2","_voiceNode$oscillator2","_voiceNode$oscillator3","osc1AmountNode","_voiceNode$oscillator4","osc2AmountNode","_state3","_state3$oscillators","_state3$oscillators$o","osc1WaveType","osc1Amount","_state3$oscillators$o2","osc2WaveType","osc2Amount","_state3$filter","filterResonance","filterType","_state3$lfos","_state3$lfos$lfo","_state3$lfos$lfo2","numberOfVoices","_state3$sends","Q","_panNode","createOscillator","createBiquadFilter","_ref$oscillators","_ref$oscillators$osc","_ref$oscillators$osc2","_ref$gains","updateInstrumentAudio","instrumentNodes","idCache","master","createMaster","clearCacheById","console","connectionsCache","getMachineFromConnection","connectionNode","node","json","database","stateToSave","isNewTrack","store","prevState","getState","nextState","trackRoute","_trackRoute$params","_trackRoute$params$tr","prevTrackId","newTrack","getDateToISOString","Date","toISOString","applyMiddleware","cb","onAuthStateChanged","createIntervalStream","bufferActions","startStream","currentState","currentLookAhead","segmentsToBufferAsArray","lastBuffer","lastSegment","segmentsToSchedule","playPause","currentSegment","startNoisePlayed","bit","playStartNoise","onSaveTrack","checkNewTrack","loadNewTrack","shouldLoadDefault","once","snapshot","loadTrack","trackUserId","userCanWrite","uid","getStateToSave","_nextState$track","getNewTrackKey","shouldLoadNewTrack","connection","fromMachine","fromNodePath","fromNode","toMachine","toNodePath","toNode","isNewUserTracksRoute","userTracksRoute","checkLoadUserTracks","userTracksLoading","orderByChild","shot","loadUserTracks","userTracksLoaded","userTracksLoadError","bufferNode","onended","onPlayPreview","isSamplesRoute","userRoute","onLoadUserSamples","shouldLoadUserSamples","newUserTrack","samplesRoute","checkLoadUserSamples","loadUserSamples","onUploadSample","_store$getState","uploadState","storage","filename","put","downloadURL","uploadUserSample","onDeleteSample","_store$getState2","sampleUrl","refFromURL","delete","deleteUserSample","middleware","createStore","createStoreWithMiddleware","ReactDOM","render","es","esm","Switch","Route","component","Login","getElementById"],"mappings":"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B,SAAU7E,KAAKkd,8BAEvCgC,EAAOra,iBAAiB,aAAc7E,KAAK8E,SAC3Coa,EAAOra,iBAAiB,YAAa7E,KAAK+E,QAC1Cma,EAAOra,iBAAiB,WAAY7E,KAAKgF,OAEzCka,EAAOra,iBAAiB,YAAa7E,KAAK8E,SAC1CO,OAAOR,iBAAiB,YAAa7E,KAAK+E,QAC1CM,OAAOR,iBAAiB,UAAW7E,KAAKgF,sDAGnB,IACVka,EAAWlf,KAAKyE,KAAvB0a,MACJ9Z,OAAO6W,oBAAoB,SAAUlc,KAAKkd,8BAC1CgC,EAAOhD,oBAAoB,aAAclc,KAAK8E,SAC9Coa,EAAOhD,oBAAoB,YAAalc,KAAK+E,QAC7Cma,EAAOhD,oBAAoB,WAAYlc,KAAKgF,OAE5Cka,EAAOhD,oBAAoB,YAAalc,KAAK8E,SAC7CO,OAAO6W,oBAAoB,YAAalc,KAAK+E,QAC7CM,OAAO6W,oBAAoB,UAAWlc,KAAKgF,cAzK3B5D,IAAMC,WCPb+d,GAAgB,CAC3B,IACA,KACA,IACA,KACA,IACA,IACA,KACA,IACA,KACA,IACA,KACA,KAGWC,GAAsB,CACjC,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OACA,GACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,IACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,IACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,IACA,QACA,QACA,QACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,IACA,QACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,KACA,QACA,QACA,SA4HWC,GAED,KAFCA,GAGL,MChOFC,6LACc,IAAAnf,EACsBJ,KAAKH,MAArC0D,EADUnD,EACVmD,cAAeyN,EADL5Q,EACK4Q,SACjBwO,GAFYpf,EACe6J,GACX,GACpB,GAAI+G,EAAS/K,OAAb,CACA,IA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","file":"static/js/main.0065f4a4.chunk.js","sourcesContent":["import React from \"react\";\n\nclass ToggleButton extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tvar { name = \"\", onClick, selected = false, classes = \"\" } = this.props;\n\t\tvar selectToggleClass = selected ? \"selected\" : \"\";\n\t\tvar selectAriaPressed = selected ? \"true\" : \"false\";\n\t\tvar toggleButton = <button ref=\"toggleButton\" className={\"button toggle-button \" + classes + \" \" + selectToggleClass} aria-pressed={selectAriaPressed} onClick={onClick}>{name}</button>;\n\t\treturn (toggleButton);\n\t}\n}\n\nexport { ToggleButton };","export function normaliseValue(value, min, max){\n\tif(value < min) return min;\n\tif(value > max) return max;\n\treturn value;\n}\n\nexport function normalisedStretchValue(value, min, max, stretchiness = 4) {\n\tif(value < min) {\n\t\tlet diff = min - value;\n\t\tlet stretch = min - (diff / stretchiness);\n\t\treturn stretch;\n\t}\n\tif(value > max) {\n\t\tlet diff = max - value;\n\t\tlet stretch = max - (diff / stretchiness);\n\t\treturn stretch;\n\t}\n\treturn value;\n}\n\nexport function isBeyondNormalisedValue(value, min, max) {\n\tif(value < min) return true;\n\tif(value > max) return true;\n\treturn false;\n}\n\nexport function valueAsPercentageOfRange(value, min, max){\n\tvar range = max - min;\n\tvar valueMinueMin = value - min;\n\treturn (valueMinueMin / range) * 100;\n}\n\nexport function percentageToValueOfRange(value, min, max){\n\tvar range = max - min;\n\treturn ((range * value) + (min * 100)) / 100;\n}\n\nexport function valueAsPercentageOfX(value, x){\n\treturn (value / x) * 100;\n}\n\nexport function unique(){\n\tlet uniqueIndex = 0;\n\treturn () => uniqueIndex++;\n} ","export function lengthOfLine(pointa, pointb){\n    return Math.sqrt((Math.pow(pointa.x - pointb.x, 2) + Math.pow(pointa.y - pointb.y, 2)));\n}","export function angleInRightTriangle(adjacent, hypotenuse) {\n\treturn Math.acos(adjacent / hypotenuse);\n}\n\nexport function angleInRightTriangleInDegrees(adjacent, hypotenuse) {\n\tlet radians = angleInRightTriangle(adjacent, hypotenuse);\n\treturn radiansToDegrees(radians);\n}\n\nexport function radiansToDegrees(radians){\n\treturn radians * (180/Math.PI);\n}\n\nexport function angleFromHorizontalGivenXandY(angle, { x, y }){\n\tif(x < 0 && y > 0){\n\t\treturn angle;\n\t} else if (x > 0 && y > 0) {\n\t\treturn 180 - angle;\n\t} else if (x > 0 && y < 0) {\n\t\treturn 180 + angle;\n\t} else if(x < 0 && y < 0) {\n\t\treturn 360 - angle;\n\t}\n}\n\nexport function angleFromVerticalGivenXandY(angle, { x, y }){\n\tif(x < 0 && y >= 0){\n\t\treturn 90 + angle;\n\t} else if (x >= 0 && y > 0) {\n\t\treturn 270 - angle;\n\t} else if (x > 0 && y <= 0) {\n\t\treturn 270 + angle;\n\t} else if(x < 0 && y < 0) {\n\t\treturn 90 - angle;\n\t}\n\treturn 0;\n}","import React from \"react\";\nimport { valueAsPercentageOfRange, normaliseValue, percentageToValueOfRange } from \"../../library/natives/numbers\";\nimport { lengthOfLine } from \"../../library/geometry/line\";\nimport { angleInRightTriangleInDegrees, angleFromVerticalGivenXandY } from \"../../library/geometry/triangle\";\n\nconst MIN_ROTATION = -180 + 25;\nconst MAX_ROTATION = 180 - 25;\nconst DEFAULT_MIN_VALUE = 0;\nconst DEFAULT_MAX_VALUE = 100;\n\nclass Rotator extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n    this.state = {\n      touching: false,\n\t\t\tcurrentTouch: [0, 0],\n      previousRotation: [0, 0]\n    }\n\t}\n\t\n\trender() {\n\t\tlet { value, min = DEFAULT_MIN_VALUE, max = DEFAULT_MAX_VALUE, name, onValueChange, classes } = this.props;\n\t\tlet rotation;\n    if(this.state.touching){\n\t\t\tlet { currentTouch, newValue } = this.state;\n      rotation = this.getRotationFromValue(newValue);\n    } else {\n      rotation = this.getRotationFromValue(value);\n    }\n\t\tlet knobStyle = {\n\t\t\ttransform: \"rotate(\" + rotation + \"deg)\"\n\t\t};\n\t\treturn (\n\t\t\t<div ref=\"knobContainer\" className={(classes || \"channel-item\") + \" rotator\"}>\n\t\t\t\t<h3 ref=\"name\" className=\"item-label\">{name}</h3>\n\t\t\t\t<input type=\"range\" ref=\"value\" min={min} max={max} step=\"1\" className=\"item-value assistive\" onChange={(e) => onValueChange(+(e.target.value))} />\n\t\t\t\t<div className=\"knob-container\" aria-hidden=\"true\">\n\t\t\t\t\t<div className=\"value-indicator\"></div>\n\t\t\t\t\t<div className=\"value-indicator\"></div>\n\t\t\t\t\t<div className=\"value-indicator\"></div>\n\t\t\t\t\t<div className=\"value-indicator\"></div>\n\t\t\t\t\t<div className=\"value-indicator\"></div>\n\t\t\t\t\t<div className=\"value-indicator\"></div>\n\t\t\t\t\t<div ref=\"knob\" className=\"knob\" style={knobStyle}></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetRotationFromValue(value) {\n\t\tlet { min = DEFAULT_MIN_VALUE, max = DEFAULT_MAX_VALUE, name, onValueChange, classes } = this.props;\n\t\tlet valuePercentage = normaliseValue(valueAsPercentageOfRange(value, min, max), 0, 100);\n\t\tlet rotation = percentageToValueOfRange(valuePercentage, MIN_ROTATION, MAX_ROTATION);\n\t\treturn rotation;\n\t}\n\n\tcomponentDidMount() {\n\t\tlet { knob: $knob } = this.refs;\n\t\tlet $knobContainer = document;\n\n\t\t$knob.addEventListener(\"touchstart\", e => this.onStart(e));\n\t\t$knob.addEventListener(\"touchmove\", e => this.onMove(e));\n\t\t$knob.addEventListener(\"touchend\", e => this.onEnd(e));\n\n\t\t$knob.addEventListener(\"mousedown\", e => this.onStart(e));\n\t\t$knobContainer.addEventListener(\"mousemove\", e => this.onMove(e));\n\t\t$knobContainer.addEventListener(\"mouseup\", e => this.onEnd(e));\n\t}\n\n\tgetLengthAndAngleFromCentre(movePoint){\n\t\tlet { knob: $knob } = this.refs;\n\t\tlet { currentTouch } = this.state;\n\t\tlet knobCoordinates = $knob.getBoundingClientRect();\n\t\tlet scrollY = window.pageYOffset;\n\t\tlet originx = knobCoordinates.left + (knobCoordinates.width / 2);\n\t\tlet originy = knobCoordinates.top + (knobCoordinates.height / 2) + scrollY;\n\t\tlet ax = movePoint[0] - originx;\n\t\tlet ay = originy - movePoint[1];\n\t\tlet bx = movePoint[0] - originx;\n\t\tlet by = 0;\n\t\tlet aLength = lengthOfLine({x: ax, y: ay}, { x: 0, y: 0 });\n\t\tlet bLength = lengthOfLine({x: bx, y: by}, { x: 0, y: 0 });\n\t\tlet angle = angleInRightTriangleInDegrees(bLength, aLength);\n\t\tlet realAngle = angleFromVerticalGivenXandY(angle, {x: ax, y: ay});\n\t\treturn { length: aLength, angle: realAngle };\n\t}\n\n\tgetValueFromLengthAndAngle({ length, angle }){\n\t\tlet angleLess180 = angle - 180;\n\t\tlet { min = DEFAULT_MIN_VALUE, max = DEFAULT_MAX_VALUE, value } = this.props;\n\t\tlet percentage = valueAsPercentageOfRange(normaliseValue(angleLess180, MIN_ROTATION, MAX_ROTATION), MIN_ROTATION, MAX_ROTATION);\n\t\tlet newValue = percentageToValueOfRange(percentage, min, max);\n\t\treturn newValue;\n\t}\n\n\tgetValueFromTouch(touch){\n\t\tlet lengthAndAngle = this.getLengthAndAngleFromCentre(touch);\n\t\treturn this.getValueFromLengthAndAngle(lengthAndAngle);\n\t}\n\n\tonStart(e) {\n\t\te.preventDefault();\n\t\tlet touchX = e.pageX !== undefined ? e.pageX : e.touches[0].pageX;\n\t\tlet touchY = e.pageY !== undefined ? e.pageY : e.touches[0].pageY;\n\t\tlet touch = [touchX, touchY];\n\t\tlet newValue = this.getValueFromTouch(touch);\n\t\tthis.setState({\n\t\t\ttouching: true,\n\t\t\tcurrentTouch: [touchX, touchY],\n\t\t\tnewValue\n\t\t});\n\t}\n\n\tonMove(e) {\n\t\tif(!e.target || !this.state.touching) {\n\t\t\treturn;\n\t\t}\n\t\te.preventDefault();\n\t\tlet { onValueChange, value } = this.props;\n\t\tlet touchX = e.pageX !== undefined ? e.pageX : e.touches[0].pageX;\n\t\tlet touchY = e.pageY !== undefined ? e.pageY : e.touches[0].pageY;\n\t\tlet touch = [touchX, touchY];\n\t\tlet newValue = this.getValueFromTouch(touch);\n\n\t\tif(this.rafId) window.cancelAnimationFrame(this.rafId);\n\n\t\tthis.rafId = window.requestAnimationFrame(() => {\n\t\t\tif(!this.state.touching) return;\n\t\t\tif(value !== newValue) {\n\t\t\t\tonValueChange(newValue);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\ttouching: true,\n\t\t\t\tcurrentTouch: [touchX, touchY],\n\t\t\t\tnewValue\n\t\t\t});\n\t\t})\n\t}\n\n\tonEnd(e) {\n\t\tif(!e.target || !this.state.touching) {\n\t\t\treturn;\n\t\t}\n\t\te.preventDefault();\n\n\t\tthis.setState({\n\t\t\ttouching: false\n\t\t});\n\t}\n}\n\nexport { Rotator };","export const PLAY = \"play\";\nexport const PAUSE = \"pause\";\nexport const TOGGLE_PLAY_PAUSE = \"toggle_play_pause\";\nexport const NEW_SEGMENT_INDEX = \"new_segment_index\";\nexport const INCREMENT_SEGMENT_INDEX = \"increment_segment_index\";\nexport const NEW_BUFFER_SEGMENT = \"new_buffer_segment\";\nexport const NEW_BAR_INDEX = \"new_bar_index\";","import { PLAY, PAUSE, TOGGLE_PLAY_PAUSE, NEW_SEGMENT_INDEX, INCREMENT_SEGMENT_INDEX, NEW_BAR_INDEX } from \"../constants/play.state.constants\";\n\nexport function play() {\n  return {\n    type: PLAY\n  };\n}\n\nexport function pause() {\n  return {\n    type: PAUSE\n  };\n}\n\nexport function togglePlayPause() {\n  return {\n    type: TOGGLE_PLAY_PAUSE\n  };\n}\n\nexport function newSegmentIndex(value){\n  return {\n    type: NEW_SEGMENT_INDEX,\n    value\n  };\n}\n\nexport function incrementSegmentIndex(value){\n  return {\n    type: INCREMENT_SEGMENT_INDEX,\n    value\n  };\n}\n\nexport function newBarIndex(value){\n  return {\n    type: NEW_BAR_INDEX,\n    value\n  };\n}","export const INCREMENT_BPM = \"increment_bpm\";\nexport const DECREMENT_BPM = \"decrement_bpm\";\nexport const CHANGE_BPM_BY_AMOUNT = \"change_bpm_by_amount\";\nexport const CHANGE_BPM = \"change_bpm\";\nexport const MIN_BEATS_PER_MINUTE = 50;\nexport const MAX_BEATS_PER_MINUTE = 190;","import { INCREMENT_BPM, DECREMENT_BPM, CHANGE_BPM_BY_AMOUNT, CHANGE_BPM } from \"../constants/tempo.constants\";\n\n//tempo\nexport function incrementBPM() {\n  return {\n    type: INCREMENT_BPM\n  };\n}\n\nexport function decrementBPM() {\n  return {\n    type: DECREMENT_BPM\n  };\n}\n\nexport function changeBPMByAmount(amount) {\n  return {\n    type: CHANGE_BPM_BY_AMOUNT,\n    amount: amount\n  };\n}\n\nexport function changeBPMToAmount(value) {\n  return {\n    type: CHANGE_BPM,\n    value: value\n  };\n}\n","export const CHANGE_REVERB_SECONDS_TO_AMOUNT = \"CHANGE_REVERB_SECONDS_TO_AMOUNT\";\nexport const CHANGE_REVERB_DECAY_TO_AMOUNT = \"CHANGE_REVERB_DECAY_TO_AMOUNT\";","import {\n\tCHANGE_REVERB_SECONDS_TO_AMOUNT,\n\tCHANGE_REVERB_DECAY_TO_AMOUNT\n} from \"../constants/reverb.constants\";\n\nexport function changeReverbSecondsToAmount(machineId, value){\n\treturn {\n\t\ttype: CHANGE_REVERB_SECONDS_TO_AMOUNT,\n\t\tmachineId,\n\t\tvalue\n\t};\n}\n\nexport function changeReverbDecayToAmount(machineId, value){\n\treturn {\n\t\ttype: CHANGE_REVERB_DECAY_TO_AMOUNT,\n\t\tmachineId,\n\t\tvalue\n\t};\n}","export const NEW_BUFFER_SEGMENT = \"new_buffer_segment\";\nexport const CLEAR_BUFFER_SEGMENTS = \"clear_buffer_segments\";\nexport const CLEAR_BUFFER_SEGMENT = \"clear_buffer_segment\";","import { NEW_BUFFER_SEGMENT, CLEAR_BUFFER_SEGMENTS, CLEAR_BUFFER_SEGMENT } from \"../constants/buffer.constants\";\n\nexport function newBufferSegment(index, time, duration) {\n\treturn {\n\t\ttype: NEW_BUFFER_SEGMENT,\n\t\tindex,\n\t\ttime,\n\t\tduration\n\t};\n}\n\nexport function clearBufferSegments() {\n\treturn {\n\t\ttype: CLEAR_BUFFER_SEGMENTS\n\t};\n}\n\nexport function clearBufferSegment(id) {\n\treturn {\n\t\ttype: CLEAR_BUFFER_SEGMENT,\n\t\tid\n\t};\n}","export const NEW_NOTIFICATION = \"new_notification\";\nexport const CLEAR_NOTIFICATION = \"clear_notification\";","import { NEW_NOTIFICATION, CLEAR_NOTIFICATION } from \"../constants/notifications.constants\";\n\nexport function newNotification(text, type) {\n\treturn {\n\t\ttype: NEW_NOTIFICATION,\n    value: text,\n    notificationType: type\n\t};\n}\n\nexport function clearNotification(id) {\n\treturn {\n\t\ttype: CLEAR_NOTIFICATION,\n    value: id\n\t};\n}\n","export const AUTH_STATE_CHANGE = \"auth_state_change\";","import { AUTH_STATE_CHANGE } from \"../constants/auth.constants\";\n\nexport function authStateChange(user) {\n\treturn {\n\t\ttype: AUTH_STATE_CHANGE,\n\t\tvalue: user\n\t};\n}","export const CHANGE_VOLUME_TO_AMOUNT = \"change_volume_to_amount\";\nexport const CHANGE_PITCH_TO_AMOUNT = \"change_pitch_to_amount\";\nexport const CHANGE_DECAY_TO_AMOUNT = \"change_decay_to_amount\";\nexport const CHANGE_PAN_TO_AMOUNT = \"change_pan_to_amount\";\nexport const CHANGE_SELECTED_CHANNEL = \"change_selected_channel\";\nexport const TOGGLE_SOLO_CHANNEL = \"change_solo_channel\";\nexport const TOGGLE_MUTE_CHANNEL = \"toggle_mute_channel\";\nexport const TOGGLE_REVERB = \"TOGGLE_REVERB\";\nexport const TOGGLE_BEAT_STATE = \"TOGGLE_BEAT_STATE\";\nexport const NEW_BANK_INDEX = \"NEW_BANK_INDEX\";\nexport const CHANGE_SWING_TO_AMOUNT = \"CHANGE_SWING_TO_AMOUNT\";\nexport const CHANGE_SELECTED_SOUND = \"CHANGE_SELECTED_SOUND\";","import {\n\tCHANGE_SELECTED_CHANNEL,\n\tTOGGLE_SOLO_CHANNEL,\n\tTOGGLE_MUTE_CHANNEL,\n\tCHANGE_VOLUME_TO_AMOUNT,\n\tCHANGE_PITCH_TO_AMOUNT,\n\tCHANGE_DECAY_TO_AMOUNT,\n\tCHANGE_PAN_TO_AMOUNT,\n\tTOGGLE_REVERB,\n\tTOGGLE_BEAT_STATE,\n\tNEW_BANK_INDEX,\n\tCHANGE_SWING_TO_AMOUNT,\n\tCHANGE_SELECTED_SOUND\n} from \"../constants/drum.machine.constants\";\n\nexport function changeVolumeToAmount(machineId, channelId, value){\n\treturn {\n\t\ttype: CHANGE_VOLUME_TO_AMOUNT,\n\t\tchannelId,\n\t\tmachineId,\n\t\tvalue\n\t};\n}\n\nexport function changePitchToAmount(machineId, channelId, value){\n\treturn {\n\t\ttype: CHANGE_PITCH_TO_AMOUNT,\n\t\tchannelId,\n\t\tmachineId,\n\t\tvalue\n\t};\n}\n\nexport function changeDecayToAmount(machineId, channelId, value){\n\treturn {\n\t\ttype: CHANGE_DECAY_TO_AMOUNT,\n\t\tchannelId,\n\t\tmachineId,\n\t\tvalue\n\t};\n}\n\nexport function changePanToAmount(machineId, channelId, value){\n\treturn {\n\t\ttype: CHANGE_PAN_TO_AMOUNT,\n\t\tchannelId,\n\t\tmachineId,\n\t\tvalue\n\t};\n}\n\nexport function toggleReverb(machineId, channelId, value){\n\treturn {\n\t\ttype: TOGGLE_REVERB,\n\t\tchannelId,\n\t\tmachineId,\n\t\tvalue\n\t};\n}\n\nexport function changeSelectedChannel(machineId, newChannelId) {\n\treturn {\n\t\ttype: CHANGE_SELECTED_CHANNEL,\n\t\tmachineId,\n\t\tvalue: newChannelId\n\t};\n}\n\nexport function changeSelectedSound(machineId, channelId, newSoundId) {\n\treturn {\n\t\ttype: CHANGE_SELECTED_SOUND,\n\t\tmachineId,\n\t\tchannelId,\n\t\tvalue: newSoundId\n\t};\n}\n\nexport function toggleSoloChannel(machineId, channelId) {\n\treturn {\n\t\ttype: TOGGLE_SOLO_CHANNEL,\n\t\tmachineId,\n\t\tvalue: channelId\n\t};\n}\n\nexport function toggleMuteChannel(machineId, channelId) {\n\treturn {\n\t\ttype: TOGGLE_MUTE_CHANNEL,\n\t\tmachineId,\n\t\tvalue: channelId\n\t};\n}\n\nexport function toggleBeat(machineId, channelId, bankId, index, value) {\n  return {\n\t\ttype: TOGGLE_BEAT_STATE,\t\t\n\t\tmachineId,\n\t\tchannelId,\n\t\tbankId,\n\t\tindex,\n    value\n  };\n}\n\nexport function newBankIndex(machineId, bankId) {\n\treturn {\n\t\ttype: NEW_BANK_INDEX,\t\t\n\t\tmachineId,\n    value: bankId\n  };\n}\n\nexport function changeSwingToAmount(machineId, value) {\n  return {\n\t\ttype: CHANGE_SWING_TO_AMOUNT,\n\t\tmachineId,\n    value\n  };\n}","export const TRACK_STATE_CHANGE = \"TRACK_STATE_CHANGE\";\nexport const NEW_TRACK_LOADING = \"NEW_TRACK_LOADING\";\nexport const NEW_TRACK_LOADED = \"NEW_TRACK_LOADED\";\nexport const LOAD_DEFAULT_TRACK = \"LOAD_DEFAULT_TRACK\";\nexport const TRACK_SAVE = \"TRACK_SAVE\";\nexport const NEW_TRACK_SAVE = \"NEW_TRACK_SAVE\";","import { NEW_TRACK_LOADING, LOAD_DEFAULT_TRACK, TRACK_SAVE, NEW_TRACK_SAVE, NEW_TRACK_LOADED } from \"../constants/track.constants\";\n\nexport function newTrackLoading(userId, trackId) {\n  return {\n    type: NEW_TRACK_LOADING,\n    userId,\n    trackId\n  };\n};\n\nexport function loadDefaultTrack() {\n  return {\n    type: LOAD_DEFAULT_TRACK\n  };\n};\n\nexport function saveTrack() {\n  return {\n    type: TRACK_SAVE\n  };\n};\n\nexport function newTrackSave(userId, trackId) {\n  return {\n    type: NEW_TRACK_SAVE,\n    userId,\n    trackId\n  };\n};\n\nexport function newTrackLoaded(state, write = true) {\n  return {\n    type: NEW_TRACK_LOADED,\n    write,\n    ...state\n  };\n};","export const CHANGE_TRACK_TITLE = \"CHANGE_TRACK_TITLE\";\nexport const CHANGE_TRACK_CREATED_DATE = \"CHANGE_TRACK_CREATED_DATE\";\nexport const CHANGE_TRACK_UPDATED_DATE = \"CHANGE_TRACK_UPDATED_DATE\";","import { CHANGE_TRACK_TITLE, CHANGE_TRACK_CREATED_DATE, CHANGE_TRACK_UPDATED_DATE } from \"../constants/meta.constants\";\n\nexport function changeTrackTitle(title) {\n\treturn {\n\t\ttype: CHANGE_TRACK_TITLE,\n\t\ttitle\n\t};\n};\n\nexport function changeTrackCreatedDate(createdDate) {\n\treturn {\n\t\ttype: CHANGE_TRACK_CREATED_DATE,\n\t\tcreatedDate\n\t};\n};\n\nexport function changeTrackUpdatedDate(updatedDate) {\n\treturn {\n\t\ttype: CHANGE_TRACK_UPDATED_DATE,\n\t\tupdatedDate\n\t};\n};","export const SAMPLES_LOADING = \"SAMPLES_LOADING\";\nexport const SAMPLES_LOADED = \"SAMPLES_LOADED\";\nexport const SAMPLES_LOAD_ERROR = \"SAMPLES_LOAD_ERROR\";\nexport const UPLOAD_SAMPLE = \"UPLOAD_SAMPLE\";\nexport const SAMPLE_UPLOADED = \"SAMPLE_UPLOADED\";\nexport const SAMPLE_UPLOAD_ERROR = \"SAMPLE_UPLOAD_ERROR\";\nexport const SAMPLE_UPLOAD_RESET = \"SAMPLE_UPLOAD_RESET\";\nexport const SAMPLE_UPLOADING = \"SAMPLE_UPLOADING\";\nexport const DELETE_SAMPLE = \"DELETE_SAMPLE\";\nexport const SAMPLE_DELETED = \"SAMPLE_DELETED\";\nexport const SAMPLE_DELETE_ERROR = \"SAMPLE_DELETE_ERROR\";","import { UPLOAD_SAMPLE, SAMPLE_UPLOADED, SAMPLES_LOADED, SAMPLE_UPLOAD_ERROR, SAMPLE_UPLOAD_RESET, SAMPLE_UPLOADING, DELETE_SAMPLE, SAMPLE_DELETED, SAMPLE_DELETE_ERROR } from \"../constants/samples.constants\";\n\nexport function uploadSample(name, shortName, file){\n\treturn {\n\t\ttype: UPLOAD_SAMPLE,\n\t\tname,\n    shortName,\n    file\n\t};\n};\n\nexport function newSampleUploaded({\n  name,\n  shortName,\n  path,\n  createdDate,\n  sampleId,\n  userId\n}){\n\treturn {\n\t\ttype: SAMPLE_UPLOADED,\n\t\tname,\n    shortName,\n    path,\n    createdDate,\n    sampleId,\n    userId\n\t};\n};\n\nexport function samplesLoaded(userId, samples){\n  return {\n    type: SAMPLES_LOADED,\n    userId,\n    samples\n  };\n};\n\nexport function sampleUploading(){\n  return {\n    type: SAMPLE_UPLOADING\n  };\n};\n\nexport function samplesUploadError(){\n  return {\n    type: SAMPLE_UPLOAD_ERROR\n  };\n};\n\nexport function samplesUploadReset(){\n  return {\n    type: SAMPLE_UPLOAD_RESET\n  };\n};\n\nexport function deleteSample(userId, id){\n  return {\n    type: DELETE_SAMPLE,\n    userId,\n    id\n  };\n};\n\nexport function sampleDeleted(userId, id){\n  return {\n    type: SAMPLE_DELETED,\n    userId,\n    id\n  };\n};\n\nexport function sampleDeleteError(userId, id){\n  return {\n    type: SAMPLE_DELETE_ERROR,\n    userId,\n    id\n  };\n};","export const PLAY_PREVIEW = \"PLAY_PREVIEW\";\nexport const PAUSE_PREVIEW = \"PAUSE_PREVIEW\";\nexport const LOADING_PREVIEW = \"LOADING_PREVIEW\";","import { PLAY_PREVIEW, PAUSE_PREVIEW, LOADING_PREVIEW } from \"../constants/preview.constants\";\n\nexport let playPreview = (userId, id) => {\n  return {\n    type: PLAY_PREVIEW,\n    userId,\n    id\n  };\n};\n\nexport let pausePreview = () => {\n  return {\n    type: PAUSE_PREVIEW\n  };\n};\n\nexport let loadingPreview = id => {\n  return {\n    type: LOADING_PREVIEW,\n    id\n  };\n};","export const CHANGE_SYNTH_PARAM = \"CHANGE_SYNTH_PARAM\";","import {\n\tCHANGE_SYNTH_PARAM\n} from \"../constants/synth.constants\";\n\nexport function changeSynthParam(machineId, param, paramItem, value){\n\treturn {\n    type: CHANGE_SYNTH_PARAM,\n    machineId,\n\t\tparam,\n\t\tparamItem,\n\t\tvalue\n\t};\n}\n","import * as playState from \"./play.state.actions\";\nimport * as tempo from \"./tempo.actions\";\nimport * as reverb from \"./reverb.actions\";\nimport * as buffer from \"./buffer.actions\";\nimport * as notifications from \"./notifications.actions\";\nimport * as auth from \"./auth.actions\";\nimport * as drumMachine from \"./drum.machine.actions\";\nimport * as track from \"./track.actions\";\nimport * as tracks from \"./track.actions\";\nimport * as meta from \"./meta.actions\";\nimport * as samples from \"./samples.actions\";\nimport * as preview from \"./preview.actions\";\nimport * as synth from \"./synth.actions\";\n\nexport default {\n  playState,\n  tempo,\n  reverb,\n  buffer,\n  notifications,\n  auth,\n  drumMachine,\n  track,\n  tracks,\n  meta,\n  samples,\n  preview,\n  synth\n}","import React, { Component } from \"react\";\n\nlet Maybe = props => props.condition ? props.children : null;\n\nexport { Maybe };","import React, { Component } from \"react\";\nimport { Maybe } from \"../maybe/maybe.react.jsx\";\n\nclass Modal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false\n    }\n  }\n  \n  onOpen() {\n    this.setState({\n      open: true\n    });\n  }\n  \n  onClose() {\n    this.setState({\n      open: false\n    });\n  }\n\n  render() {\n    let { props, state } = this;\n    return (\n      <div className={\"modal-container\" + ( state.open ? \" open\" : \"\" )}>\n        <Maybe condition={!props.trigger}>\n          <button className=\"modal-button open-button\" onClick={() => this.onOpen()}>\n            Open Modal\n          </button>\n        </Maybe>\n        <Maybe condition={props.trigger}>\n          {props.trigger({\n            onOpen: () => this.onOpen()\n          })}\n        </Maybe>\n        <div className=\"model-overlay\"></div>\n        {\n          state.open ? (\n            <div className=\"modal\">\n              <div className=\"modal-title\">\n                <h3>{props.title}</h3>\n                <button className=\"modal-button close-button\" onClick={() => this.onClose()}>\n                  <span className=\"assistive\">Close Modal</span>\n                  <span className=\"icon__close\"></span>\n                </button>\n              </div>\n              <div className=\"modal-body\">\n                { props.children({\n                  onClose: () => this.onClose()\n                }) }\n              </div>\n            </div>\n          ) : null\n        }\n      </div>\n    );\n  }\n};\n\nexport { Modal };","export function zip(arrays) {\n\treturn arrays[0].map((_,i) => arrays.map(array => array[i]));\n}\n\nexport function numberToArrayLength(length, offset = 0) {\n\tlet array = [];\n\tfor(let i = 0; i < length; i++) {\n\t\tarray[i] = i + offset;\n\t}\n\treturn array;\n}\n\nexport function numberToArrayLengthWithValue(length, value) {\n\tlet array = [];\n\tfor(let i = 0; i < length; i++) {\n\t\tarray[i] = value;\n\t}\n\treturn array;\n}\n\nexport function rangeToArray(min, max, step) {\n\tlet array = [];\n\tlet i = min;\n\twhile(i <= max){\n\t\tarray.push(i);\n\t\ti += step;\n\t}\n\treturn array;\n}\n\nexport function first([head, ...tail]) {\n\treturn head;\n}\n\nexport function last(array) {\n\tlet last = array[array.length-1];\n\treturn last;\n}\n\nexport function objectToArray(object) {\n\tlet keys = Object.keys(object);\n\treturn keys.map(key => object[key]);\n}\n\nexport function objectToArrayWithKeyValue(object) {\n\tlet keys = Object.keys(object);\n\treturn keys.map(key => ({\n\t\tkey: key,\n\t\tvalue: object[key]\n\t}));\n}\n\nexport function keyValueArrayToObject(objectList) {\n\tlet object = {};\n\tobjectList.forEach(({\n\t\tkey,\n\t\tvalue\n\t}) => {\n\t\tobject[key] = value;\n\t});\n\treturn object;\n}\n\nexport function updateValue(array, index, value) {\n\treturn array.map((item, i) => {\n\t\treturn i === index ? value : item;\n\t});\n}","import { objectToArrayWithKeyValue, keyValueArrayToObject } from \"./array\";\n\nexport let getValueFromPath = (object, path) => {\n  return path.split(\"/\")\n    .reduce((obj, key) => obj && obj[key], object);\n};\n\nexport let filter = (object, condition) => {\n  let objectList = objectToArrayWithKeyValue(object);\n  let filteredList = objectList.filter(condition);\n  return keyValueArrayToObject(filteredList);\n};","import React, { Component } from \"react\";\n\nclass Tabs extends Component {\n  \n  constructor(props){\n    super(props);\n  }\n\n  render() {\n    let { props, state } = this;\n    return <div className=\"tabs\">\n      {\n        props.tabs.map(({ name, id }) => {\n          let selected = props.selected === id;\n          return <h4 class={selected ? \"selected\" : \"\"}><a onClick={() => this.changeTab(id)}>{name}</a></h4>\n        })\n      }\n    </div>\n  }\n\n  changeTab(id) {\n    this.props.onTabChange(id);\n  }\n}\n\nexport { Tabs };","import { matchPath } from \"react-router\";\n\nexport let matchesNewPath = (oldPath, newPath) => {\n  return oldPath !== newPath;\n};\n\nexport let exactMatchPath = (path, pattern) => {\n  let match = matchPath(path, pattern);\n  let pathsItems = path.split(\"/\").filter(item => !!item);\n  let patternItems = pattern.split(\"/\").filter(item => !!item);\n  if(!!match && pathsItems.length === patternItems.length) {\n    return match;\n  }\n};\n\nexport let matchesUserSamplesRoute = path => exactMatchPath(path, \"/users/:userId/samples/\");\n\nexport let matchesUserTrackRoute = path => exactMatchPath(path, \"/users/:userId/tracks/:trackId\");\n\nexport let matchesUserTracksRoute = path => exactMatchPath(path, \"/users/:userId/tracks/\");\n\nexport let matchesDefaultTrackRoute = path => exactMatchPath(path, \"/\");\n\nexport let matchesNewTrack = (oldId, newId) => newId !== oldId;\n\nexport let matchesTrackRoute = path => matchesUserTrackRoute(path) || matchesDefaultTrackRoute(path);\n\nexport let buildTrackRoute = (userId, trackId) => `/users/${userId}/tracks/${trackId}`;\n\nexport let buildUserTracksRoute = userId => `/users/${userId}/tracks/`;\n\nexport let buildUserSamplesRoute = userId => `/users/${userId}/samples/`;","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport { Maybe } from \"../maybe/maybe.react.jsx\";\n\nconst SoundPreview = props => {\n  let {\n    id,\n    userId,\n    preview: {\n      soundId,\n      state\n    },\n    dispatch\n  } = props;\n  let previewActions = bindActionCreators(DrumMachineActions.preview, dispatch);\n  let currentSoundIsPlaying = soundId === id && state === \"playing\";\n  let currentSoundIsLoading = soundId === id && state === \"loading\";\n  return <button className=\"preview-sound\" onClick={() => {\n    if(currentSoundIsPlaying){\n      previewActions.pausePreview();\n    } else {\n      previewActions.playPreview(userId, id);\n    }\n  }}>\n    <Maybe condition={currentSoundIsPlaying}>\n      <span className=\"icon icon__pause\"></span>\n      <span className=\"preview-sound__label\">Pause</span>\n    </Maybe>\n    <Maybe condition={currentSoundIsLoading}>\n      <span className=\"icon icon__loading-dots\">\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n      </span>\n      <span className=\"preview-sound__label\">Loading</span>\n    </Maybe>\n    <Maybe condition={!currentSoundIsPlaying && !currentSoundIsLoading}>\n      <span className=\"icon icon__play\"></span>    \n      <span className=\"preview-sound__label\">Play</span>  \n    </Maybe>\n  </button>;\n};\n\nexport { SoundPreview };","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Modal } from \"../modal/modal.react.jsx\";\nimport { objectToArrayWithKeyValue } from \"../../library/natives/array\";\nimport { getValueFromPath } from \"../../library/natives/object\";\nimport { Tabs } from \"../tabs/tabs.react.jsx\";\nimport { buildUserSamplesRoute } from \"../../library/routing/routing\";\nimport { SoundPreview } from \"../sound-preview/sound.preview.react.jsx\";\n\nconst LibraryTab = props => {\n  let { onChange, selectedId, librarySounds } = props;\n  const librarySoundsList = objectToArrayWithKeyValue(librarySounds);\n  return <ul className=\"generic-list\">\n    {\n      librarySoundsList.map(({\n        key: id,\n        value: { name }\n      }) => {\n        let selected = \"\" + id === \"\" + selectedId;\n        return <li>\n          <label className=\"choice-item\">\n            <input type=\"radio\" name=\"sound-choice\" value={id} checked={selected} onChange={(event) => onChange(event.target.value)} />\n            <span>{name}</span>\n            <span className=\"assistive\">{selected ? \" - Selected\" : \"\"}</span>\n          </label>\n          <SoundPreview {...props} id={id} />\n        </li>;\n      }\n    )}\n  </ul>\n};\n\nconst SamplesTab = props => {\n  let { onChange, selectedId, track, auth, samples } = props;\n  let userId = getValueFromPath(auth, \"user/uid\");\n  let userSamples = getValueFromPath(samples, `samples/${userId}`) || {};\n  let samplesList = objectToArrayWithKeyValue(userSamples);\n  let loggedIn = !!userId;\n  return <ul className=\"generic-list\">\n    <li className=\"cta-item\">\n      {\n        loggedIn ?\n          (<Link to={buildUserSamplesRoute(userId)}>\n            Upload samples\n          </Link>)\n        : (<Link to={`/user/login/`}>\n          Login to upload samples\n        </Link>)\n      }\n    </li>\n    {\n      samplesList.map(({\n        key: id,\n        value: { name }\n      }) => {\n        let selected = \"\" + id === \"\" + selectedId;\n        return <li>\n          <label className=\"choice-item\">\n            <input type=\"radio\" name=\"sound-choice\" value={id} checked={selected} onChange={(event) => onChange(event.target.value)} />\n            <span>{name}</span>\n            <span className=\"assistive\">{selected ? \" - Selected\" : \"\"}</span>\n          </label>\n          <SoundPreview {...props} id={id} userId={userId} />\n        </li>;\n      })\n    }\n  </ul>\n};\n\nclass SoundSelector extends Component {\n  \n  constructor(props){\n    super(props);\n    this.state = {\n      selectedId: this.props.soundId,\n      selectedTab: \"library-sounds\"\n    };\n  }\n\n  soundHasChanged(){\n    return this.state.selectedId !== this.props.soundId;\n  }\n\n  onChange(value) {\n    this.setState({\n      selectedId: value\n    });\n  }\n  \n  onTabChange(id) {\n    this.setState({\n      selectedTab: id\n    });\n  }\n\n  getSelectedTab(){\n    switch(this.state.selectedTab){\n      case \"library-sounds\":\n        return LibraryTab;\n      case \"samples\":\n        return SamplesTab;\n    }\n  }\n\n  render(){\n    const { soundId, onSoundChange } = this.props;\n    const Tab = this.getSelectedTab();\n    return <Modal {...this.props} title=\"Change Sound\" icon=\"folder\" trigger={({ onOpen }) => \n      <button className=\"sound-change-button\" onClick={onOpen}>\n        <span className=\"assistive\">Change Sound</span>\n        <span className=\"icon__folder\"></span>\n      </button>\n    }>\n      { ({ onClose }) => \n        <div className=\"sound-selector\">\n          <Tabs onTabChange={id => this.onTabChange(id)} selected={this.state.selectedTab} tabs={[{\n            name: \"Library Sounds\",\n            id: \"library-sounds\"\n          }, {\n            name: \"Samples\",\n            id: \"samples\"\n          }]} />\n          <Tab {...this.props} selectedId={this.state.selectedId} onChange={id => this.onChange(id)} />\n          <div className=\"button-tray\">\n            <button className=\"button\" onClick={() => { onSoundChange(this.state.selectedId); onClose();}} disabled={!this.soundHasChanged()}>Update</button>\n          </div>\n      </div>\n      }\n    </Modal>;\n  }\n}\n\nexport { SoundSelector };","let context = null;\n\nexport function getAudioContext() {\n\tif(context) {\n\t\treturn context;\n\t} else {\n\t\tcontext = createAudioContext();\n\t\treturn context;\n\t}\n}\n\nexport function createAudioContext() {\n\tvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\treturn new AudioContext();\n}\n\nexport function decodeAudioData(context, buffer) {\n\treturn new Promise((resolve, reject) =>\n\t\tcontext.decodeAudioData(buffer, resolve, reject)\n\t);\n}\n\nexport function decodeAudioDataArray(context, arrayOfBuffers) {\n\treturn Promise.all(arrayOfBuffers.map((sound) =>\n\t\tdecodeAudioData(context, sound)\n\t));\n}\n\nexport function createBufferSource(context, buffer) {\n\tvar source = context.createBufferSource();\n\tsource.buffer = buffer;\n\treturn source;\n}","import { arrayBuffer } from \"../request/arraybuffer\";\nimport { decodeAudioData } from \"./context\";\n\nexport let requestAndDecodeSound = (context, path) =>\n  arrayBuffer(path).then(data => decodeAudioData(context, data));\n\nexport let requestAndDecodeSoundArray = (context, paths) => \n  Promise.all(paths.map(path => requestAndDecodeSound(context, path)));","let arrayBuffer = url => {\n\treturn fetch(url)\n\t\t.then(response =>\n\t\t\tresponse.arrayBuffer()\t\n\t\t);\n};\n\nexport { arrayBuffer };","import { requestAndDecodeSound } from \"./request\";\nimport { getAudioContext } from \"./context\";\nimport { getValueFromPath } from \"../natives/object\";\n\nexport let cache = {};\n\nexport let getSound = (soundId, state, userId) => {\n  let { librarySounds, track, samples } = state;\n  userId = userId || getValueFromPath(track, \"userId\");\n  let userSample = getValueFromPath(samples, `samples/${userId}/${soundId}`);\n  let librarySample = librarySounds[soundId];\n  let sound = userSample || librarySample;\n  return sound || {\n    name: '---',\n    shortName: '---'\n  };\n};\n\nexport let loadSound = (soundId, state, userId) => {\n  let sound = getSound(soundId, state, userId);\n  if(sound) {\n    return {\n      id: soundId,\n      path: sound.path,\n      soundPromise: requestSound(sound.path)\n    };\n  }\n};\n\nexport let loadSounds = (soundIds, state) => {\n  return soundIds\n    .map(soundId => loadSound(soundId, state));\n};\n\nexport let requestSound = path => {\n  let context = getAudioContext();\n  if(!cache[path]){\n    cache[path] = requestAndDecodeSound(context, path);\n  }\n  return cache[path];\n};","import React, { Component } from \"react\";\nimport { ToggleButton } from \"../toggle-button/toggle.button.react.jsx\";\nimport { Rotator } from \"../rotator/rotator.react.jsx\";\nimport { bindActionCreators } from \"redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport { SoundSelector } from \"../sound-selector/sound.selector.react.jsx\";\nimport { getSound } from \"../../library/audio-api/load.sounds\";\n\nclass Channels extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n    const { machine, machineId, playState, dispatch } = this.props;\n    const { channels } = machine;\n\t\tconst playStateActions = bindActionCreators(DrumMachineActions.playState, dispatch);\n    const actions = bindActionCreators(DrumMachineActions.drumMachine, dispatch);\n    return (\n      <div className=\"channels-container\">\n        <div className=\"channels\">\n          {channels.map((channel, i) => {\n            let sound = getSound(channel.sound, this.props);\n            let { name } = sound;\n            let { selected, solo, mute, sound: soundId } = channel;\n            let onSelectClick = () => actions.changeSelectedChannel(machineId, i);\n            let onSoloClick = () => actions.toggleSoloChannel(machineId, i);\n            let onMuteClick = () => actions.toggleMuteChannel(machineId, i);\n            return <div className={\"channel \" + (channel.selected ? \"selected\" : \"\")} ref=\"channel\">\n              <div className=\"channel-head\">\n                <div className=\"channel-item\">\n                  <div className=\"channel-title\">\n                    <h3 ref=\"name\">\n                      { name }\n                    </h3>\n                    <SoundSelector {...this.props} channel={channel} soundId={soundId} onSoundChange={(id) => actions.changeSelectedSound(machineId, i, id)} />\n                  </div>\n                </div>\n                <ToggleButton ref=\"toggleButton\" classes=\"channel-item select-button\" selected={selected} name=\"Select\" onClick={onSelectClick} />\n                <div className=\"channel-tray\">\n                  <ToggleButton ref=\"soloButton\" classes=\"channel-item green\" selected={solo} name=\"Solo\" onClick={onSoloClick} />\n                  <ToggleButton ref=\"muteButton\" classes=\"channel-item red\" selected={mute} name=\"Mute\" onClick={onMuteClick} />\n                </div>\n              </div>\n              <div className=\"channel-tray\">\n                <Rotator name=\"Volume\" value={channel.volume} onValueChange={ (value) => actions.changeVolumeToAmount(machineId, i, value) } />\n                <Rotator name=\"Pitch\" value={channel.pitch} onValueChange={ (value) => actions.changePitchToAmount(machineId, i, value) } />\n                <Rotator name=\"Decay\" value={channel.decay} onValueChange={ (value) => actions.changeDecayToAmount(machineId, i, value) } />\n                <Rotator name=\"Pan\" value={channel.pan} onValueChange={ (value) => actions.changePanToAmount(machineId, i, value) } />\n              </div>\n              <div className=\"channel-item\">\n                <h3 ref=\"name\" className=\"item-title light\">FX</h3>\n              </div>\n              <div className=\"channel-tray\">\n                <div className=\"toggle-button-item\">\n                  <h3 className=\"item-label\">Reverb</h3>\n                  <ToggleButton classes=\"channel-item red\" selected={channel.reverb} onClick={ (amount) => actions.toggleReverb(machineId, i, amount) } />\n                </div>\n              </div>\n            </div>\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport { Channels };","import React from \"react\";\nimport classnames from \"classnames\";\n\nclass PatternBeat extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tvar { index, current, selected, onToggle, showIndicator = true } = this.props;\n\t\tvar num = index + 1;\n\t\tvar onOff = selected ? \"on\" : \"off\";\n\t\treturn (\n\t\t\t<div className={classnames(\"pattern-beat\", { current, selected })}>\n\t\t\t\t{ showIndicator && <span className={classnames(\"indicator\", { on: current })}></span> }\n\t\t\t\t<button onClick={()=>onToggle()} className=\"button\"><span>Beat { num } - is { onOff }</span></button>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport { PatternBeat };","import React from \"react\";\n\nconst PatternTimeSignature = ({ children }) => <div className=\"time-signature\">{children}</div>;\nconst PatternTimeSignatureGroup = ({ children }) => <div className=\"time-signature-group\">{children}</div>;\nconst PatternTimeSignature44 = ({ children }) => <div className=\"time-signature-4-4\">{children}</div>;\n\nexport {\n  PatternTimeSignature,\n  PatternTimeSignatureGroup,\n  PatternTimeSignature44\n};\n","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport { PatternBeat } from \"../pattern/pattern.beat.react.jsx\";\nimport { numberToArrayLength } from \"../../library/natives/array\";\nimport { PatternTimeSignature } from \"./pattern.time.signature.react\";\nimport { PatternTimeSignatureGroup } from \"./pattern.time.signature.react\";\nimport { PatternTimeSignature44 } from \"./pattern.time.signature.react\";\n\nclass Pattern extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tconst { machine, playState, machineId, tempo, dispatch } = this.props;\n\t\tconst { channels, currentBankIndex } = machine;\n\t\tconst drumMachineActions = bindActionCreators(DrumMachineActions.drumMachine, dispatch);\n\t\treturn (\n\t\t\t<div className=\"pattern\">\n\t\t\t\t<PatternTimeSignature>\n\t\t\t\t\t{\n\t\t\t\t\t\tnumberToArrayLength(tempo.beatsPerBar)\n\t\t\t\t\t\t\t.map(beatIndex => {\n\t\t\t\t\t\t\t\tlet segments = numberToArrayLength(tempo.segmentsPerBeat, beatIndex * tempo.segmentsPerBeat);\n\t\t\t\t\t\t\t\treturn ( \n\t\t\t\t\t\t\t\t\t<PatternTimeSignatureGroup>\n\t\t\t\t\t\t\t\t\t\t<PatternTimeSignature44>\n\t\t\t\t\t\t\t\t\t\t\t{ segments\n\t\t\t\t\t\t\t\t\t\t\t\t.map(segmentIndex =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"signature-item\">{segmentIndex + 1}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</PatternTimeSignature44>\n\t\t\t\t\t\t\t\t\t\t<div className=\"pattern-tray\">\n\t\t\t\t\t\t\t\t\t\t\t{ channels\n\t\t\t\t\t\t\t\t\t\t\t\t.map((channel, i) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\tchannel\n\t\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(({ channel }, i) => channel.selected)\n\t\t\t\t\t\t\t\t\t\t\t\t.map(({ channel: { patterns }, id }, i) => \n\t\t\t\t\t\t\t\t\t\t\t\t\tpatterns[currentBankIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((beat, index) => segments.indexOf(index) !== -1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((beat, index) => ({beat, index: segments[index]}))\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map(({beat, index}) => \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PatternBeat index={index} current={playState.currentSegmentIndex === index} selected={!!beat} onToggle={() => drumMachineActions.toggleBeat(machineId, id, currentBankIndex, index, beat ? 0 : 1)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</PatternTimeSignatureGroup>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\n\t\t\t\t\t}\n\t\t\t\t</PatternTimeSignature>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport { Pattern };","import React from \"react\";\n\nclass PlayToggle extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tlet { isPlaying, onPlayPause } = this.props;\n\t\tlet text = isPlaying ? \"Pause\" : \"Play\";\n\t\tlet toggleClass = isPlaying ? \"selected\" : \"\";\n\t\tlet ariaPressed = isPlaying ? \"true\" : \"false\";\n\n\t\treturn (\n\t\t\t<div className=\"play-toggle channel-item\">\n\t\t\t\t<button className={\"button \" + toggleClass} aria-pressed={ariaPressed} onClick={ () => onPlayPause() }>{ text }</button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport { PlayToggle };","import React from \"react\";\n\nclass Display extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tvar expandedClass = this.props.expanded ? \"open\" : \"closed\";\n\t\tvar expandedName = this.props.expanded ? \"close\" : \"expand\";\n\t\tvar displayClass = \"display unit \" + (this.props.colour || \"green\");\n\t\tvar expandableButtonClass = \"button expandable \" + expandedClass;\n\t\treturn (\n\t\t\t<div className={displayClass}>\n\t\t\t\t<div className=\"inner\">\n\t\t\t\t\t<p className=\"name\">{this.props.name}</p>\n\t\t\t\t\t<p className=\"value\">{this.props.value}</p>\n\t\t\t\t</div>\n\t\t\t\t<button className={expandableButtonClass}>{expandedName} display</button>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport { Display };","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { Rotator } from \"../../rotator/rotator.react.jsx\";\nimport DrumMachineActions from \"../../../actions/root.actions\";\n\nclass Reverb extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\t\n\trender() {\n        const { machineId, reverb, dispatch } = this.props;\n        const machine = reverb[machineId];\n\t\tconst reverbActions = bindActionCreators(DrumMachineActions.reverb, dispatch);\n        \n\t\treturn (\n            <div className=\"effects-parameters\">\n                <h3 className=\"item-label\">Reverb</h3>\n                <div className=\"effects-tray\">\n                    <Rotator name=\"Length\" classes=\"effect-item\" value={machine.seconds} onValueChange={ (value) => reverbActions.changeReverbSecondsToAmount(machineId, value) } />\n                    <Rotator name=\"Decay\" classes=\"effect-item\" value={machine.decay} onValueChange={ (value) => reverbActions.changeReverbDecayToAmount(machineId, value) } />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport { Reverb };","import React from \"react\";\nimport * as _ from \"../../library/natives/array\";\nimport { normaliseValue, valueAsPercentageOfX } from \"../../library/natives/numbers\";\n\nconst STEP_SIZE = 33.34;\nconst STEP_OFFSET = -1;\nconst STEPS_VISIBLE = 3;\n\nclass Slider extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n    this.state = {\n      touching: false,\n      touches: [],\n      coordinates: {\n        containerWidth: 0\n      },\n      currentX: 0,\n      previousX: 0\n    }\n\t}\n\t\n\trender() {\n    let { min, max, step, value, onValueChange, name } = this.props;\n    \n    let steps = _.rangeToArray(min, max, step);\n\n    let x;\n    if(this.state.touching){\n      x = this.state.currentX;\n      value = this.getCurrentValueFromX(x);\n    } else {\n      x = this.getXFromCurrentValue();\n    }\n    let sliderStyle = {\n\t\t\ttransform: \"translate(\" + x + \"%, 0)\",\n      transition: this.state.touching ? \"\" : \"transform 300ms ease\"\n\t\t};\n    let sliderClass = this.state.touching ? \"slider grabbing\" : \"slider\";\n\t\treturn (\n      <div className=\"slider-container\">\n        <h3 className=\"item-label\">{name}</h3>\n\t\t\t\t<input type=\"range\" ref=\"value\" min={min} max={max} step={step} className=\"item-value assistive\" onChange={(e) => onValueChange(+(e.target.value))} />\n        <div className={sliderClass} ref=\"slider\" aria-hidden=\"true\">\n          <div className=\"slider-wrapper\" style={sliderStyle}>\n            { steps.map((item, i) => {\n              let className = item === value ? \"item selected\" : \"item\";\n              return (\n                <div className={className}>{item}</div>\n              );\n            }\n            )}\n          </div>\n        </div>\n      </div>\n\t\t);\n\t}\n\n  getTouchDistance() {\n    var first = _.first(this.state.touches);\n    var last = _.last(this.state.touches);\n    var distance = first - last;\n    return distance;\n  }\n\n  getXFromCurrentValue() {\n    let { min, max, step, value, onChange } = this.props;\n\n    let currentStep = (value - min) / step;\n    let viewStep = currentStep + STEP_OFFSET;\n\n    return viewStep * STEP_SIZE * -1\n  }\n\n  getCurrentValueFromX(x) {\n    let { min, max, step } = this.props;\n\n    let viewStep = x / (STEP_SIZE * -1);\n    let currentStep = viewStep - STEP_OFFSET;\n    let value = (Math.round(currentStep) + min) * step;\n\n    return normaliseValue(value, min, max);\n  }\n\n  getCurrentX() {\n    let touchDistance = this.getTouchDistance();\n    let percentage = valueAsPercentageOfX(touchDistance, this.state.containerWidth);\n    return this.state.previousX - percentage;\n  }\n\n  getSnapToX(x) {\n    //TODO: snap to a value\n    return x;\n  }\n\n  calculateContainerWidth = () => {\n\t\tlet { slider: $slider } = this.refs;\n\n    this.setState({\n      containerWidth: $slider.getBoundingClientRect().width\n    });\n  }\n\n  componentDidMount() {\n\t\tlet { slider: $slider } = this.refs;\n\n    this.calculateContainerWidth();\n\n    window.addEventListener(\"resize\", this.calculateContainerWidth);\n\n    $slider.addEventListener(\"touchstart\", this.onStart);\n    $slider.addEventListener(\"touchmove\", this.onMove);\n    $slider.addEventListener(\"touchend\", this.onEnd);\n\n    $slider.addEventListener(\"mousedown\", this.onStart);\n    window.addEventListener(\"mousemove\", this.onMove);\n    window.addEventListener(\"mouseup\", this.onEnd);\n  }\n\n  componentWillUnmount() {\n\t\tlet { slider: $slider } = this.refs;\n    window.removeEventListener(\"resize\", this.calculateContainerWidth);\n    $slider.removeEventListener(\"touchstart\", this.onStart);\n    $slider.removeEventListener(\"touchmove\", this.onMove);\n    $slider.removeEventListener(\"touchend\", this.onEnd);\n\n    $slider.removeEventListener(\"mousedown\", this.onStart);\n    window.removeEventListener(\"mousemove\", this.onMove);\n    window.removeEventListener(\"mouseup\", this.onEnd);\n  }\n\n  onStart = (e) => {\n    e.preventDefault();\n    let touch = e.pageX !== undefined ? e.pageX : e.touches[0].pageX;\n    this.setState({\n      touching: true,\n      touches: [touch],\n      currentX: this.getXFromCurrentValue(),\n      previousX: this.getXFromCurrentValue()\n    });\n  }\n\n  onMove = (e) => {\n    if(!e.target || !this.state.touching) {\n      return;\n    }\n    e.preventDefault();\n    let { onValueChange, value } = this.props;\n    let touch = e.pageX !== undefined ? e.pageX : e.touches[0].pageX;\n    let newValue = this.getCurrentValueFromX(this.getCurrentX());\n\n\t\tif(this.rafId) window.cancelAnimationFrame(this.rafId);\n\n\t\tthis.rafId = window.requestAnimationFrame(() => {\n      if(!this.state.touching) return;\n      \n      if(value !== newValue) {\n        onValueChange(newValue);\n      }\n      \n      this.setState({\n        touching: true,\n        touches: this.state.touches.concat([touch]),\n        currentX: this.getCurrentX()\n      });\n    });\n  }\n\n  onEnd = (e) => {\n    if(!e.target || !this.state.touching) {\n      return;\n    }\n    e.preventDefault();\n\n    let { onValueChange } = this.props;\n    let value = this.getCurrentValueFromX(this.getCurrentX());\n\n    onValueChange(value);\n\n    this.setState({\n      touching: false\n    });\n  }\n}\n\nexport { Slider };","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\n\nimport { Display } from \"../display/display.react.jsx\";\nimport { Rotator } from \"../rotator/rotator.react.jsx\";\nimport { PlayToggle } from \"../play-toggle/play.toggle.react.jsx\";\nimport { ToggleButton } from \"../toggle-button/toggle.button.react.jsx\";\nimport { numberToArrayLength } from \"../../library/natives/array\";\nimport { Reverb } from \"./reverb/reverb.react.jsx\";\nimport { Slider } from \"../slider/slider.react.jsx\";\n\nclass Toolbar extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tconst { tempo, playState, dispatch, machine, machineId } = this.props;\n\t\tconst playStateActions = bindActionCreators(DrumMachineActions.playState, dispatch);\n\t\tconst tempoActions = bindActionCreators(DrumMachineActions.tempo, dispatch);\n    const drumMachineActions = bindActionCreators(DrumMachineActions.drumMachine, dispatch);\n    const { currentBankIndex, swing } = machine;\n\t\t\n\t\treturn (\n      <div className=\"toolbar\">\n        <div className=\"toolbar-item play-pause\">\n          <PlayToggle isPlaying={ playState.isPlaying } onPlayPause={ playStateActions.togglePlayPause } />\n        </div>\n        <div className=\"toolbar-item tempo\">\n          <Slider name=\"Tempo\" min={50} max={190} step={1} value={tempo.beatsPerMinute} onValueChange={ (value) => tempoActions.changeBPMToAmount(value) } />\n        </div>\n        <div className=\"toolbar-item swing\">\n          <Slider name=\"Swing\" min={0} max={100} step={5} value={swing} onValueChange={ (value) => drumMachineActions.changeSwingToAmount(machineId, value) } />\n        </div>\n        <div className=\"toolbar-item bank-selector\">\n          <h3 className=\"item-label\">Pattern Bank</h3>\n          <div className=\"banks-available\">\n            { numberToArrayLength(8)\n              .map(i =>\n                <ToggleButton onClick={() => drumMachineActions.newBankIndex(machineId, i)} name={\"A\" + (i + 1)} selected={i === currentBankIndex} classes=\"red\" />\n              )\n            }\n          </div>\n        </div>\n        <div className=\"toolbar-item reverb\">\n          <Reverb machineId={0} {...this.props} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { Toolbar };","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\n\nimport { ToggleButton } from \"../toggle-button/toggle.button.react.jsx\";\nimport { getSound } from \"../../library/audio-api/load.sounds\";\n\nclass ChannelSelector extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n    const { machine, machineId, dispatch } = this.props;\n    const { channels } = machine;\n\t\tconst actions = bindActionCreators(DrumMachineActions.drumMachine, dispatch);\n\t\treturn (\n      <div className=\"channel-selector\">\n        <h3 ref=\"name\" className=\"item-title\">Sound Selector</h3>\n        <div className=\"item-tray\">\n          {channels.map((channel, i) => { \n            let sound = getSound(channel.sound, this.props);\n            return <div className=\"selector-button\">\n              <ToggleButton onClick={() => actions.changeSelectedChannel(machineId, i)} name={sound.shortName} selected={channel.selected} classes=\"red\" />\n            </div>\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { ChannelSelector };","import React, { Component } from \"react\";\n\nimport { Channels } from \"../channel/channels.react.jsx\";\nimport { Pattern } from \"../pattern/pattern.react.jsx\";\nimport { Toolbar } from \"../toolbar/toolbar.react.jsx\";\nimport { ChannelSelector } from \"../channel-selector/channel.selector.react.jsx\";\n\nlet DrumMachine = (props) => {\n\tlet machine = props.drumMachine[props.machineId];\n\treturn <div className=\"drum-machine\">\n\t\t<Toolbar {...props} machine={machine} />\n\t\t<ChannelSelector {...props} machine={machine} />\n\t\t<Channels {...props} machine={machine} />\n\t\t<Pattern {...props} machine={machine} />\n\t</div>\n};\n\nexport { DrumMachine };","import React from \"react\";\nimport classnames from \"classnames\";\nimport * as _ from \"../../library/natives/array\";\nimport { normaliseValue, valueAsPercentageOfX, percentageToValueOfRange } from \"../../library/natives/numbers\";\n\nconst DEFAULT_FADER_SIZE = 20;\n\nclass Fader extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n    this.state = {\n      touching: false,\n      touches: [],\n      containerWidth: 0,\n      containerHeight: 0,\n      faderWidth: 0,\n      faderHeight: 0,\n      currentX: 0,\n      currentY: 0,\n      previousY: 0\n    }\n\t}\n\t\n\trender() {\n    let { min, max, step, onValueChange, name, id, orientation, type, width, height } = this.props;\n\n    let x, y;\n    if(this.state.touching){\n      x = this.state.currentX;\n      y = this.state.currentY;\n    } else {\n      x = this.getXFromCurrentValue();\n      y = this.getYFromCurrentValue();\n    }\n    let containerStyle = {\n      width,\n      height\n\t\t};\n    let faderStyle = {\n      height: height ? this.getFaderHeight() : null,\n      width: width ? this.getFaderWidth() : null,\n\t\t\ttransform: `translate(${x}px, ${y}px)`\n\t\t};\n\t\treturn (\n      <div className={classnames(\"fader-container\", { [`fader-container-${type}`]: type, \"orientation-vertical\": orientation === \"vertical\" })} ref=\"faderContainer\" style={containerStyle}>\n        <h3 className=\"item-label\">{name}</h3>\n\t\t\t\t<input id={id} type=\"range\" ref=\"value\" min={min} max={max} step={step} className=\"item-value assistive\" onChange={(e) => onValueChange(+(e.target.value))} />\n        <div className={classnames(\"fader\", { grabbing: this.state.touching })} ref=\"fader\" aria-hidden=\"true\" style={faderStyle}>\n        </div>\n      </div>\n\t\t);\n  }\n  \n  getFaderHeight() {\n    let { min, max, orientation, height } = this.props;\n    return orientation === \"vertical\" ? height ? height / (max + 1 - min) : DEFAULT_FADER_SIZE : DEFAULT_FADER_SIZE;\n  }\n\n  getFaderWidth() {\n    let { min, max, orientation, width } = this.props;\n    return orientation !== \"vertical\" ? width ? width / (max + 1 - min) : DEFAULT_FADER_SIZE : DEFAULT_FADER_SIZE;\n  }\n\n  getTouchDistanceX() {\n    var first = _.first(this.state.touchesX);\n    var last = _.last(this.state.touchesX);\n    var distance = first - last;\n    return distance;\n  }\n\n  getTouchDistanceY() {\n    var first = _.first(this.state.touchesY);\n    var last = _.last(this.state.touchesY);\n    var distance = first - last;\n    return distance;\n  }\n\n  getXFromCurrentValue() {\n    let { min, max, step, value, orientation } = this.props;\n    if(orientation === \"vertical\") return 0;\n    let stepSize = this.getContainerWidth();\n    let currentStep = (value - min) / step;\n    return currentStep * stepSize / (max-min);\n  }\n\n  getYFromCurrentValue() {\n    let { min, max, step, value, orientation } = this.props;\n    if(orientation !== \"vertical\") return 0;\n    let stepSize = this.getContainerHeight();\n    let currentStep = (value - min) / step;\n    return currentStep * stepSize / (max-min);\n  }\n\n  getCurrentValueFromX(x) {\n    let { min, max, step } = this.props;\n    let stepSize = this.getContainerWidth();\n    let viewStep = x / stepSize * 100;\n    let value = (Math.round(viewStep) + min) * step;\n    return normaliseValue(percentageToValueOfRange(value, min, max), min, max);\n  }\n\n  getCurrentValueFromY(y) {\n    let { min, max, step } = this.props;\n    let stepSize = this.getContainerHeight();\n    let viewStep = y / stepSize * 100;\n    let value = (Math.round(viewStep) + min) * step;\n    return normaliseValue(percentageToValueOfRange(value, min, max), min, max);\n  }\n\n  getContainerWidth() {\n    let { width } = this.props;\n    return (width || this.state.containerWidth) - this.getFaderWidth();\n  }\n\n  getContainerHeight() {\n    let { height } = this.props;\n    return (height || this.state.containerHeight) - this.getFaderHeight();\n  }\n\n  getCurrentX() {\n    let { orientation } = this.props;\n    if(orientation === \"vertical\") return 0;\n    let touchDistance = this.getTouchDistanceX();\n    let diff = this.state.previousX - touchDistance;\n    return normaliseValue(diff, 0, this.getContainerWidth());\n  }\n\n  getCurrentY() {\n    let { orientation } = this.props;\n    if(orientation !== \"vertical\") return 0;\n    let touchDistance = this.getTouchDistanceY();\n    let diff = this.state.previousY - touchDistance;\n    return normaliseValue(diff, 0, this.getContainerHeight());\n  }\n\n  calculateContainerDimensions = () => {\n\t\tlet {\n      faderContainer: $faderContainer\n    } = this.refs;\n\n    let faderContainerDimensions = $faderContainer.getBoundingClientRect();\n\n    this.setState({\n      containerWidth: faderContainerDimensions.width,\n      containerHeight: faderContainerDimensions.height,\n      faderWidth: this.getFaderWidth(),\n      faderHeight: this.getFaderHeight()\n    });\n  }\n\n  componentDidMount() {\n\t\tlet { fader: $fader } = this.refs;\n\n    this.calculateContainerDimensions();\n\n    window.addEventListener(\"resize\", this.calculateContainerDimensions);\n\n    $fader.addEventListener(\"touchstart\", this.onStart);\n    $fader.addEventListener(\"touchmove\", this.onMove);\n    $fader.addEventListener(\"touchend\", this.onEnd);\n\n    $fader.addEventListener(\"mousedown\", this.onStart);\n    window.addEventListener(\"mousemove\", this.onMove);\n    window.addEventListener(\"mouseup\", this.onEnd);\n  }\n\n  componentWillUnmount() {\n\t\tlet { fader: $fader } = this.refs;\n    window.removeEventListener(\"resize\", this.calculateContainerDimensions);\n    $fader.removeEventListener(\"touchstart\", this.onStart);\n    $fader.removeEventListener(\"touchmove\", this.onMove);\n    $fader.removeEventListener(\"touchend\", this.onEnd);\n\n    $fader.removeEventListener(\"mousedown\", this.onStart);\n    window.removeEventListener(\"mousemove\", this.onMove);\n    window.removeEventListener(\"mouseup\", this.onEnd);\n  }\n\n  onStart = (e) => {\n    e.preventDefault();\n    let touchX = e.pageX !== undefined ? e.pageX : e.touches[0].pageX;\n    let touchY = e.pageY !== undefined ? e.pageY : e.touches[0].pageY;\n    this.setState({\n      touching: true,\n      touchesX: [touchX],\n      touchesY: [touchY],\n      currentX: this.getXFromCurrentValue(),\n      previousX: this.getXFromCurrentValue(),\n      currentY: this.getYFromCurrentValue(),\n      previousY: this.getYFromCurrentValue()\n    });\n  }\n\n  onMove = (e) => {\n    if(!e.target || !this.state.touching) {\n      return;\n    }\n    e.preventDefault();\n    let { onValueChange, value, orientation } = this.props;\n    let touchX = e.pageX !== undefined ? e.pageX : e.touches[0].pageX;\n    let touchY = e.pageY !== undefined ? e.pageY : e.touches[0].pageY;\n    let newValue;\n    if(orientation === \"vertical\") {\n      newValue = this.getCurrentValueFromY(this.getCurrentY());\n    } else {\n      newValue = this.getCurrentValueFromX(this.getCurrentX());\n    }\n\n\t\tif(this.rafId) window.cancelAnimationFrame(this.rafId);\n\n\t\tthis.rafId = window.requestAnimationFrame(() => {\n      if(!this.state.touching) return;\n      \n      if(value !== newValue) {\n        onValueChange(newValue);\n      }\n      \n      this.setState({\n        touching: true,\n        touchesX: [...this.state.touchesX, touchX],\n        touchesY: [...this.state.touchesY, touchY],\n        currentX: this.getCurrentX(),\n        currentY: this.getCurrentY()\n      });\n    });\n  }\n\n  onEnd = (e) => {\n    if(!e.target || !this.state.touching) {\n      return;\n    }\n    e.preventDefault();\n\n    let { onValueChange, orientation } = this.props;\n\n    let value;\n    if(orientation === \"vertical\") {\n      value = this.getCurrentValueFromY(this.getCurrentY());\n    } else {\n      value = this.getCurrentValueFromX(this.getCurrentX());\n    }\n    onValueChange(value);\n\n    this.setState({\n      touching: false\n    });\n  }\n}\n\nexport { Fader };","export const keyboardArray = [\n  \"c\",\n  \"c#\",\n  \"d\",\n  \"d#\",\n  \"e\",\n  \"f\",\n  \"f#\",\n  \"g\",\n  \"g#\",\n  \"a\",\n  \"a#\",\n  \"b\"\n];\n\nexport const keyboardFrequencies = [\n  32.7032,\n  34.6479,\n  36.7081,\n  38.8909,\n  41.2035,\n  43.6536,\n  46.2493,\n  48.9995,\n  51.913,\n  55,\n  58.2705,\n  61.7354,\n  65.4064,\n  69.2957,\n  73.4162,\n  77.7817,\n  82.4069,\n  87.3071,\n  92.4986,\n  97.9989,\n  103.826,\n  110,\n  116.541,\n  123.471,\n  130.813,\n  138.591,\n  146.832,\n  155.563,\n  164.814,\n  174.614,\n  184.997,\n  195.998,\n  207.652,\n  220,\n  233.082,\n  246.942,\n  261.626,\n  277.183,\n  293.665,\n  311.127,\n  329.628,\n  349.228,\n  369.994,\n  391.995,\n  415.305,\n  440,\n  466.164,\n  493.883,\n  523.251,\n  554.365,\n  587.33,\n  622.254,\n  659.255,\n  698.456,\n  739.989,\n  783.991,\n  830.609,\n  880,\n  932.328,\n  987.767,\n  1046.5,\n  1108.73,\n  1174.66,\n  1244.51,\n  1318.51,\n  1396.91,\n  1479.98,\n  1567.98,\n  1661.22,\n  1760,\n  1864.66,\n  1975.53,\n  2093,\n  2217.46,\n  2349.32,\n  2489.02,\n  2637.02,\n  2793.83,\n  2959.96,\n  3135.96,\n  3322.44,\n  3520,\n  3729.31,\n  3951.07,\n  4186.01\n];\n\nexport const keyboardMap = {\n  \"a\": { \"note\": \"c\", \"octave\": 0 },\n  \"w\": { \"note\": \"c#\", \"octave\": 0 },\n  \"s\": { \"note\": \"d\", \"octave\": 0 },\n  \"e\": { \"note\": \"d#\", \"octave\": 0 },\n  \"d\": { \"note\": \"e\", \"octave\": 0 },\n  \"f\": { \"note\": \"f\", \"octave\": 0 },\n  \"t\": { \"note\": \"f#\", \"octave\": 0 },\n  \"g\": { \"note\": \"g\", \"octave\": 0 },\n  \"y\": { \"note\": \"g#\", \"octave\": 0 },\n  \"h\": { \"note\": \"a\", \"octave\": 0 },\n  \"u\": { \"note\": \"a#\", \"octave\": 0 },\n  \"j\": { \"note\": \"b\", \"octave\": 0 },\n  \"k\": { \"note\": \"c\", \"octave\": 1 },\n  \"o\": { \"note\": \"c#\", \"octave\": 1 },\n  \"l\": { \"note\": \"d\", \"octave\": 1 },\n  \"p\": { \"note\": \"d#\", \"octave\": 1 },\n  \";\": { \"note\": \"e\", \"octave\": 1 }\n};\n\nexport const keymap = {\n  \"8\": \"backspace\",\n  \"9\": \"tab\",\n  \"13\": \"enter\",\n  \"16\": \"shift\",\n  \"17\": \"ctrl\",\n  \"18\": \"alt\",\n  \"19\": \"pause/break\",\n  \"20\": \"caps lock\",\n  \"27\": \"escape\",\n  \"33\": \"page up\",\n  \"34\": \"page down\",\n  \"35\": \"end\",\n  \"36\": \"home\",\n  \"37\": \"left arrow\",\n  \"38\": \"up arrow\",\n  \"39\": \"right arrow\",\n  \"40\": \"down arrow\",\n  \"45\": \"insert\",\n  \"46\": \"delete\",\n  \"48\": \"0\",\n  \"49\": \"1\",\n  \"50\": \"2\",\n  \"51\": \"3\",\n  \"52\": \"4\",\n  \"53\": \"5\",\n  \"54\": \"6\",\n  \"55\": \"7\",\n  \"56\": \"8\",\n  \"57\": \"9\",\n  \"65\": \"a\",\n  \"66\": \"b\",\n  \"67\": \"c\",\n  \"68\": \"d\",\n  \"69\": \"e\",\n  \"70\": \"f\",\n  \"71\": \"g\",\n  \"72\": \"h\",\n  \"73\": \"i\",\n  \"74\": \"j\",\n  \"75\": \"k\",\n  \"76\": \"l\",\n  \"77\": \"m\",\n  \"78\": \"n\",\n  \"79\": \"o\",\n  \"80\": \"p\",\n  \"81\": \"q\",\n  \"82\": \"r\",\n  \"83\": \"s\",\n  \"84\": \"t\",\n  \"85\": \"u\",\n  \"86\": \"v\",\n  \"87\": \"w\",\n  \"88\": \"x\",\n  \"89\": \"y\",\n  \"90\": \"z\",\n  \"91\": \"left window key\",\n  \"92\": \"right window key\",\n  \"93\": \"select key\",\n  \"96\": \"numpad 0\",\n  \"97\": \"numpad 1\",\n  \"98\": \"numpad 2\",\n  \"99\": \"numpad 3\",\n  \"100\": \"numpad 4\",\n  \"101\": \"numpad 5\",\n  \"102\": \"numpad 6\",\n  \"103\": \"numpad 7\",\n  \"104\": \"numpad 8\",\n  \"105\": \"numpad 9\",\n  \"106\": \"multiply\",\n  \"107\": \"add\",\n  \"109\": \"subtract\",\n  \"110\": \"decimal point\",\n  \"111\": \"divide\",\n  \"112\": \"f1\",\n  \"113\": \"f2\",\n  \"114\": \"f3\",\n  \"115\": \"f4\",\n  \"116\": \"f5\",\n  \"117\": \"f6\",\n  \"118\": \"f7\",\n  \"119\": \"f8\",\n  \"120\": \"f9\",\n  \"121\": \"f10\",\n  \"122\": \"f11\",\n  \"123\": \"f12\",\n  \"144\": \"num lock\",\n  \"145\": \"scroll lock\",\n  \"186\": \"semi-colon\",\n  \"187\": \"equal sign\",\n  \"188\": \"comma\",\n  \"189\": \"dash\",\n  \"190\": \"period\",\n  \"191\": \"forward slash\",\n  \"192\": \"grave accent\",\n  \"219\": \"open bracket\",\n  \"220\": \"back slash\",\n  \"221\": \"close braket\",\n  \"222\": \"single quote\"\n};\n\nexport const keyTranspose = {\n  note: 1.0594,\n  semitone: 0.088,\n  cent: 0.00088\n};","import React, { Component, Children, cloneElement } from \"react\";\nimport classnames from \"classnames\";\n\nclass Selector extends Component {\n  handleIncrement() {\n    let { onValueChange, children, id } = this.props;\n    let selectedIndex = 0;\n    if(!children.length) return;\n    let childProps = Children.map(children, (child, index) => {\n      if(child.props.selected) {\n        selectedIndex = index;\n      }\n      return child.props;\n    });\n    selectedIndex++;\n    if( selectedIndex >= children.length) {\n      selectedIndex = 0;\n    }\n    onValueChange(childProps[selectedIndex].value);\n  }\n  handleDecrement() {\n    let { onValueChange, children, id } = this.props;\n    let selectedIndex = 0;\n    if(!children.length) return;\n    let childProps = Children.map(children, (child, index) => {\n      if(child.props.selected) {\n        selectedIndex = index;\n      }\n      return child.props;\n    });\n    selectedIndex--;\n    if(selectedIndex < 0) {\n      selectedIndex = children.length - 1;\n    }\n    onValueChange(childProps[selectedIndex].value);\n  }\n  render() {\n    let { onValueChange, children, id } = this.props;\n    return <div className=\"selector-container\">\n      <div className=\"visual-selector\" aria-hidden=\"true\">\n        <div className=\"selector-options\">\n          {children}\n        </div>\n        <div className=\"selector-buttons\">\n          <button className=\"button\" onClick={() => this.handleDecrement()}>\n            <span className=\"icon__arrow-up\"></span>\n            <span className=\"assistive\">Decrement</span>\n          </button>\n          <button className=\"button\" onClick={() => this.handleIncrement()}>\n            <span className=\"icon__arrow-down\"></span>\n            <span className=\"assistive\">Increment</span>\n          </button>\n        </div>\n      </div>\n      <select className=\"assistive\" id={id} onChange={ (e) => onValueChange(e.target.value) }>\n        {children}\n      </select>\n    </div>;\n  }\n}\n\nclass SelectorOption extends Component {\n  render() {\n    let { name, value, selected, children } = this.props;\n\t\treturn (\n      <div className={classnames(\"selector-option\", { selected })} ref=\"faderContainer\">\n        <span className=\"selector-option-label\">{children}</span>\n        <option value={value} selected={selected} name={name} className=\"assistive\">{children}</option>\n      </div>\n\t\t);\n  }\n}\n\nexport { Selector, SelectorOption };","import React, { Component, Children } from \"react\";\nimport classnames from \"classnames\";\n\nclass Collapsible extends Component {\n  state = {\n    open: this.props.initialState === \"open\"\n  }\n\n  handleToggle(e, child){\n    if(child.props.onClick){\n      child.props.onClick(e);\n    }\n    this.setState({\n      open: !this.state.open\n    });\n  }\n\n  render(){\n    let { children } = this.props;\n    let { open } = this.state;\n    return (\n      <div className={classnames(\"collapsible\", { open, closed: !open })}>\n        {Children.map(children, child => {\n          if(child.type.displayName === \"CollapsibleHeader\") {\n            return React.cloneElement(child, {\n              onClick: (e) => this.handleToggle(e, child)\n            })\n          } else {\n            return child;\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nclass CollapsibleHeader extends Component {\n\n  render(){\n    let { children, onClick } = this.props;\n    return (\n      <div className=\"collapsible-header\">\n        <h3><a onClick={onClick}>\n          <span className=\"icon__arrow-down-dark\"></span>\n          { children }\n        </a></h3>\n      </div>\n    );\n  }\n}\n\nCollapsibleHeader.displayName = \"CollapsibleHeader\";\n\nclass CollapsibleContent extends Component {\n  render(){\n    let { children } = this.props;\n    return (\n      <div className=\"collapsible-content\">\n        { children }\n      </div>\n    );\n  }\n}\n\nexport {\n  CollapsibleContent,\n  CollapsibleHeader,\n  Collapsible\n};","import React, { PureComponent, Children, cloneElement } from \"react\";\nimport classnames from 'classnames';\nimport { Fader } from \"../fader/fader.react\";\n\nconst GRID_SIZE_DEFAULT = 35;\n\nclass GridContainer extends PureComponent {\n  state={\n    containerWidth: 0,\n    containerHeight: 0,\n    max: {\n      columns: 0,\n      rows: 0\n    },\n    offset: {\n      column: 0,\n      row: 0\n    }\n  }\n  calculateContainerDimensions = () => {\n    let { grid: $grid } = this.refs;\n    let { columns, rows } = this.props;\n\n    let dimensions = $grid.getBoundingClientRect();\n    let maxColumns = Math.floor(dimensions.width / GRID_SIZE_DEFAULT) - 2;\n    this.setState({\n      containerWidth: dimensions.width,\n      containerHeight: dimensions.height,\n      max: {\n        columns: maxColumns,\n        rows: maxColumns\n      },\n      offset: {\n        column: this.state.offset.column + maxColumns < columns ? this.state.offset.column : columns - maxColumns,\n        row: this.state.offset.row + maxColumns < rows ? this.state.offset.row : rows - maxColumns,\n      }\n    });\n  }\n  componentDidMount() {\n    this.calculateContainerDimensions();\n    window.addEventListener(\"resize\", this.calculateContainerDimensions);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.calculateContainerDimensions);\n  }\n  render() {\n    let { children, columns, rows } = this.props;\n    let { max, offset } = this.state;\n    return <div className={classnames(\"grid-container\", { \"grid-container-show-scroll-x\": max.columns < columns, \"grid-container-show-scroll-y\": max.rows < rows })} ref=\"grid\">{\n      Children.map(children, child => {\n        return cloneElement(child, {\n          ...child.props,\n          max,\n          offset\n        });\n      })\n    }\n    <GridScroll type=\"x\">\n      <Fader id=\"grid-container-scroll-x\" width={(max.columns) * GRID_SIZE_DEFAULT} type=\"narrow\" min={0} max={columns - max.columns} value={offset.column} onValueChange={ value => \n        this.setState({\n          offset: {\n            ...offset,\n            column: value\n          }\n        })\n      } step={1} />\n    </GridScroll>\n    <GridScroll type=\"y\">\n      <Fader id=\"grid-container-scroll-y\" height={(max.rows) * GRID_SIZE_DEFAULT} orientation=\"vertical\" type=\"narrow\" min={0} max={rows - max.rows} value={offset.row} onValueChange={ value => \n        this.setState({\n          offset: {\n            ...offset,\n            row: value\n          }\n        })\n      } step={1} />\n    </GridScroll>\n    </div>;\n  }\n};\n\nlet GridAxis = props => {\n  let { children, type, max: { columns = 0, rows = 0 }, offset: { column = 0, row = 0 } } = props;\n  return <div className={classnames(\"grid-axis\", { [`grid-axis-${type}`]: type })}>{\n    columns || rows ? children.filter((child, i) => \n      type === \"x\" ?\n        i >= column && i < columns + column :\n        i >= row && i < rows + row\n    ) : children\n  }</div>;\n};\n\nlet GridAxisItem = props => {\n  let { children, type } = props;\n  return <div className={classnames(\"grid-axis-item\", { [`grid-axis-item-${type}`]: type })}>{children}</div>;\n};\n\nlet Grid = props => {\n  let { children, max, max: { rows = 0 }, offset, offset: { row = 0 } } = props;\n  return <div className=\"grid\">{\n    Children.map(children, (child, i) => {\n      if(rows && i >= row && i < rows + row) {\n        return cloneElement(child, {\n          ...child.props,\n          max,\n          offset\n        });\n      }\n      return null;\n    })\n  }</div>;\n};\n\nlet GridRow = props => {\n  let { children, type, max: { columns = 0 }, offset: { column = 0 } } = props;\n  return <div className={classnames(\"grid-row\", { [`grid-row-${type}`]: type })}>{\n    columns ? children.filter((child, i) => i >= column && i < columns + column) : children\n  }</div>;\n};\n\nlet GridItem = props => {\n  let { children } = props;\n  return <div className=\"grid-item\">{children}</div>;\n};\n\nlet GridScroll = props => {\n  let { children, type } = props;\n  return <div className={classnames(\"grid-scroll\", { [`grid-scroll-${type}`]: type})}>{children}</div>;\n};\n\nexport {\n  GridContainer,\n  GridAxis,\n  GridAxisItem,\n  Grid,\n  GridRow,\n  GridItem\n};","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport classnames from \"classnames\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport { Rotator } from \"../rotator/rotator.react.jsx\";\nimport { Slider } from \"../slider/slider.react.jsx\";\nimport { Fader } from \"../fader/fader.react.jsx\";\nimport { PatternBeat } from \"../pattern/pattern.beat.react.jsx\";\nimport { objectToArray, numberToArrayLength } from \"../../library/natives/array\";\nimport { keyboardArray } from \"../../library/keyboard\";\nimport { Selector, SelectorOption } from \"../selector/selector.react\";\nimport { Collapsible, CollapsibleHeader, CollapsibleContent } from \"../collapsible/collapsible.react\";\nimport { GridContainer, GridAxis, GridAxisItem, Grid, GridRow, GridItem } from \"../grid/grid.react\";\n\nlet Synth = props => {\n  const { synth, machineId, dispatch, playState } = props;\n  const synthParams = synth[machineId];\n  const synthActions = bindActionCreators(DrumMachineActions.synth, dispatch);\n  return <div className=\"synth-machine\">\n    <div className=\"basic-controls\">\n      <Collapsible initialState=\"closed\">\n        <CollapsibleHeader>Basic Controls</CollapsibleHeader>\n        <CollapsibleContent>\n          <div className=\"basic-controls-inner\">\n            <Slider name=\"Voices\" min={1} max={8} step={1} value={synthParams.voices} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"voices\", null, value)\n            } />\n            <Rotator name=\"Volume\" value={synthParams.volume} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"volume\", null, value)\n            } />\n            <Rotator name=\"Pan\" value={synthParams.pan} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"pan\", null, value)\n            } />\n            <Rotator name=\"Send 1\" value={synthParams.sends.send1} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"sends\", \"send1\", value)\n            } />\n            <Rotator name=\"Send 2\" value={synthParams.sends.send2} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"sends\", \"send2\", value)\n            } />\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n    <div className=\"filter\">\n      <Collapsible initialState=\"closed\">\n        <CollapsibleHeader>Filter</CollapsibleHeader>\n        <CollapsibleContent>\n          <div className=\"filter-controls\">\n            <div className=\"select-item\">\n              <h3 className=\"item-label\">Type</h3>\n              <Selector id=\"filter-type\" onValueChange={ value =>\n                synthActions.changeSynthParam(machineId, \"filter\", \"type\", value)\n              }>\n                <SelectorOption value=\"highpass\" selected={synthParams.filter.type === \"highpass\"}>High Pass</SelectorOption>\n                <SelectorOption value=\"lowpass\" selected={synthParams.filter.type === \"lowpass\"}>Low Pass</SelectorOption>\n                <SelectorOption value=\"bandpass\" selected={synthParams.filter.type === \"bandpass\"}>Band Pass</SelectorOption>\n              </Selector>\n            </div>\n            <div className=\"parameter-group\">\n              <div className=\"parameter\">\n                <label htmlFor=\"filter-frequency\" className=\"item-label\">Frequency</label>\n                <Fader id=\"filter-frequency\" type=\"range\" min={0} max={100} value={synthParams.filter.frequency} onValueChange={ value => \n                  synthActions.changeSynthParam(machineId, \"filter\", \"frequency\", value)\n                } step=\"1\" />\n              </div>\n              <div className=\"parameter\">\n                <label htmlFor=\"filter-resonance\" className=\"item-label\">Resonance</label>\n                <Fader id=\"filter-resonance\" type=\"range\" min={0} max={100} value={synthParams.filter.resonance} onValueChange={ value => \n                  synthActions.changeSynthParam(machineId, \"filter\", \"resonance\", value)\n                } step=\"1\" />\n              </div>\n            </div>\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n    <div className=\"oscillator-container\">\n      <div className=\"oscillator\">\n        <Collapsible initialState=\"open\">\n          <CollapsibleHeader>Oscillator 1</CollapsibleHeader>\n          <CollapsibleContent>\n            <div className=\"oscillator-controls\">\n              <div className=\"select-item\">\n                <h3 className=\"item-label\">Type</h3>\n                <Selector id=\"osc1-type\" onValueChange={ value =>\n                  synthActions.changeSynthParam(machineId, \"osc1\", \"waveType\", value)\n                }>\n                  <SelectorOption value=\"sine\" selected={synthParams.oscillators.osc1.waveType === \"sine\"}>Sine</SelectorOption>\n                  <SelectorOption value=\"square\" selected={synthParams.oscillators.osc1.waveType === \"square\"}>Square</SelectorOption>\n                  <SelectorOption value=\"sawtooth\" selected={synthParams.oscillators.osc1.waveType === \"sawtooth\"}>Sawtooth</SelectorOption>\n                  <SelectorOption value=\"triangle\" selected={synthParams.oscillators.osc1.waveType === \"triangle\"}>Triangle</SelectorOption>\n                </Selector>\n              </div>\n              <Slider name=\"Octave\" min={0} max={7} step={1} value={synthParams.oscillators.osc1.octave} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc1\", \"octave\", value)\n              } />\n              <Slider name=\"Semitone\" min={0} max={11} step={1} value={synthParams.oscillators.osc1.semitone} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc1\", \"semitone\", value)\n              } />\n              <Slider name=\"Cent\" min={0} max={100} step={1} value={synthParams.oscillators.osc1.cent} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc1\", \"cent\", value)\n              } />\n              <Rotator name=\"Amount\" value={synthParams.oscillators.osc1.amount} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc1\", \"amount\", value)\n              } />\n            </div>\n          </CollapsibleContent>\n        </Collapsible>\n      </div>\n      <div className=\"oscillator\">\n        <Collapsible initialState=\"open\">\n          <CollapsibleHeader>Oscillator 2</CollapsibleHeader>\n          <CollapsibleContent>\n            <div className=\"oscillator-controls\">\n              <div className=\"select-item\">\n                <h3 className=\"item-label\">Type</h3>\n                <Selector id=\"osc2-type\" onValueChange={ value =>\n                  synthActions.changeSynthParam(machineId, \"osc2\", \"waveType\", value)\n                }>\n                  <SelectorOption value=\"sine\" selected={synthParams.oscillators.osc2.waveType === \"sine\"}>Sine</SelectorOption>\n                  <SelectorOption value=\"square\" selected={synthParams.oscillators.osc2.waveType === \"square\"}>Square</SelectorOption>\n                  <SelectorOption value=\"sawtooth\" selected={synthParams.oscillators.osc2.waveType === \"sawtooth\"}>Sawtooth</SelectorOption>\n                  <SelectorOption value=\"triangle\" selected={synthParams.oscillators.osc2.waveType === \"triangle\"}>Triangle</SelectorOption>\n                </Selector>\n              </div>\n              <Slider name=\"Octave\" min={0} max={7} step={1} value={synthParams.oscillators.osc2.octave} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc2\", \"octave\", value)\n              } />\n              <Slider name=\"Semitone\" min={0} max={11} step={1} value={synthParams.oscillators.osc2.semitone} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc2\", \"semitone\", value)\n              } />\n              <Slider name=\"Cent\" min={0} max={100} step={1} value={synthParams.oscillators.osc2.cent} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc2\", \"cent\", value)\n              } />\n              <Rotator name=\"Amount\" value={synthParams.oscillators.osc2.amount} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"osc2\", \"amount\", value)\n              } />\n            </div>\n          </CollapsibleContent>\n        </Collapsible>\n      </div>\n    </div>\n    <div className=\"envelope\">\n      <Collapsible initialState=\"closed\">\n        <CollapsibleHeader>Amp Envelope</CollapsibleHeader>\n        <CollapsibleContent>\n          <div className=\"envelope-controls\">\n            <div className=\"parameter\">\n              <label htmlFor=\"amp-attack\" className=\"item-label\">Attack</label>\n              <Fader id=\"amp-attack\" type=\"range\" min={0} max={100} value={synthParams.envelopes.amp.attack} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"amp\", \"attack\", value)\n              } step={1} />\n            </div>\n            <div className=\"parameter\">\n              <label htmlFor=\"amp-decay\" className=\"item-label\">Decay</label>\n              <Fader id=\"amp-decay\" type=\"range\" min={0} max={100} value={synthParams.envelopes.amp.decay} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"amp\", \"decay\", value)\n              } step={1} />\n            </div>\n            <div className=\"parameter\">\n              <label htmlFor=\"amp-sustain\" className=\"item-label\">Sustain</label>\n              <Fader id=\"amp-sustain\" type=\"range\" min={0} max={100} value={synthParams.envelopes.amp.sustain} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"amp\", \"sustain\", value)\n              } step={1} />\n            </div>\n            <div className=\"parameter\">\n              <label htmlFor=\"amp-release\" className=\"item-label\">Release</label>\n              <Fader id=\"amp-release\" type=\"range\" min={0} max={100} value={synthParams.envelopes.amp.release} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"amp\", \"release\", value)\n              } step={1} />\n            </div>\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n    <div className=\"envelope\">\n      <Collapsible initialState=\"closed\">\n        <CollapsibleHeader>Filter Envelope</CollapsibleHeader>\n        <CollapsibleContent>\n          <div className=\"envelope-controls\">\n            <div className=\"parameter\">\n              <label htmlFor=\"filter-attack\" className=\"item-label\">Attack</label>\n              <Fader id=\"filter-attack\" type=\"range\" min={0} max={100} value={synthParams.envelopes.filter.attack} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"env-filter\", \"attack\", value)\n              } step={1} />\n            </div>\n            <div className=\"parameter\">\n              <label htmlFor=\"filter-decay\" className=\"item-label\">Decay</label>\n              <Fader id=\"filter-decay\" type=\"range\" min={0} max={100} value={synthParams.envelopes.filter.decay} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"env-filter\", \"decay\", value)\n              } step={1} />\n            </div>\n            <div className=\"parameter\">\n              <label htmlFor=\"filter-sustain\" className=\"item-label\">Sustain</label>\n              <Fader id=\"filter-sustain\" type=\"range\" min={0} max={100} value={synthParams.envelopes.filter.sustain} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"env-filter\", \"sustain\", value)\n              } step={1} />\n            </div>\n            <div className=\"parameter\">\n              <label htmlFor=\"filter-release\" className=\"item-label\">Release</label>\n              <Fader id=\"filter-release\" type=\"range\" min={0} max={100} value={synthParams.envelopes.filter.release} onValueChange={ value => \n                synthActions.changeSynthParam(machineId, \"env-filter\", \"release\", value)\n              } step={1} />\n            </div>\n            <Rotator name=\"Amount\" value={synthParams.envelopes.filter.amount} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"env-filter\", \"amount\", value)\n            } />\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n    {/*\n    <div className=\"lfo\">\n      <Collapsible initialState=\"closed\">\n        <CollapsibleHeader>LFO 1</CollapsibleHeader>\n        <CollapsibleContent>\n          <div className=\"lfo-controls\">\n            <Rotator name=\"Rate\" value={synthParams.lfos.lfo1.rate} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"lfo1\", \"rate\", value)\n            } />\n            <Rotator name=\"Amount\" value={synthParams.lfos.lfo1.amount} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"lfo1\", \"amount\", value)\n            } />\n            <div className=\"select-item\">\n              <h3 className=\"item-label\">Type</h3>\n              <Selector id=\"lfo1-type\" onValueChange={ value =>\n                synthActions.changeSynthParam(machineId, \"lfo1\", \"waveType\", value)\n              }>\n                <SelectorOption value=\"sine\" selected={synthParams.lfos.lfo1.waveType === \"sine\"}>Sine</SelectorOption>\n                <SelectorOption value=\"square\" selected={synthParams.lfos.lfo1.waveType === \"square\"}>Square</SelectorOption>\n                <SelectorOption value=\"sawtooth\" selected={synthParams.lfos.lfo1.waveType === \"sawtooth\"}>Sawtooth</SelectorOption>\n                <SelectorOption value=\"triangle\" selected={synthParams.lfos.lfo1.waveType === \"triangle\"}>Triangle</SelectorOption>\n              </Selector>\n            </div>\n            <div className=\"select-item\">\n              <h3 className=\"item-label\">Destination</h3>\n              <Selector id=\"lfo1-destination\" onValueChange={ value =>\n                synthActions.changeSynthParam(machineId, \"lfo1\", \"destination\", value)\n              }>\n                <SelectorOption value=\"sine\" selected={synthParams.lfos.lfo1.destination === \"amp\"}>Amplitude</SelectorOption>\n              </Selector>\n            </div>\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n    <div className=\"lfo\">\n      <Collapsible initialState=\"closed\">\n        <CollapsibleHeader>LFO 2</CollapsibleHeader>\n        <CollapsibleContent>\n          <div className=\"lfo-controls\">\n            <Rotator name=\"Rate\" value={synthParams.lfos.lfo2.rate} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"lfo2\", \"rate\", value)\n            } />\n            <Rotator name=\"Amount\" value={synthParams.lfos.lfo2.amount} onValueChange={ value => \n              synthActions.changeSynthParam(machineId, \"lfo2\", \"amount\", value)\n            } />\n            <div className=\"select-item\">\n              <h3 className=\"item-label\">Type</h3>\n              <Selector id=\"lfo2-type\" onValueChange={ value =>\n                synthActions.changeSynthParam(machineId, \"lfo2\", \"waveType\", value)\n              }>\n                <SelectorOption value=\"sine\" selected={synthParams.lfos.lfo2.waveType === \"sine\"}>Sine</SelectorOption>\n                <SelectorOption value=\"square\" selected={synthParams.lfos.lfo2.waveType === \"square\"}>Square</SelectorOption>\n                <SelectorOption value=\"sawtooth\" selected={synthParams.lfos.lfo2.waveType === \"sawtooth\"}>Sawtooth</SelectorOption>\n                <SelectorOption value=\"triangle\" selected={synthParams.lfos.lfo2.waveType === \"triangle\"}>Triangle</SelectorOption>\n              </Selector>\n            </div>\n            <div className=\"select-item\">\n              <h3 className=\"item-label\">Destination</h3>\n              <Selector id=\"lfo2-destination\" onValueChange={ value =>\n                synthActions.changeSynthParam(machineId, \"lfo2\", \"destination\", value)\n              }>\n                <SelectorOption value=\"sine\" selected={synthParams.lfos.lfo2.destination === \"amp\"}>Amplitude</SelectorOption>\n              </Selector>\n            </div>\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n    */}\n    <GridContainer columns={16} rows={12}>\n      <GridAxis type=\"x\">\n        { objectToArray(synthParams.banks[synthParams.currentBankIndex])\n            .map((value, index) =>\n              <GridAxisItem type={index % 4 === 0 ? \"start\" : index % 4 === 3 ? \"end\" : null}>{index + 1}</GridAxisItem>\n            )\n        }\n      </GridAxis>\n      <GridAxis type=\"y\">\n        { numberToArrayLength(12)\n            .map((key, keyIndex) => {\n              let keyValue = 11 - keyIndex;\n              return <GridAxisItem>{keyboardArray[keyValue]}</GridAxisItem>;\n            })\n        }\n      </GridAxis>\n      \n      <Grid>\n        { numberToArrayLength(12)\n            .map((key, keyIndex) => {\n              let keyValue = 11 - keyIndex;\n              let keyName = keyboardArray[keyValue];\n              return <GridRow type={classnames({ dark: keyName.includes('#'), light: !keyName.includes('#') })}>\n                { objectToArray(synthParams.banks[synthParams.currentBankIndex])\n                    .map((value, index) =>\n                      <GridAxisItem type={index % 4 === 0 ? \"start\" : index % 4 === 3 ? \"end\" : null}>\n                        <PatternBeat key={`pattern-item-${index}-${key}`} index={index} current={playState.currentSegmentIndex === index} selected={value === keyValue} onToggle={() => synthActions.changeSynthParam(machineId, \"pattern-item\", `${synthParams.currentBankIndex}.${index}`, value === keyValue ? -1 : keyValue)} showIndicator={false} />\n                      </GridAxisItem>\n                    )\n                }\n              \n              </GridRow>\n            })\n        }\n      </Grid>\n    </GridContainer>\n  </div>\n};\n\nexport { Synth };","import React, { Component } from \"react\";\nimport { DrumMachine } from \"../drum-machine/drum.machine.react.jsx\";\nimport { Synth } from \"../synth/synth.react.jsx\";\n\nclass Instrument extends Component {\n  render(){\n    const { instruments } = this.props;\n    let selectedInstruments = instruments.filter(item => item.selected);\n    let instrument = selectedInstruments[0];\n    if(instrument) {\n      let { type, machineId } = instrument;\n      switch(type){\n        case \"drumMachine\":\n          return <DrumMachine {...this.props} machineId={machineId} />\n        case \"synth\":\n          return <Synth {...this.props} machineId={machineId} />\n        default:\n          return null;\n      }\n    }\n    return null;\n  }\n};\n\nexport { Instrument };","import React, { Component } from \"react\";\n\nexport class DefaultInput extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { value: props.value || '' };\n  }\n\n  onChange(event, focus) {\n    let { value } = event.target;\n    this.setState({\n      value,\n      focus\n    });\n\n    if(!focus && this.props.onValueChange) {\n      this.props.onValueChange(value);\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    if(!this.state.focus) {\n      this.setState({\n        value: props.value\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"default-input-wrapper\">\n        <span className=\"default-spacer\" aria-hidden=\"true\">{ this.state.value }</span>\n        <input className=\"default-input\" disabled={this.props.disabled} type=\"text\" value={ this.state.value } onChange={ (event) => this.onChange(event, true) } onBlur={ (event) => this.onChange(event, false) } />\n      </div>\n    );\n  }\n}\n\n","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { NavLink } from \"react-router-dom\";\nimport DrumMachineActions from \"../../actions/root.actions\";\n\nclass DropDownMenu extends Component {\n  \n    constructor(props) {\n      super(props);\n      this.state = {\n        open: false\n      };\n    }\n  \n    onOpen() {\n      this.setState({\n        open: true\n      });\n    }\n    \n    onClose() {\n      this.setState({\n        open: false\n      });\n    }\n    \n    onToggle() {\n      this.setState({\n        open: !this.state.open\n      });\n    }\n  \n    render(){\n      let { props, state } = this;\n      let { open } = state;\n      let { items } = props;\n      return <div className={\"dropdown-menu \" + (open ? \"open\" : \"\")}>\n        <button onClick={() => this.onToggle()} className=\"dropdown-menu-trigger\">\n          <span className=\"icon__menu\"></span>\n          <span className=\"icon__menu-hover\"></span>\n          <span className=\"assistive\">\n            { open ? \"Close Menu\" : \"Open Menu\"}\n          </span>\n        </button>\n        <div className=\"dropdown-menu-panel-overlay\" onClick={() => this.onClose()}></div>\n        <div className=\"dropdown-menu-panel\">\n          <ul>\n            {\n              items\n              .filter(item => !item.condition || item.condition())\n              .map(item => {\n                if(item.callback) {\n                  return <li>\n                    <button className=\"dropdown-link\" onClick={() => item.callback() && this.onClose()}>{item.name}</button>\n                  </li>;\n                } else {\n                  return <li>\n                    <NavLink to={item.link} className=\"dropdown-link\" activeClassName=\"active\">{item.name}</NavLink>\n                  </li>;\n                }\n              })\n            }\n          </ul>\n        </div>\n      </div>\n    }\n  };\n\n  export { DropDownMenu };","import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport { DefaultInput } from \"../input/input.react.jsx\";\nimport { DropDownMenu } from \"../dropdown/dropdown.react.jsx\";\nimport { getValueFromPath } from \"../../library/natives/object\";\nimport { buildUserTracksRoute, buildUserSamplesRoute } from \"../../library/routing/routing\";\n\nexport let getMenuItemsFromProps = props => {\n  const { dispatch, auth } = props;\n  const trackActions = bindActionCreators(DrumMachineActions.track, dispatch);\n  let userId = getValueFromPath(auth, \"user/uid\");\n  return [{\n    name: \"Save Track\",\n    callback: () => trackActions.saveTrack(),\n    condition: () => props.auth && props.auth.user && props.track.write\n  }, {\n    name: \"New Track\",\n    link: \"/\"\n  }, {\n    name: \"My Tracks\",\n    link: buildUserTracksRoute(userId),\n    condition: () => props.auth && props.auth.user\n  }, {\n    name: \"My Samples\",\n    link: buildUserSamplesRoute(userId),\n    condition: () => props.auth && props.auth.user\n  }, {\n    name: \"Logout\",\n    link: \"/user/logout\",\n    condition: () => props.auth && props.auth.user\n  }, {\n    name: \"Login\",\n    link: \"/user/login\",\n    condition: () => !(props.auth && props.auth.user)\n  }];\n};\n\nexport let Header = props => {\n  const { dispatch } = props;\n  const metaActions = bindActionCreators(DrumMachineActions.meta, dispatch);\n  return <div className=\"header\">\n    <div className=\"tray\">\n      <div className=\"logo\">\n        <h1><NavLink to=\"/\" activeClassName=\"active icon__logo\"><span className=\"assistive\">Drum Machine</span></NavLink></h1>\n      </div>\n      { props.meta.title ?\n        (\n          <DefaultInput disabled={ !props.track.write } value={props.meta.title} onValueChange={value => metaActions.changeTrackTitle(value)} />\n        ) : null\n      }\n    </div>\n    <div className=\"tray\">\n      <DropDownMenu items={getMenuItemsFromProps(props)}></DropDownMenu>\n    </div>\n  </div>\n};","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport DrumMachineActions from \"../../actions/root.actions\";\n\nconst NOTIFICATION_TIMEOUT = 5000;\nconst TRANSITION_TIME = 300;\n\nexport class Notifications extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n    this.state = {\n      open: true\n    };\n  }\n  \n  render(){\n    let { open } = this.state;\n    let { notifications } = this.props;\n    let notification =  notifications[0];\n    let showHideClass = open && !!notification ? \"show\" : \"hide\";\n    return <div className={\"notification \" + showHideClass}>\n      { notification ? notification.value : \"\" }\n      <button className=\"close\" onClick={() => this.closeNotification(notification.id)}>\n        <span className=\"assistive\">Close notification</span> X\n      </button>\n    </div>\n  }\n\n  componentWillReceiveProps(nextProps){\n    let { notifications } = this.props;\n    let newNotifications = nextProps.notifications;\n    let oldNotification = notifications[0];\n    let newNotification = newNotifications[0];\n    if(newNotification && oldNotification !== newNotification) {\n      this.setState({\n        open: true\n      });\n      if(newNotification.notificationType === \"timeout\"){\n        this.setExpiryTimout(newNotification.id);\n      }\n    }\n  }\n\n  closeNotification(id) {\n    this.setState({\n      open: false\n    });\n    this.deleteNotification(id);\n  }\n\n  setExpiryTimout(id) {\n    setTimeout(() => this.closeNotification(id), NOTIFICATION_TIMEOUT);\n  }\n\n  deleteNotification(id) {\n    setTimeout(() => {\n      let { dispatch } = this.props;\n      const notificationsActions = bindActionCreators(DrumMachineActions.notifications, dispatch);\n      notificationsActions.clearNotification(id);\n    }, TRANSITION_TIME);\n  }\n}","import React, { Component } from \"react\";\nimport { Header } from \"../header/header.react.jsx\";\nimport { Notifications } from \"../notifications/notifications.react.jsx\";\n\nlet View = (props) =>\n  <div className={\"view \" + props.view.name}>\n    <Header {...props} />\n    {props.children}\n    <Notifications {...props} />\n  </div>;\n\nexport { View };","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Instrument } from \"../../instrument/instrument.react.jsx\";\nimport { View } from \"../view.react.jsx\";\n\nclass Track extends Component {\n  render(){\n    let { props } = this;\n    return <View {...props} view={{ name: \"track\" }}>\n      <div className=\"container\">\n        {props && props.track && props.track.state === \"loading\" ? (\n          <div className=\"status loading\">\n            <span className=\"icon icon__loading\"></span>\n            <p>Loading Track</p>\n          </div>\n        ) : (\n        <div className=\"\">\n          <Instrument {...props} />\n        </div>\n        )}\n      </div>\n    </View>;\n  }\n};\n\nfunction mapStateToProps(state) {\n\treturn state;\n}\n\nexport default connect(mapStateToProps)(Track);","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport DrumMachineActions from \"../../../actions/root.actions\";\nimport { View } from \"../view.react.jsx\";\nimport { getValueFromPath } from \"../../../library/natives/object\";\nimport { Link } from \"react-router-dom\";\nimport { DropDownMenu } from \"../../dropdown/dropdown.react.jsx\";\nimport moment from \"moment\";\nimport { buildTrackRoute } from \"../../../library/routing/routing\";\n\nconst TracksList = props => {\n  let { tracks: { tracks }, match, dispatch } = props;\n  let userId = getValueFromPath(match, \"params/userId\");\n  let userTracks = getValueFromPath(tracks, userId) || [];\n  let trackActions = bindActionCreators(DrumMachineActions.tracks, dispatch);\n  return userTracks.length ? \n  (<div className=\"large-list\">\n    <h2>Tracks</h2>\n    <ul>\n      {\n         userTracks.map(track => {\n          //TODO: set default track title at db level\n          let title = getValueFromPath(track, \"meta/title\") || \"Untitled Track\";\n          //TODO: set default date at db level\n          let updatedDate = getValueFromPath(track, \"meta/updatedDate\") || \"2017-12-01T00:00:00.000Z\";\n          let updatedMoment = moment(updatedDate).fromNow();\n          let trackId = getValueFromPath(track, \"track/trackId\");\n          return <li key={trackId} className=\"highlight\">\n            <Link to={buildTrackRoute(userId, trackId)} className=\"list-item-title\">\n              <div className=\"title\">{ title }</div> <div className=\"meta date\">{ updatedMoment }</div>\n            </Link>\n            <DropDownMenu items={[{\n              name: \"Select Track\",\n              link: buildTrackRoute(userId, trackId)\n            },{\n              name: \"Delete Track\",\n              callback: () => trackActions.deleteTrack(),\n              condition: () => false //TODO: implement track delete\n            }]} />\n          </li>;\n        })\n      }\n    </ul>\n  </div>\n  ) : (\n    <TracksEmpty {...props} />\n  )\n}\n\nconst TracksLoading = props => {\n  return <div className=\"status loading\">\n    <span className=\"icon icon__loading\"></span>\n    <p>Loading Tracks</p>\n  </div>\n};\n\nconst TracksEmpty = props => {\n  return <div className=\"status error\">\n    <p>There were no tracks found for this user.</p>\n  </div>\n};\n\nclass Tracks extends Component {\n  render(){\n    let { props } = this;\n    let TrackState = this.getTrackStateFromProps(props);\n    return <View {...props} view={{ name: \"tracks\" }}>\n      <div className=\"container\">\n        <TrackState {...props} />\n      </div>\n    </View>;\n  }\n\n  getTrackStateFromProps(props) {\n    let state = getValueFromPath(props, \"tracks/state\");\n    switch(state) {\n      case \"idle\":\n      case \"loading\":\n        return TracksLoading;\n      default:\n        return TracksList;\n    }\n  }\n};\n\nfunction mapStateToProps(state) {\n\treturn state;\n}\n\nexport default connect(mapStateToProps)(Tracks);","import React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { View } from \"../view.react.jsx\";\nimport { getValueFromPath } from \"../../../library/natives/object\";\nimport { Link } from \"react-router-dom\";\nimport { DropDownMenu } from \"../../dropdown/dropdown.react.jsx\";\nimport { objectToArrayWithKeyValue } from \"../../../library/natives/array\";\nimport { Modal } from \"../../modal/modal.react.jsx\";\nimport { Maybe } from \"../../maybe/maybe.react.jsx\";\nimport { uploadSample } from \"../../../actions/samples.actions\";\nimport DrumMachineActions from \"../../../actions/root.actions\";\nimport { SoundPreview } from \"../../sound-preview/sound.preview.react.jsx\";\n\nconst MAX_FILE_SIZE = 1 * 1024 * 1024;\nconst acceptedMimeTypes = [\"audio/x-wav\"];\nconst generateSampleName = name => {\n  name = name.split(\".\")[0];\n  let shortName = name.substring(0, 2).toUpperCase();\n  return {\n    name,\n    shortName\n  }\n};\n\nclass UploadSampleModal extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      dragover: false\n    };\n  }\n  onDragOver(e){\n    e.preventDefault(e);\n    e.dataTransfer.dropEffect = \"copy\";\n    this.setState({\n      dragover: true\n    });\n  }\n  onDragLeave(e){\n    this.setState({\n      dragover: false\n    });\n  }\n  onDrop(e){\n    let { dispatch } = this.props;\n    e.preventDefault();\n    var dt = e.dataTransfer;\n    if (dt.items) {\n      if (dt.items[0].kind == \"file\") {\n        let file = dt.items[0].getAsFile();\n        let { name, shortName } = generateSampleName(file.name);\n        dispatch(uploadSample(name, shortName, file));\n      }\n    } else {\n      let file = dt.files[0];\n      let { name, shortName } = generateSampleName(file.name);\n      dispatch(uploadSample(name, shortName, file));\n    }\n  }\n  onFileInput(e){\n    let { dispatch } = this.props;\n    let file = e.target.files[0];\n    let { name, shortName } = generateSampleName(file.name);\n    dispatch(uploadSample(name, shortName, file));\n  }\n  render(){\n    let { samples, match, auth, dispatch } = this.props;\n    let userId = getValueFromPath(match, \"params/userId\");\n    let currentUserId = getValueFromPath(auth, \"user/uid\");\n    let state = getValueFromPath(samples, \"upload/state\");\n    let { dragover } = this.state;\n\t\tlet samplesActions = bindActionCreators(DrumMachineActions.samples, dispatch);\n\n    return <Maybe condition={userId === currentUserId}>\n      <div className=\"upload-a-sample\">\n        <Modal title=\"Upload a sample\" text=\"Upload a sample\" trigger={({ onOpen }) => \n          <a className=\"cta-link\" onClick={onOpen}>\n            Upload a sample\n          </a>\n        }>\n          {\n            props => (\n              <div className=\"upload-container\">\n                <Maybe condition={state === \"idle\"}>\n                  <div className={\"upload\" + ( dragover ? \" highlight\" : \"\")}\n                    onDragOver={e => this.onDragOver(e)}\n                    onDragLeave={e => this.onDragLeave(e)}\n                    onDrop={e => this.onDrop(e)}\n                  >\n                    <span className=\"upload-cta\">Drag a file to upload here</span>\n                    <label className=\"upload-label\" htmlFor=\"upload\">or upload a file</label>\n                    <input className=\"upload-input\" type=\"file\" id=\"upload\" onChange={e => this.onFileInput(e)} />\n                  </div>\n                </Maybe>\n                <Maybe condition={state === \"error\"}>\n                  <div className=\"upload error\">\n                    <span className=\"upload-cta\">There was an error uploading the file</span>\n                    <span className=\"upload-label\">the following issues may have occured</span>\n                    <ul>\n                      <li>File was too big (1MB max)</li>\n                      <li>File wasn't a WAV audio file</li>\n                    </ul>\n                    <a className=\"upload-label\" onClick={() => samplesActions.samplesUploadReset()}>Try again</a>\n                  </div>\n                </Maybe>\n                <Maybe condition={state === \"uploading\"}>\n                  <div className=\"upload uploading\">\n                    <span className=\"upload-cta\">Uploading...</span>\n                    <span className=\"icon icon__loading\"></span>\n                  </div>\n                </Maybe>\n                <Maybe condition={state === \"uploaded\"}>\n                  <div className=\"upload uploaded\">\n                    <span className=\"upload-cta\">File Uploaded Successfully</span>\n                    <span className=\"icon icon__tick\"></span>\n                    <a className=\"upload-label\" onClick={() => samplesActions.samplesUploadReset()}>Upload another file</a>\n                  </div>\n                </Maybe>\n              </div>\n            )\n          }\n        </Modal>\n      </div>\n    </Maybe>\n  }\n}\n\nclass SamplesList extends Component {\n  render(){\n    let { samples, match, auth, dispatch } = this.props;\n    let userId = getValueFromPath(match, \"params/userId\");\n    let currentUserId = getValueFromPath(auth, \"user/uid\");\n    let userSamples = getValueFromPath(samples, `samples/${userId}`) || {};\n    let userSamplesList = objectToArrayWithKeyValue(userSamples);\n    let samplesActions = bindActionCreators(DrumMachineActions.samples, dispatch);\n    return <div className=\"large-list\">\n      <h2>Samples</h2>\n      <UploadSampleModal {...this.props} />\n      <Maybe condition={userSamplesList.length}>\n        <ul>\n          {\n            userSamplesList.map(({\n              key: id,\n              value: { name, deleted }\n            }) => {\n              return <li key={id} className={deleted ? \"disabled\" : \"\"}>\n                <span className=\"list-item-title\">{name}</span>\n                <SoundPreview {...this.props} id={id} userId={userId} />\n                <Maybe condition={userId === currentUserId}>\n                  <DropDownMenu items={[{\n                    name: \"Delete Sample\",\n                    callback: () => samplesActions.deleteSample(userId, id),\n                    condition: () => userId === currentUserId\n                  }]} />\n                </Maybe>\n              </li>;\n            })\n          }\n        </ul>\n      </Maybe>\n    </div>;\n  }\n};\n\nclass Samples extends Component {\n  render(){\n    let { props } = this;\n    return <View {...props} view={{ name: \"samples\" }}>\n      <div className=\"container\">\n        <SamplesList {...props} />\n      </div>\n    </View>;\n  }\n};\n\nfunction mapStateToProps(state) {\n\treturn state;\n}\n\nexport default connect(mapStateToProps)(Samples);","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport { uiConfig } from \"../../library/firebase/config\";\nimport { init } from \"../../library/firebase/firebase\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport firebase from \"firebase\";\nimport * as firebaseui from \"firebaseui\";\nimport \"firebaseui/dist/firebaseui.css\";\n\nlet ui;\n\nclass Auth extends Component {\n  render(){\n    const { from } = this.props.location.state || { from: { pathname: '/' } }\n    return !this.props.auth.user ? \n      (<div id=\"firebase-auth\"></div>)\n      :\n      (<Redirect to={from} />)\n  }\n  componentDidMount(){\n    if(this.props.auth.user) return;\n    init()\n    .then(() => {\n      ui = ui || new firebaseui.auth.AuthUI(firebase.auth());\n      ui.start('#firebase-auth', {\n        ...uiConfig(),\n        callbacks: {\n          signInSuccess: (user) => {\n            let { dispatch } = this.props;\n            const notificationsActions = bindActionCreators(DrumMachineActions.notifications, dispatch);\n            notificationsActions.newNotification(\"Login successful!\");\n            this.setState({\n              signedIn: true\n            });\n          }        \n        }\n      });\n    });\n  }\n}\n\nexport { Auth };","import firebase from \"firebase\";\nimport * as firebaseui from \"firebaseui\";\n\nlet uiConfig = () => ({\n  signInFlow: \"popup\",\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n    firebase.auth.EmailAuthProvider.PROVIDER_ID,\n    firebase.auth.PhoneAuthProvider.PROVIDER_ID\n  ],\n  signInSuccessUrl: '/'\n});\n\nlet config = {\n  apiKey: \"AIzaSyAWA-6GU2ARBmfMOTniWEZLtz_LYE5N828\",\n  authDomain: \"drum-machine-12c62.firebaseapp.com\",\n  databaseURL: \"https://drum-machine-12c62.firebaseio.com\",\n  projectId: \"drum-machine-12c62\",\n  storageBucket: \"drum-machine-12c62.appspot.com\",\n  messagingSenderId: \"444715842758\"\n};\n\nexport { config, uiConfig }","import { config } from \"./config\";\nimport firebase from \"firebase\";\nimport * as firebaseui from \"firebaseui\";\n\nlet initialised = false;\n\nlet init = () => {\n  return Promise.resolve()\n    .then(() => {\n      if(!initialised) {\n        firebase.initializeApp(config);\n        initialised = true\n      }\n    });\n};\n\nexport { init };","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { View } from \"../view.react.jsx\";\nimport { Auth } from \"../../firebase/auth.react.jsx\"\n\nlet Login = (props) => \n  <View {...props} view={{ name: \"login\" }}>\n    <div className=\"container\">\n      <h2>Log In</h2>\n      <p>Log in or register to your save tracks!</p>\n      <Auth {...props} />\n    </div>\n  </View>;\n\nfunction mapStateToProps(state) {\n\t//return state.drumMachine;\n\treturn state;\n}\n\nexport default connect(mapStateToProps)(Login);","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport { init } from \"../../library/firebase/firebase\";\nimport DrumMachineActions from \"../../actions/root.actions\";\nimport firebase from \"firebase\";\nimport * as firebaseui from \"firebaseui\";\n\nclass Logout extends Component {\n  render(){\n    const { from } = this.props.location.state || { from: { pathname: '/' } }\n    return !this.props.auth.user ? (\n      <Redirect to={from} />\n    ) : (\n      <div className=\"signout\">\n        <p>Logging out...</p>\n      </div>\n    );\n  }\n  componentDidMount(){\n    if(!this.props.auth.user) return;\n    init()\n    .then(() => {\n      firebase.auth().signOut()\n        .then(() => {\n          let { dispatch } = this.props;\n          const notificationsActions = bindActionCreators(DrumMachineActions.notifications, dispatch);\n          notificationsActions.newNotification(\"Logout successful\");\n          this.setState({\n            signedIn: false\n          });\n        }\n      );\n    });\n  }\n}\n\nexport { Logout };","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { View } from \"../view.react.jsx\";\nimport { Logout } from \"../../firebase/logout.react.jsx\"\n\nlet _Logout = (props) => \n  <View {...props} view={{ name: \"logout\" }}>\n    <div className=\"container\">\n      <Logout {...props} />\n    </div>\n  </View>;\n\nfunction mapStateToProps(state) {\n\t//return state.drumMachine;\n\treturn state;\n}\n\nexport default connect(mapStateToProps)(_Logout);","import { createHashHistory } from \"history\";\nimport { routerMiddleware } from \"connected-react-router\";\n\nexport const history = createHashHistory();\n\nexport const historyMiddleware = routerMiddleware(history);","import { \n\tCHANGE_SELECTED_CHANNEL,\n\tTOGGLE_SOLO_CHANNEL,\n\tTOGGLE_MUTE_CHANNEL,\n\tCHANGE_VOLUME_TO_AMOUNT,\n\tCHANGE_PITCH_TO_AMOUNT,\n\tCHANGE_PAN_TO_AMOUNT,\n\tCHANGE_DECAY_TO_AMOUNT,\n\tTOGGLE_REVERB,\n\tTOGGLE_BEAT_STATE,\n\tNEW_BANK_INDEX,\n\tCHANGE_SWING_TO_AMOUNT,\n\tCHANGE_SELECTED_SOUND\n} from \"../constants/drum.machine.constants\";\nimport {\n\tNEW_TRACK_LOADING,\n\tLOAD_DEFAULT_TRACK,\n\tNEW_TRACK_LOADED\n} from \"../constants/track.constants\";\n\nconst initialState = {};\n\nconst defaultMachine = {\n\tcurrentBankIndex: 0,\n\tswing: 0,\n\tchannels: [{\n\t\tsound: 0,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tselected: true,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 1,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 2,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 3,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 4,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 5,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 6,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 7,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t},\n\t{\n\t\tsound: 8,\n\t\tpatterns: {\n\t\t\t0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\t\t},\n\t\tvolume: 50,\n\t\tpitch: 50,\n\t\tdecay: 100,\n\t\tpan: 50,\n\t\treverb: false\n\t}\n]};\n\nconst defaultState = {\n\t0: defaultMachine\n};\n\nexport default function drumMachine(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase CHANGE_VOLUME_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.channelId === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tvolume: action.value\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_PITCH_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.channelId === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tpitch: action.value\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_DECAY_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.channelId === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tdecay: action.value\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_PAN_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.channelId === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tpan: action.value\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase TOGGLE_REVERB:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.channelId === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\treverb: !channel.reverb\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_SELECTED_CHANNEL:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\t({\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tselected: action.value === i\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_SELECTED_SOUND:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\t({\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tsound: action.channelId === i ? action.value : channel.sound\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase TOGGLE_SOLO_CHANNEL:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.value === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tsolo: !channel.solo\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase TOGGLE_MUTE_CHANNEL:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.value === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tmute: !channel.mute\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase TOGGLE_BEAT_STATE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tchannels: state[action.machineId].channels\n\t\t\t\t\t.map((channel, i) =>\n\t\t\t\t\t\taction.channelId === i ? {\n\t\t\t\t\t\t\t...channel,\n\t\t\t\t\t\t\tpatterns: {\n\t\t\t\t\t\t\t\t...state[action.machineId].channels[action.channelId].patterns,\n\t\t\t\t\t\t\t\t[action.bankId]: state[action.machineId].channels[action.channelId].patterns[action.bankId]\n\t\t\t\t\t\t\t\t\t.map((beat, i) => i === action.index ? action.value : beat)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} : channel\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\t\tcase NEW_BANK_INDEX:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tcurrentBankIndex: action.value\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_SWING_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tswing: action.value\n\t\t\t\t}\n\t\t\t}\n\t\tcase NEW_TRACK_LOADING:\n\t\t\treturn initialState;\n\t\tcase LOAD_DEFAULT_TRACK:\n\t\t\treturn defaultState;\n\t\tcase NEW_TRACK_LOADED:\n\t\t\treturn action.drumMachine;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import { INCREMENT_BPM, DECREMENT_BPM, CHANGE_BPM_BY_AMOUNT, CHANGE_BPM, MIN_BEATS_PER_MINUTE, MAX_BEATS_PER_MINUTE } from \"../constants/tempo.constants\";\nimport { NEW_TRACK_LOADING, LOAD_DEFAULT_TRACK, NEW_TRACK_LOADED } from \"../constants/track.constants\";\nimport { normaliseValue } from \"../library/natives/numbers.js\";\n\nconst initialState = {\n\tbeatsPerMinute: 120,\n\tbeatsPerBar: 4,\n\tsegmentsPerBeat: 4\n};\n\nexport default function tempo(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase INCREMENT_BPM:\n\t\t\tlet incrementBPM = state.beatsPerMinute + 1;\n\t\t\tlet normalisedIncrementBPM = normaliseValue(incrementBPM, MIN_BEATS_PER_MINUTE, MAX_BEATS_PER_MINUTE);\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tbeatsPerMinute: Math.round(normalisedIncrementBPM)\n\t\t\t});\n\t\tcase DECREMENT_BPM:\n\t\t\tlet decrementBPM = state.beatsPerMinute - 1;\n\t\t\tlet normalisedDecrementBPM = normaliseValue(decrementBPM, MIN_BEATS_PER_MINUTE, MAX_BEATS_PER_MINUTE);\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tbeatsPerMinute: Math.round(normalisedDecrementBPM)\n\t\t\t});\n\t\tcase CHANGE_BPM_BY_AMOUNT:\n\t\t\tlet changeByBPM = state.beatsPerMinute + action.amount;\n\t\t\tlet normalisedChangeByBPM = normaliseValue(changeByBPM, MIN_BEATS_PER_MINUTE, MAX_BEATS_PER_MINUTE);\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tbeatsPerMinute: Math.round(normalisedChangeByBPM)\n\t\t\t});\n\t\tcase CHANGE_BPM:\n\t\t\tlet changeBPM = action.value;\n\t\t\tlet normalisedChangeBPM = normaliseValue(changeBPM, MIN_BEATS_PER_MINUTE, MAX_BEATS_PER_MINUTE);\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tbeatsPerMinute: Math.round(normalisedChangeBPM)\n\t\t\t});\n\t\tcase NEW_TRACK_LOADING:\n\t\t\treturn initialState;\n\t\tcase LOAD_DEFAULT_TRACK:\n\t\t\treturn initialState;\n\t\tcase NEW_TRACK_LOADED:\n\t\t\treturn action.tempo;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","const initialState = {\n\t0: {\n\t\tname: \"Bass Drum\",\n\t\tshortName: \"BD\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fbd01.WAV?alt=media&token=77f710d5-78d0-444f-8b0e-33ffd2a5809b\"\n\t},\n\t1: {\n\t\tname: \"Snare Drum\",\n\t\tshortName: \"SD\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fsd01.WAV?alt=media&token=b1910128-3f74-4d76-bb9e-7cdb4cbd9330\"\n\t},\n\t2: {\n\t\tname: \"Low Tom\",\n\t\tshortName: \"LT\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Flt01.WAV?alt=media&token=522e7d1e-8d8d-46ff-905a-a4e16718f7e0\"\n\t},\n\t3: {\n\t\tname: \"Mid Tom\",\n\t\tshortName: \"MT\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fmt01.WAV?alt=media&token=79ce4bf6-4ded-4224-a38f-4be0d032017c\"\n\t},\n\t4: {\n\t\tname: \"Hi Tom\",\n\t\tshortName: \"HT\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fht01.WAV?alt=media&token=f6662245-be58-483f-9302-ecec094a8705\"\n\t},\n\t5: {\n\t\tname: \"Rim Shot\",\n\t\tshortName: \"RS\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Frs01.WAV?alt=media&token=7e741312-8207-4f52-90d1-6d7d54ef25b3\"\n\t},\n\t6: {\n\t\tname: \"Hand Clap\",\n\t\tshortName: \"HC\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fcp01.WAV?alt=media&token=17f0c66a-6d4f-4783-93c6-0cb636b784c1\"\n\t},\n\t7: {\n\t\tname: \"Hi Hat\",\n\t\tshortName: \"HH\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Fhh01.WAV?alt=media&token=52125594-e5a5-420d-9aa1-d88f51b4c4b3\"\n\t},\n\t8: {\n\t\tname: \"Cymbal\",\n\t\tshortName: \"CY\",\n\t\tpath: \"https://firebasestorage.googleapis.com/v0/b/drum-machine-12c62.appspot.com/o/public%2Fsamples%2F909%2Frd01.WAV?alt=media&token=1ce6c343-51e7-4c16-acbf-f03f4bdf6ee3\"\n\t}\n};\n\nexport default function librarySounds(state = initialState, action) {\n\treturn initialState;\n}","import { PLAY, PAUSE, TOGGLE_PLAY_PAUSE, NEW_SEGMENT_INDEX, INCREMENT_SEGMENT_INDEX, NEW_BAR_INDEX } from \"../constants/play.state.constants\";\nimport { NEW_TRACK_LOADING } from \"../constants/track.constants\";\nimport { play, pause, newSegmentIndex } from \"../actions/play.state.actions\";\n\nconst initialState = {\n\tcurrentSegmentIndex: 0,\n\tcurrentBarIndex: 0,\n\tisPlaying: false,\n\tlooping: true\n};\n\nexport default function playState(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase PLAY:\n\t\t\tconst newState = Object.assign({}, state, {\n\t\t\t\tisPlaying: true\n\t\t\t});\n\t\t\treturn playState(newState, newSegmentIndex(0));\n\t\tcase PAUSE:\n\t\t\treturn Object.assign({}, state, { isPlaying: false });\n\t\tcase TOGGLE_PLAY_PAUSE:\n\t\t\tif(state.isPlaying){\n\t\t\t\treturn playState(state, pause());\n\t\t\t} else {\n\t\t\t\treturn playState(state, play());\n\t\t\t}\n\t\t\tbreak;\n\t\tcase NEW_SEGMENT_INDEX:\n\t\t\treturn Object.assign({}, state, { currentSegmentIndex: action.value });\n\t\tcase NEW_BAR_INDEX:\n\t\t\treturn Object.assign({}, state, { currentBarIndex: action.value });\n\t\tcase INCREMENT_SEGMENT_INDEX:\n\t\t\tlet newIndex = state.looping && state.currentSegmentIndex >= 15 ? 0 : state.currentSegmentIndex + 1;\n\t\t\treturn playState(state, newSegmentIndex(newIndex));\n\t\tcase NEW_TRACK_LOADING:\n\t\t\treturn initialState;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import { \n    CHANGE_REVERB_SECONDS_TO_AMOUNT,\n    CHANGE_REVERB_DECAY_TO_AMOUNT\n} from \"../constants/reverb.constants\";\nimport {\n\tNEW_TRACK_LOADING,\n\tLOAD_DEFAULT_TRACK,\n\tNEW_TRACK_LOADED\n} from \"../constants/track.constants\";\n\nconst initialState = {};\n\nconst defaultState = {\n\t0: {\n\t\tseconds: 100,\n\t\tdecay: 100,\n\t\treverse: false\n\t}\n};\n\nexport default function reverb(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase CHANGE_REVERB_SECONDS_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tseconds: action.value\n\t\t\t\t}\n\t\t\t};\n\t\tcase CHANGE_REVERB_DECAY_TO_AMOUNT:\n\t\t\treturn {\n\t\t\t\t...state, \n\t\t\t\t[action.machineId]: {\n\t\t\t\t\t...state[action.machineId],\n\t\t\t\t\tdecay: action.value\n\t\t\t\t}\n\t\t\t};\n\t\tcase NEW_TRACK_LOADING:\n\t\t\treturn initialState;\n\t\tcase LOAD_DEFAULT_TRACK:\n\t\t\treturn defaultState;\n\t\tcase NEW_TRACK_LOADED:\n\t\t\treturn action.reverb;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import { NEW_BUFFER_SEGMENT, CLEAR_BUFFER_SEGMENTS, CLEAR_BUFFER_SEGMENT } from \"../constants/buffer.constants\";\nimport { NEW_TRACK_LOADING } from \"../constants/track.constants\";\nimport { unique } from \"../library/natives/numbers\";\nimport { last } from \"../library/natives/array\";\n\nlet initialState = [];\nlet uniqueGenerator = unique();\n\nexport default function buffer(state = initialState, action) {\n  switch (action.type) {\n    case NEW_BUFFER_SEGMENT:\n      let { time, index, duration } = action;\n      let lastEntry = last(state || []);\n      let lastId = lastEntry ? lastEntry.id : -1;\n      return [...state, {\n        time,\n        index,\n        bar: 0,\n        duration,\n        id: lastId + 1\n      }];\n    case CLEAR_BUFFER_SEGMENT:\n      return state.filter(segment => segment.id !== action.id);\n    case CLEAR_BUFFER_SEGMENTS:\n      return [];\n    case NEW_TRACK_LOADING:\n      return initialState;\n    default:\n      return state;\n  }\n}","import { AUTH_STATE_CHANGE } from \"../constants/auth.constants\";\n\nlet initialState = {\n  user: undefined\n};\n\nexport default function auth(state = initialState, action) {\n  switch (action.type) {\n    case AUTH_STATE_CHANGE:\n      return {\n        user: action.value\n      }\n    default:\n      return state;\n  }\n}","import { \n    NEW_NOTIFICATION,\n    CLEAR_NOTIFICATION\n} from \"../constants/notifications.constants\";\nimport { unique } from \"../library/natives/numbers\";\n\nconst initialState = [];\nlet idGenerator = unique();\n\nexport default function notifications(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase NEW_NOTIFICATION:\n\t\t\treturn [{\n        id: idGenerator(),\n        value: action.value,\n        notificationType: action.notificationType || \"timeout\"\n      }, ...state];\n\t\tcase CLEAR_NOTIFICATION:\n\t\t\treturn state.filter(({id}) => id !== action.value);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import { unique } from \"../library/natives/numbers\";\nimport { NEW_TRACK_LOADING, LOAD_DEFAULT_TRACK, NEW_TRACK_LOADED } from \"../constants/track.constants\";\n\nlet initialState = [];\n\nlet defaultState = [{\n  id: 0,\n  type: \"drumMachine\",\n  machineId: 0,\n  selected: true\n},{\n  id: 1,\n  type: \"reverb\",\n  machineId: 0,\n  selected: false\n},{\n  id: 3,\n  type: \"master\",\n  machineId: 0,\n  selected: false\n},{\n  id: 4,\n  type: \"synth\",\n  machineId: 0,\n  selected: false\n}];\n\nlet uniqueGenerator = unique();\n\nexport default function instruments(state = initialState, action) {\n  switch (action.type) {\n    case NEW_TRACK_LOADING:\n      return initialState;\n    case LOAD_DEFAULT_TRACK:\n      return defaultState;\n    case NEW_TRACK_LOADED:\n      return action.instruments;\n    default:\n      return state;\n  }\n}","import { unique } from \"../library/natives/numbers\";\nimport { NEW_TRACK_LOADING, LOAD_DEFAULT_TRACK, NEW_TRACK_LOADED } from \"../constants/track.constants\";\n\nlet initialState = [];\n\nlet defaultState = [{\n  id: 0,\n  from: {\n    machineId: 0,\n    type: \"drumMachine\",\n    nodePath: \"outputs/main\"\n  },\n  to: {\n    machineId: 0,\n    type: \"master\",\n    nodePath: \"inputs/main\"\n  }\n},{\n  id: 1,\n  from: {\n    machineId: 0,\n    type: \"drumMachine\",\n    nodePath: \"outputs/send1\"\n  },\n  to: {\n    machineId: 0,\n    type: \"reverb\",\n    nodePath: \"inputs/main\"\n  }\n},{\n  id: 2,\n  from: {\n    machineId: 0,\n    type: \"reverb\",\n    nodePath: \"outputs/main\"\n  },\n  to: {\n    machineId: 0,\n    type: \"master\",\n    nodePath: \"inputs/main\"\n  }\n},{\n  id: 3,\n  from: {\n    machineId: 0,\n    type: \"synth\",\n    nodePath: \"outputs/main\"\n  },\n  to: {\n    machineId: 0,\n    type: \"master\",\n    nodePath: \"inputs/main\"\n  }\n}];\n\nlet uniqueGenerator = unique();\n\nexport default function connections(state = initialState, action) {\n  switch(action.type) {\n    case NEW_TRACK_LOADING:\n      return initialState;\n    case LOAD_DEFAULT_TRACK:\n      return defaultState;\n    case NEW_TRACK_LOADED:\n      return action.connections;\n    default:\n      return state;\n  }\n};","import { NEW_TRACK_LOADING, LOAD_DEFAULT_TRACK, NEW_TRACK_SAVE, NEW_TRACK_LOADED } from \"../constants/track.constants\";\n\n//Track States: \"idle\", \"loading\"\n\nlet initialState = {};\n\nlet defaultState = {\n  trackId: \"default\",\n  userId: undefined,\n  state: \"idle\",\n  write: true\n};\n\nexport default function auth(state = initialState, action) {\n  switch (action.type) {\n    case NEW_TRACK_LOADING:\n      return {\n        ...state,\n        trackId: action.trackId,\n        userId: action.userId,\n        state: \"loading\"\n      };\n    case LOAD_DEFAULT_TRACK:\n      return defaultState;\n    case NEW_TRACK_SAVE:\n      return {\n        ...state,\n        trackId: action.trackId,\n        userId: action.userId\n      };\n    case NEW_TRACK_LOADED:\n      return {\n        ...state,\n        ...action.track,\n        state: \"idle\",\n        write: action.write\n      }\n    default:\n      return state;\n  }\n}","export const USER_TRACKS_LOADING = \"USER_TRACKS_LOADING\";\nexport const USER_TRACKS_LOADED = \"USER_TRACKS_LOADED\";\nexport const USER_TRACKS_LOAD_ERROR = \"USER_TRACKS_LOAD_ERROR\";","import { USER_TRACKS_LOADING, USER_TRACKS_LOADED, USER_TRACKS_LOAD_ERROR } from \"../constants/tracks.constants\";\n\n//Tracks States: \"idle\", \"loading\", \"loaded\", \"error\"\n\nlet defaultState = {\n  state: \"idle\",\n  tracks: {\n    //userId: []\n  }\n};\n\nexport default function tracks(state = defaultState, action) {\n  switch (action.type) {\n    case USER_TRACKS_LOADING:\n      return {\n        ...state,\n        state: \"loading\"\n      }\n    case USER_TRACKS_LOADED:\n      return {\n        ...state,\n        state: \"loaded\",\n        tracks: {\n          ...state.tracks,\n          [action.userId]: action.tracks\n        }\n      }\n    case USER_TRACKS_LOAD_ERROR:\n      return {\n        ...state,\n        state: \"error\",\n        error: action.error\n      }\n    default:\n      return state;\n  }\n}","import { CHANGE_TRACK_TITLE, CHANGE_TRACK_CREATED_DATE, CHANGE_TRACK_UPDATED_DATE } from \"../constants/meta.constants\";\nimport { NEW_TRACK_LOADING, LOAD_DEFAULT_TRACK, NEW_TRACK_LOADED } from \"../constants/track.constants\";\n\nlet initialState = {\n  title: \"\"\n};\n\nlet defaultState = {\n  title: \"Untitled Track\"\n};\n\nexport default function meta(state = initialState, action) {\n  switch (action.type) {\n    case NEW_TRACK_LOADING:\n      return initialState;\n    case LOAD_DEFAULT_TRACK:\n      return defaultState;\n    case NEW_TRACK_LOADED:\n      return action.meta || defaultState;\n    case CHANGE_TRACK_TITLE:\n      return {\n        ...state,\n        title: action.title\n      };\n    case CHANGE_TRACK_CREATED_DATE:\n      return {\n        ...state,\n        createdDate: action.createdDate\n      };\n    case CHANGE_TRACK_UPDATED_DATE:\n      return {\n        ...state,\n        updatedDate: action.updatedDate\n      };\n    default:\n      return state;\n  }\n}","import { SAMPLES_LOADING, SAMPLES_LOADED, SAMPLES_LOAD_ERROR, UPLOAD_SAMPLE, SAMPLE_UPLOADED, SAMPLE_UPLOAD_ERROR, SAMPLE_UPLOAD_RESET, SAMPLE_UPLOADING, SAMPLE_DELETED, SAMPLE_DELETE_ERROR, DELETE_SAMPLE } from \"../constants/samples.constants\";\nimport { filter } from \"../library/natives/object\";\n\n//Uploads States: \"idle\", \"loading\", \"loaded\", \"error\"\n\nlet defaultState = {\n  state: \"idle\",\n  upload: {\n    state: \"idle\",\n    file: undefined\n  },\n  samples: {\n  }\n};\n\nexport default function samples(state = defaultState, action) {\n  let sample;\n  switch (action.type) {\n    case SAMPLES_LOADING:\n      return {\n        ...state,\n        state: \"loading\"\n      }\n    case SAMPLES_LOADED:\n      return {\n        ...state,\n        state: \"loaded\",\n        samples: {\n          ...state.samples,\n          [action.userId]: action.samples\n        }\n      }\n    case SAMPLE_UPLOADED:\n      sample = {\n        name: action.name,\n        shortName: action.shortName,\n        path: action.path,\n        createdDate: action.createdDate,\n      };\n      return {\n        ...state,\n        upload: {\n          state: \"uploaded\"\n        },\n        samples: {\n          ...state.samples,\n          [action.userId]: {\n            [action.sampleId]: sample,\n            ...state.samples[action.userId]\n          }\n        }\n      }\n    case SAMPLE_DELETED:\n      return {\n        ...state,\n        samples: {\n          ...state.samples,\n          [action.userId]: {\n            ...filter(state.samples[action.userId], ({\n              key, value\n            }) => key !== action.id)\n          }\n        }\n      }\n    case DELETE_SAMPLE:\n      sample = {\n        ...state.samples[action.userId][action.id],\n        deleted: true\n      };\n      return {\n        ...state,\n        samples: {\n          ...state.samples,\n          [action.userId]: {\n            ...state.samples[action.userId],\n            [action.id]: sample\n          }\n        }\n      }\n    case SAMPLE_DELETE_ERROR:\n      sample = {\n        ...state.samples[action.userId][action.id],\n        deleted: false\n      };\n      return {\n        ...state,\n        samples: {\n          ...state.samples,\n          [action.userId]: {\n            ...state.samples[action.userId],\n            [action.id]: sample\n          }\n        }\n      }\n    case SAMPLES_LOAD_ERROR:\n      return {\n        ...state,\n        state: \"error\",\n        error: action.error\n      }\n    case UPLOAD_SAMPLE:\n      return {\n        ...state,\n        upload: {\n          state: \"idle\",\n          file: {\n            name: action.name,\n            shortName: action.shortName,\n            file: action.file\n          }\n        }\n      }\n    case SAMPLE_UPLOAD_ERROR:\n      return {\n        ...state,\n        upload: {\n          ...state.upload,\n          state: \"error\"\n        }\n      }\n    case SAMPLE_UPLOADING:\n      return {\n        ...state,\n        upload: {\n          ...state.upload,\n          state: \"uploading\"\n        }\n      }\n    case SAMPLE_UPLOAD_RESET:\n      return {\n        ...state,\n        upload: {\n          state: \"idle\",\n          file: undefined\n        }\n      }\n    default:\n      return state;\n  }\n}","import { PLAY_PREVIEW, PAUSE_PREVIEW, LOADING_PREVIEW } from \"../constants/preview.constants\";\n\n//state: idle, loading, playing\n\nconst initialState = {\n  state: \"idle\",\n  soundId: undefined\n};\n\nexport default function preview(state = initialState, action) {\n  switch(action.type){\n    case PLAY_PREVIEW:\n      return {\n        state: \"playing\",\n        soundId: action.id\n      };\n    case PAUSE_PREVIEW:\n      return {\n        ...state,\n        state: \"idle\"\n      };\n    case LOADING_PREVIEW:\n      return {\n        state: \"loading\",\n        soundId: action.id\n      };\n    default:\n      return state;\n  }\n};","import { fromJS } from \"immutable\"; \n\nimport {\n\tCHANGE_SYNTH_PARAM\n} from \"../constants/synth.constants\";\nimport {\n\tNEW_TRACK_LOADING,\n\tLOAD_DEFAULT_TRACK,\n\tNEW_TRACK_LOADED\n} from \"../constants/track.constants\";\n\nlet initialState = {};\n\nlet defaultSynth = {\n  oscillators: {\n    osc1: {\n      waveType: \"sine\",\n      octave: 4,\n      semitone: 0,\n      cent: 0,\n      amount: 50\n    },\n    osc2: {\n      waveType: \"sine\",\n      octave: 4,\n      semitone: 0,\n      cent: 0,\n      amount: 50\n    }\n  },\n  fm: true,\n  envelopes: {\n    amp: {\n      attack: 0,\n      decay: 100,\n      sustain: 100,\n      release: 0\n    },\n    filter: {\n      attack: 0,\n      decay: 100,\n      sustain: 100,\n      release: 0,\n      amount: 0\n    }\n  },\n  filter: {\n    frequency: 100,\n    resonance: 0,\n    type: \"lowpass\"\n  },\n  lfos: {\n    lfo1: {\n      rate: 0,\n      amount: 0,\n      waveType: \"sine\",\n      destination: [\"osc12\"]\n    },\n    lfo2: {\n      rate: 0,\n      amount: 0,\n      waveType: \"square\",\n      destination: [\"ffreq\"]\n    }\n  },\n  voices: 4,\n  sends: {\n    send1: 0,\n    send2: 0\n  },\n  volume: 50,\n  pan: 50,\n  currentBankIndex: 0,\n  banks: {\n    0: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    1: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    2: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    3: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    4: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    5: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    6: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],\n    7: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]\n  }\n};\n\nlet defaultState = {\n  0: defaultSynth\n};\n\nexport default function synth(state = defaultState, action){\n  let { type, machineId, param, paramItem, value } = action;\n  let $state = fromJS(state);\n  switch(type) {\n    case CHANGE_SYNTH_PARAM:\n      machineId = machineId.toString();\n      switch(param) {\n        case \"voices\":\n        case \"volume\":\n        case \"pan\":\n          return $state.updateIn([machineId, param], oldValue => value).toJS();\n        case \"osc1\":\n        case \"osc2\":\n          return $state.updateIn([machineId, \"oscillators\", param, paramItem], oldValue => value).toJS();\n        case \"filter\":\n        case \"sends\":\n          return $state.updateIn([machineId, param, paramItem], oldValue => value).toJS();\n        case \"lfo1\":\n        case \"lfo2\":\n          return $state.updateIn([machineId, \"lfos\", param, paramItem], oldValue => value).toJS();\n        case \"amp\":\n          return $state.updateIn([machineId, \"envelopes\", param, paramItem], oldValue => value).toJS();\n        case \"env-filter\":\n          return $state.updateIn([machineId, \"envelopes\", \"filter\", paramItem], oldValue => value).toJS();   \n        case \"pattern-item\":\n          return $state.updateIn([machineId, \"banks\", ...paramItem.split('.')], oldValue => value).toJS();       \n        default:\n          return state;\n      }\n    case NEW_TRACK_LOADING:\n\t\t\treturn initialState;\n\t\tcase LOAD_DEFAULT_TRACK:\n\t\t\treturn defaultState;\n\t\tcase NEW_TRACK_LOADED:\n\t\t\treturn action.synth || initialState;\n    default:\n      return state;\n  }\n  return state;\n};","import { combineReducers } from \"redux\";\nimport { connectRouter } from \"connected-react-router\";\nimport { history } from \"../middleware/history\";\nimport drumMachine from \"./drum.machine.reducer\";\nimport tempo from \"./tempo.reducer\";\nimport librarySounds from \"./library.sounds.reducer\";\nimport playState from \"./play.state.reducer\";\nimport reverb from \"./reverb.reducer\";\nimport buffer from \"./buffer.reducer\";\nimport auth from \"./auth.reducer\";\nimport notifications from \"./notifications.reducer\";\nimport instruments from \"./instruments.reducer\";\nimport connections from \"./connections.reducer\";\nimport track from \"./track.reducer\";\nimport tracks from \"./tracks.reducer\";\nimport meta from \"./meta.reducer\";\nimport samples from \"./samples.reducer\";\nimport preview from \"./preview.reducer\";\nimport synth from \"./synth.reducer\";\n\nconst rootReducer = combineReducers({\n\ttempo,\n\tlibrarySounds,\n\tdrumMachine,\n\tplayState,\n\treverb,\n\tbuffer,\n\tauth,\n\tnotifications,\n\tinstruments,\n\tconnections,\n\ttrack,\n\ttracks,\n\tmeta,\n\tsamples,\n\tpreview,\n\tsynth,\n\trouter: connectRouter(history)\n});\n\nexport default rootReducer;","import { Observable } from \"rxjs\";\n\n/* eslint-disable no-use-before-define */\nif (typeof setImmediate !== 'function') {\n  var setImmediate = fn => setTimeout(fn, 0);\n}\n\nconst isPromise = (obj) => typeof obj !== 'undefined' &&\n  typeof obj.then === 'function';\n\nconst next = (iter, observer, prev = undefined) => {\n\n  let item;\n\n  try {\n    item = iter.next(prev);\n  } catch (err) {\n    return observer.error(err);\n  }\n\n  const value = item.value;\n\n  if (item.done) {\n    return observer.complete();\n  }\n\n  if (isPromise(value)) {\n    value.then(val => {\n      observer.next(val);\n      setImmediate(() => next(iter, observer, val));\n    }).catch(err => {\n      return observer.error(err);\n    });\n  } else {\n    observer.next(value);\n    setImmediate(() => next(iter, observer, value));\n  }\n};\n\nconst ogen = (fn) => (...args) => {\n  return Observable.create(observer => {\n    next(fn(...args), observer);\n  });\n};\n\nexport default ogen.ogen = ogen.default = ogen;\n","import { percentageToValueOfRange } from \"../natives/numbers\";\n\nconst SECONDS_IN_MINUTE = 60;\nconst MILLISECONDS_IN_SECOND = 1000;\nconst MIN_PERCENTAGE_OF_SEGMENT_TO_SWING = 0;\nconst MAX_PERCENTAGE_OF_SEGMENT_TO_SWING = 25;\n\nexport function getBeatsPerSecond(beatsPerMinute) {\n\treturn beatsPerMinute / SECONDS_IN_MINUTE;\n}\n\nexport function getBeatTimeInSeconds(beatsPerMinute){\n\treturn 1 / getBeatsPerSecond(beatsPerMinute);\n}\n\nexport function getSegmentTimeInSeconds(beatsPerMinute, segmentsPerBeat){\n\treturn getBeatTimeInSeconds(beatsPerMinute) / segmentsPerBeat;\n}\n\nfunction isEven(int){\n\treturn int % 2 === 0;\n}\n\nexport function getSwingOffset(beatsPerMinute, segmentsPerBeat, currentSegmentIndex, swing){\n\tlet segmentTime = getSegmentTimeInSeconds(beatsPerMinute, segmentsPerBeat);\n\tlet even = isEven(currentSegmentIndex);\n\tlet swingPercentage = percentageToValueOfRange(swing, MIN_PERCENTAGE_OF_SEGMENT_TO_SWING, MAX_PERCENTAGE_OF_SEGMENT_TO_SWING);\n\tlet swingValue = segmentTime / 100 * swingPercentage;\n\tif(even) {\n\t\treturn 0;\n\t} else {\n\t\treturn swingValue;\n\t}\n}\n\nexport function getSegmentTimeInMilliseconds(beatsPerMinute, segmentsPerBeat){\n\tlet segmentTime = getSegmentTimeInSeconds(beatsPerMinute, segmentsPerBeat) * 1000;\n\treturn segmentTime;\n}\n\nexport function getSegmentsInTimespan(timespan, segmentTime){\n\treturn Math.floor(timespan / segmentTime);\n}\n\nexport function getCurrentSegmentIndex({\n\tbeatsPerMinute,\n\tbeatsPerBar,\n\tsegmentsPerBeat,\n\ttime,\n\tsegmentIndex\n}, currentTime){\n\tvar timespan = currentTime - time;\n\tvar segmentTime = getSegmentTimeInSeconds(beatsPerMinute, segmentsPerBeat);\n\tvar elapsedSegments = getSegmentsInTimespan(timespan, segmentTime);\n\treturn segmentIndex + elapsedSegments;\n}\n\nexport function getSegmentsToBuffer({\n\tcurrentSegmentTime,\n\tcurrentSegmentIndex\n}, {\n\tsegmentInterval,\n\tsegmentsToBuffer\n}, currentTime) {\n\tlet i = 0;\n\tlet segmentLimit = currentSegmentIndex + segmentsToBuffer;\n\tlet segments = [];\n\twhile(i <= segmentLimit){\n\t\tsegments.push(i);\n\t\ti++;\n\t}\n\treturn segments;\n}\n\n","export function normalisedIndex(playState, tempo, index) {\n  let {\n    looping\n  } = playState;\n  let {\n    beatsPerBar,\n\t  segmentsPerBeat,\n  } = tempo;\n  let barLength = beatsPerBar * segmentsPerBeat;\n  if(looping){\n    return index % barLength;\n  }\n  return index;\n};","import { getSegmentsInTimespan, getSegmentTimeInSeconds } from \"./tempo\";\nimport { last, numberToArrayLength } from \"../natives/array\";\nimport { normalisedIndex } from \"./play.state\";\n\nexport const LOOK_AHEAD_IN_SECONDS = 0.25;\nexport const BUFFER_DELAY_IN_SECONDS = 0.1;\nexport const MAX_KEEP_STALE_BUFFER_IN_SECONDS = 2;\n\nexport function segmentsToSchedule(currentTime, state) {\n  let { playState, tempo, buffer } = state;\n  let currentLookAhead = currentTime + LOOK_AHEAD_IN_SECONDS;\n  let segmentTime = getSegmentTimeInSeconds(tempo.beatsPerMinute, tempo.segmentsPerBeat);\n  let segmentsToBuffer = getSegmentsInTimespan(LOOK_AHEAD_IN_SECONDS, segmentTime);\n  let segmentsToBufferAsArray = numberToArrayLength(segmentsToBuffer);\n  let lastBuffer = last(buffer);\n  if(!lastBuffer || lastBuffer.time < currentLookAhead) {\n    return segmentsToBufferAsArray\n      .reduce((prev, curr, index) => {\n        let lastSegment = last(prev);\n        return [...prev, {\n          index: normalisedIndex(playState, tempo, lastSegment.index + 1),\n          time: lastSegment.time + segmentTime,\n          duration: segmentTime\n        }];\n      }, [lastBuffer || {\n        index: 0,\n        time: currentTime + BUFFER_DELAY_IN_SECONDS,\n        duration: segmentTime\n      }])\n      .filter((segment, index) => lastBuffer ? index !== 0 : true);\n  }\n  return [];\n};\n\nexport let segmentsToClear = (previousState, currentTime) =>\n  previousState.filter(({time}) => time + MAX_KEEP_STALE_BUFFER_IN_SECONDS <= currentTime);\n\nexport let buffersSinceId = (id, buffer) => {\n  if(id === undefined) return buffer;\n  let buffers = buffer.reduce((prev, curr) => {\n    let shouldAdd = prev.shouldAdd || curr.id === id;\n    let { items } = prev;\n    if(prev.shouldAdd) {\n      items = [\n        ...items,\n        curr\n      ];\n    }\n    return {\n      items,\n      shouldAdd\n    }\n  }, {\n    items: [],\n    shouldAdd: false\n  });\n  return buffers.items;\n};","import { Observable } from \"rxjs\";\n\nlet { create } = Observable;\nconst MAX_ALLOWED_INTERVAL = 1000;\n\nexport let intervalGenerator = function*(shouldContinue, timeout){\n\twhile(shouldContinue()){\n\t\tyield timeout();\n\t}\n};\n\nexport let adjustingInterval = ms => {\n  return create(observer => {\n    let timeoutId,\n        start = new Date().getTime(),\n        time = 0,\n        index = 0;\n    let timeout = () => {\n\n      let diff = (new Date().getTime() - start) - time;\n      let normalisedDiff = diff;\n      //slow rate if large diff\n      if(diff > MAX_ALLOWED_INTERVAL) {\n        normalisedDiff = 0;\n      }\n      observer.next(index);\n      if(diff > MAX_ALLOWED_INTERVAL) {\n        time += diff;\n      } else {\n        time += ms;\n      }\n      index++;\n      timeoutId = window.setTimeout(timeout, (ms - normalisedDiff));\n    };\n    \n    timeout();\n\n    return () => window.clearTimeout(timeoutId);\n  });\n};\n\nexport let timeout = {\n\tget: () => new Promise(window.requestAnimationFrame)\n};","import { percentageToValueOfRange } from \"../natives/numbers\";\n\nexport const MIN_PAN = -1;\nexport const MAX_PAN = 1;\n\nexport function panPercentageToValue(panPercentage) {\n\tlet x = percentageToValueOfRange(panPercentage, MIN_PAN, MAX_PAN),\n\t\ty = 0,\n        z = 1 - Math.abs(x);\n\treturn [x, y, z];\n}","import { percentageToValueOfRange } from \"../natives/numbers\";\n\nconst MIN_PLAYBACK_RATE = 0.4;\nconst MAX_PLAYBACK_RATE = 1.6;\n\nexport function pitchToPlaybackRate(pitch) {\n\treturn percentageToValueOfRange(pitch, MIN_PLAYBACK_RATE, MAX_PLAYBACK_RATE);\n}","import { percentageToValueOfRange } from \"../natives/numbers\";\n\nconst MIN_DECAY = 0.03;\nconst MAX_DECAY = 1;\n\nexport function decayPercentageToValue(decayPercentage) {\n\treturn percentageToValueOfRange(decayPercentage, MIN_DECAY, MAX_DECAY);\n}","import { createBufferSource } from \"../context\";\n\nexport let triggerBuffer = (context, sound, pitch = 1, time = 0) => {\n  let bufferSource = createBufferSource(context, sound);\n  bufferSource.playbackRate.value = pitch || 1;\n  bufferSource.start(time);\n  return bufferSource;\n};\n\nexport let triggerBufferAndDecay = (context, sound, pitch = 1, time, decay) => {\n  let buffer = triggerBuffer(context, sound, pitch, time);\n  let decayNode = context.createGain();\n  decayNode.gain.linearRampToValueAtTime(0, time + decay);\n  buffer.connect(decayNode);\n  return decayNode;\n};","import { getAudioContext } from \"../context\";\nimport { get, getSound, loadSound, loadSounds } from \"../load.sounds\";\nimport { numberToArrayLength, zip, last } from \"../../natives/array\";\nimport { panPercentageToValue } from \"../pan\";\nimport { buffersSinceId } from \"../buffer\";\nimport { pitchToPlaybackRate } from \"../playback.rate\";\nimport { decayPercentageToValue } from \"../decay\";\nimport { getSwingOffset } from \"../tempo\";\nimport { triggerBufferAndDecay } from \"./trigger.buffer\";\n\nexport let createDrumMachine = () => {\n  let context = getAudioContext();\n  let channelNodes = [];\n  let sounds = {};\n  let lastBufferId = undefined;\n  let output = context.createGain();\n  let send1 = context.createGain();\n  let send2 = context.createGain();\n\n  let init = () => {\n    channelNodes = numberToArrayLength(9)\n      .map(channel => ({\n        send1: context.createGain(),\n        send2: context.createGain(),\n        volume: context.createGain(),\n        pre: context.createGain(),\n        post: context.createGain(),\n        pan: context.createPanner()\n      }));\n  \n    channelNodes\n      .forEach(channelNode => {\n        channelNode.pre.connect(channelNode.volume);\n        channelNode.volume.connect(channelNode.pan);\n        channelNode.pan.connect(channelNode.post);\n        channelNode.post.connect(output);\n        channelNode.post.connect(channelNode.send1);\n        channelNode.post.connect(channelNode.send2);\n        channelNode.send1.connect(send1);\n        channelNode.send2.connect(send2);\n        channelNode.pan.panningModel = \"equalpower\";\n      });\n  };\n\n  let update = (instrument, state) => {\n    updateSounds(instrument, state);\n    updateGains(instrument, state);\n    updateSoundTriggers(instrument, state);\n  };\n\n  let updateSounds = (instrument, state) => {\n    let { machineId } = instrument;\n    let { drumMachine } = state;\n    let { channels } = drumMachine[machineId];\n    let soundIds = channels.map(channel => channel.sound);\n    sounds = loadSounds(soundIds, state);\n  };\n\n  let updateGains = (instrument, state) => {\n    let { machineId } = instrument;\n    let { drumMachine } = state;\n    let { channels } = drumMachine[machineId];\n\n    let atLeastOneChannelSolod = channels.reduce(((prev, channel) => prev || channel.solo), false);\n\n    zip([channels, channelNodes])\n      .forEach(([channel, channelNode], index) => {\n        channelNode.pre.gain.value = channel.mute ? 0: channel.solo ? 1: atLeastOneChannelSolod ? 0 : 1;\n        channelNode.volume.gain.value = channel.volume * 0.01;\n        channelNode.pan.setPosition(...panPercentageToValue(channel.pan));\n        channelNode.send1.gain.value = channel.reverb ? 1 : 0;\n        //Unused at the moment\n        channelNode.send2.gain.value = 0;\n      });\n  };\n\n  let updateSoundTriggers = (instrument, state) => {\n    let { machineId } = instrument;\n    let { drumMachine, buffer, playState, tempo: { beatsPerMinute, segmentsPerBeat } } = state;\n    let { channels, currentBankIndex, swing } = drumMachine[machineId];\n\n    if(!buffer.length) {\n      lastBufferId = undefined;\n    }\n\n    let buffers = lastBufferId !== undefined ? buffersSinceId(lastBufferId, buffer) : buffer;\n    if(buffers.length) {\n      lastBufferId = last(buffers).id;\n    }\n\n    buffers.forEach(item => {\n      let { time, index, bar } = item;\n      time = time + getSwingOffset(beatsPerMinute, segmentsPerBeat, index, swing);\n      channels.forEach((channel, channelIndex) => {\n        let { sound, pitch, decay, patterns } = channel;\n        pitch = pitchToPlaybackRate(pitch);\n        decay = decayPercentageToValue(decay);\n        let pattern = patterns[currentBankIndex];\n        let soundObject = loadSound(sound, state);\n        if(!soundObject) return;\n        let { soundPromise, path } = soundObject;\n        if(!(pattern && pattern[index])) return;\n        soundPromise.then(soundBuffer => {\n          if(context.time > time) return;\n          let node = triggerBufferAndDecay(context, soundBuffer, pitch, time, decay);\n          node.connect(channelNodes[channelIndex].pre);\n        });\n      });\n    });\n  };\n\n  let remove = () => {\n    context = null;\n    channelNodes = null;\n  };\n\n  init();\n\n  return {\n    update,\n    remove,\n    outputs: {\n      main: output,\n      send1,\n      send2,\n      channels: channelNodes\n    }\n  }\n};","\n/**\n * Simple Reverb constructor.\n *\n * @param {AudioContext} context\n * @param {object} opts\n * @param {number} opts.seconds\n * @param {number} opts.decay\n * @param {boolean} opts.reverse\n */\n\nfunction SimpleReverb (context, opts) {\n  this.input = this.output = context.createConvolver();\n  this._context = context;\n\n  var p = this.meta.params;\n  opts = opts || {};\n  this._seconds   = opts.seconds  || p.seconds.defaultValue;\n  this._decay     = opts.decay    || p.decay.defaultValue;\n  this._reverse   = opts.reverse  || p.reverse.defaultValue;\n  this._buildImpulse();\n}\n\nSimpleReverb.prototype = Object.create(null, {\n\n  /**\n   * AudioNode prototype `connect` method.\n   *\n   * @param {AudioNode} dest\n   */\n\n  connect: {\n    value: function (dest) {\n      this.output.connect( dest.input ? dest.input : dest );\n    }\n  },\n\n  /**\n   * AudioNode prototype `disconnect` method.\n   */\n\n  disconnect: {\n    value: function () {\n      this.output.disconnect();\n    }\n  },\n\n  /**\n   * Utility function for building an impulse response\n   * from the module parameters.\n   */\n\n  _buildImpulse: {\n    value: function () {\n      var rate = this._context.sampleRate\n        , length = rate * this.seconds\n        , decay = this.decay\n        , impulse = this._context.createBuffer(2, length, rate)\n        , impulseL = impulse.getChannelData(0)\n        , impulseR = impulse.getChannelData(1)\n        , n, i;\n\n      for (i = 0; i < length; i++) {\n        n = this.reverse ? length - i : i;\n        impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n        impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n      }\n\n      this.input.buffer = impulse;\n    }\n  },\n\n  /**\n   * Module parameter metadata.\n   */\n\n  meta: {\n    value: {\n      name: \"SimpleReverb\",\n      params: {\n        seconds: {\n          min: 1,\n          max: 50,\n          defaultValue: 3,\n          type: \"float\"\n        },\n        decay: {\n          min: 0,\n          max: 100,\n          defaultValue: 2,\n          type: \"float\"\n        },\n        reverse: {\n          min: 0,\n          max: 1,\n          defaultValue: 0,\n          type: \"bool\"\n        }\n      }\n    }\n  },\n\n  /**\n   * Public parameters.\n   */\n\n  seconds: {\n    enumerable: true,\n    get: function () { return this._seconds; },\n    set: function (value) {\n      this._seconds = value;\n      this._buildImpulse();\n    }\n  },\n\n  decay: {\n    enumerable: true,\n    get: function () { return this._decay; },\n    set: function (value) {\n      this._decay = value;\n      this._buildImpulse();\n    }\n  },\n\n  reverse: {\n    enumerable: true,\n    get: function () { return this._reverse; },\n    set: function (value) {\n      this._reverse = value;\n      this._buildImpulse();\n    }\n  }\n\n});\n\n/**\n * Exports.\n */\n\nexport { SimpleReverb };\n","import { percentageToValueOfRange } from \"../natives/numbers\";\n\nconst MIN_REVERB_SECONDS = 0.2;\nconst MAX_REVERB_SECONDS = 2;\nconst MIN_REVERB_DECAY = 0.2;\nconst MAX_REVERB_DECAY = 2;\n\nexport function reverbSecondsPercentageToValue(reverbPercentage) {\n\treturn percentageToValueOfRange(reverbPercentage, MIN_REVERB_SECONDS, MAX_REVERB_SECONDS);\n}\n\nexport function reverbDecayPercentageToValue(reverbPercentage) {\n\treturn percentageToValueOfRange(reverbPercentage, MIN_REVERB_DECAY, MAX_REVERB_DECAY);\n}","import { getAudioContext } from \"../context\";\nimport { SimpleReverb } from \"../../web-audio-components/simple.reverb\";\nimport { reverbSecondsPercentageToValue, reverbDecayPercentageToValue } from \"../reverb\";\n\nexport let createReverb = () => {\n  let context = getAudioContext();\n\n  let reverbNode = new SimpleReverb(context, {\n    seconds: 2,\n    decay: 2,\n    reverse: 0\n  });\n\n  let master = context.createGain();\n  let input = context.createGain();\n  let output = context.createGain();\n\n  input.connect(reverbNode.input);\n  reverbNode.connect(output);\n\n  let update = (instrument, state) => {\n    let { machineId } = instrument;\n    let { reverb } = state;\n    let machine = reverb[machineId];\n    let { seconds, decay } = machine;\n    let reverbSeconds = reverbSecondsPercentageToValue(seconds);\n    let reverbDecay = reverbDecayPercentageToValue(decay);\n    if(reverbNode.seconds !== reverbSeconds) {\n      reverbNode.seconds = reverbSeconds;\n    }\n    if(reverbNode.decay !== reverbDecay) {\n      reverbNode.decay = reverbDecay;\n    }\n  };\n\n  let remove = () => {\n\n  };\n\n  return {\n    update,\n    remove,\n    inputs: {\n      main: input\n    },\n    outputs: {\n      main: output\n    }\n  };\n};","import { Observable } from \"rxjs\";\nimport { buffersSinceId } from \"./buffer\";\nimport { last } from \"../natives/array\";\n\nlet { create } = Observable;\n\n\nexport let createBufferStream = (onUpdate) => {\n  let lastBufferId;\n  return create(observer => {\n    onUpdate.subscribe((buffer) => {\n      if(!buffer.length) {\n        lastBufferId = undefined;\n      }\n      let buffers = lastBufferId !== undefined ? buffersSinceId(lastBufferId, buffer) : buffer;\n      if(buffers.length) {\n        lastBufferId = last(buffers).id;\n        buffers.forEach((buffer) => observer.next(buffer));\n      }\n    });\n  \n    return () => onUpdate.unsubscribe();\n  });\n};","import { percentageToValueOfRange, normaliseValue } from \"../natives/numbers\";\n\nconst { min, max } = Math;\n\nexport const MAX_OUTPUT = 100;\nexport const MIN_INPUT = 1;\nexport const MIN_RAMP_SECONDS = 0.015;\nexport const MAX_RAMP_SECONDS = 10;\nexport const MIN_RAMP_TIME_CONSTANT = 0.003;\nexport const MAX_RAMP_TIME_CONSTANT = 2;\n\nexport let adsr = (keyPressed, elapsedTime, {\n    attack,\n    decay,\n    sustain,\n    release\n  }, {\n    phase = \"attack\",\n    value = 0,\n    time = 0\n  }) => {\n    attack = max(MIN_INPUT, attack);\n    decay = max(MIN_INPUT, decay);\n    sustain = max(MIN_INPUT, sustain);\n    release = max(MIN_INPUT, release);\n  phase = keyPressed ? phase : \"release\";\n  switch(phase) {\n    case \"attack\":\n      value += 0.1 * ((101 - attack) * elapsedTime)\n      if(value >= MAX_OUTPUT) {\n        value = MAX_OUTPUT;\n        phase = \"decay\"\n      }\n      break;\n    case \"decay\":\n      value -= 0.1 * (decay * elapsedTime)\n      if(value <= sustain) {\n        value = sustain;\n        phase = \"sustain\"\n      }\n      break;\n    case \"release\":\n      value -= 0.1 * ((101 - release) * elapsedTime)\n      if(value <= 0) {\n        value = 0;\n      }\n      break;\n  }\n  return {\n    phase,\n    value,\n    time: time + elapsedTime\n  };\n};\n\nconst divideBy100 = value => value * value * 0.01;\nconst ramp = value => normaliseValue(value * value * 0.001, MIN_RAMP_SECONDS, MAX_RAMP_SECONDS); //exponential curve - 10 second max ramp\nconst percentToTimeConstant = value => normaliseValue(value * 0.02, MIN_RAMP_TIME_CONSTANT, MAX_RAMP_TIME_CONSTANT); //Max 2 second time constant (5 * time constant is when value change is complete)\n\nexport const setAttackDecayValues = ({\n  attack,\n  decay,\n  sustain\n}, startTime, audioParam, normalise = divideBy100) => {\n  audioParam.setTargetAtTime(normalise(100), startTime, percentToTimeConstant(attack));\n  audioParam.setTargetAtTime(normalise(sustain), startTime + ramp(attack), percentToTimeConstant(100 - decay));\n};\n\nexport const setSustainReleaseValues = ({\n  release\n}, startTime, audioParam, normalise = divideBy100) => {\n  audioParam.setTargetAtTime(normalise(0), startTime, percentToTimeConstant(release));\n};","import { normaliseValue } from \"../natives/numbers\";\n\nexport const MIN_FILTER = 0;\nexport const MAX_FILTER = 20000;\n\nexport const filterPercentageToValue = (percentage) => {\n  return normaliseValue(percentage * 2 * percentage, MIN_FILTER, MAX_FILTER);\n};","import { getAudioContext } from \"../context\";\nimport { panPercentageToValue } from \"../pan\";\nimport { numberToArrayLength } from \"../../natives/array\";\nimport { createBufferStream } from \"../buffer.stream\";\nimport { setAttackDecayValues, setSustainReleaseValues } from \"../adsr\";\nimport { keyboardArray, keyboardFrequencies, keyTranspose } from \"../../keyboard\";\nimport { normaliseValue } from \"../../natives/numbers\";\nimport { filterPercentageToValue } from \"../filter\";\nimport { Subject } from \"rxjs\";\nexport const MAX_VOICES = 8;\nexport const SYNTH_VOLUME_COEFFICIENT = 0.005;\n\nexport let createSynth = () => {\n\n  let context = getAudioContext();\n  let output = context.createGain();\n  let voiceNodes = null;\n  let volumeNode = null;\n  let panNode = null;\n  let send1Node = null;\n  let send2Node = null;\n  let preLfoNode = null;\n  let lfo1Node = null;\n  let lfo1WetNode = null;\n  let lfo1DryNode = null;\n  let lfo1OutNode = null;\n  let lfo2Node = null;\n  let lfo2WetNode = null;\n  let lfo2OutNode = null;\n  let lfo2DryNode = null;\n  let voices = MAX_VOICES;\n  let availableVoice = 0;\n  let state = {};\n  let updateStream = new Subject();\n  let bufferStream;\n  //let drawer = createAnalyser();\n  let init = () => {\n    voiceNodes = numberToArrayLength(MAX_VOICES).map(_ => {\n      return {\n        oscillators: {\n          osc1: {\n            osc: context.createOscillator(),\n            amount: context.createGain()\n          },\n          osc2: {\n            osc: context.createOscillator(),\n            amount: context.createGain()\n          }\n        },\n        gains: {\n          amount: context.createGain(),\n          amp: context.createGain(),\n          filter: context.createBiquadFilter(),\n          output: context.createGain()\n        }\n      };\n    });\n    volumeNode = context.createGain();\n    panNode = context.createPanner();\n    send1Node = context.createGain();\n    send2Node = context.createGain();\n    preLfoNode = context.createGain();\n    lfo1Node = context.createOscillator();\n    lfo1DryNode = context.createGain();\n    lfo1WetNode = context.createGain();\n    lfo1OutNode = context.createGain();\n    lfo2Node = context.createOscillator();\n    lfo2DryNode = context.createGain();\n    lfo2WetNode = context.createGain();\n    lfo2OutNode = context.createGain();\n\n    //connections\n    voiceNodes.forEach(({\n      oscillators: {\n        osc1: {\n          osc: osc1osc,\n          amount: osc1Amount\n        },\n        osc2: {\n          osc: osc2osc,\n          amount: osc2Amount\n        }\n      },\n      gains: {\n        amount,\n        amp,\n        filter,\n        output\n      }\n    }, i) => {\n      osc1osc.type = \"sine\";\n      osc1osc.frequency.setValueAtTime(220, context.currentTime);\n      osc1osc.start();\n      osc1osc.connect(osc1Amount);\n      osc2osc.type = \"sine\";\n      osc2osc.frequency.setValueAtTime(110, context.currentTime);\n      osc2osc.start();\n      osc2osc.connect(osc2Amount);\n      osc1Amount.connect(amp);\n      osc2Amount.connect(amp);\n      amp.connect(filter);\n      amp.gain.value = 0;\n      filter.connect(amount);\n      amount.connect(output);\n      output.connect(volumeNode);\n    });\n    volumeNode.gain.value = 1;\n    volumeNode.connect(preLfoNode);\n    \n    //FX - LFO\n    preLfoNode.connect(lfo1DryNode);\n    lfo1WetNode.gain.value = 0;\n    lfo1Node.frequency.value = 0;\n    lfo1Node.connect(lfo1WetNode);\n    lfo1DryNode.connect(panNode);\n    lfo1WetNode.connect(lfo1OutNode);\n    lfo1WetNode.connect(panNode);\n    \n    preLfoNode.connect(lfo2DryNode);\n    lfo2WetNode.gain.value = 0;\n    lfo2Node.frequency.value = 0;\n    lfo2Node.connect(lfo2WetNode);\n    lfo2DryNode.connect(panNode);\n    lfo2WetNode.connect(lfo2OutNode);\n    lfo2WetNode.connect(panNode);\n\n    //FX - pan\n    panNode.panningModel = \"equalpower\";\n    panNode.setPosition(...panPercentageToValue(50));\n    panNode.connect(output);\n\n    createNoteStream();\n  };\n\n  let createNoteStream = () => {\n    bufferStream = createBufferStream(updateStream)\n      .subscribe(buffer => {\n        let { time = 0, index = 0, bar = 0, duration } = buffer;\n        let { currentBankIndex, banks, oscillators } = state;\n        let noteIndex = banks[currentBankIndex][index];\n        let keyOctave = 0;\n        if(noteIndex === -1 || !oscillators) return;\n        //increment the voice to use\n        ++availableVoice;\n        if(availableVoice >= voices) {\n          availableVoice = 0;\n        }\n        let voiceNode = voiceNodes[availableVoice];\n        let {\n          oscillators: {\n            osc1: {\n              osc: osc1osc\n            },\n            osc2: {\n              osc: osc2osc\n            }\n          },\n          gains: {\n            amp,\n            filter\n          }\n        } = voiceNode;\n        let {\n          oscillators: {\n            osc1: {\n              octave: osc1Octave,\n              semitone: osc1Semitone,\n              cent: osc1Cent\n            },\n            osc2: {\n              octave: osc2Octave,\n              semitone: osc2Semitone,\n              cent: osc2Cent\n            }\n          },\n          envelopes: {\n            amp: {\n              attack: ampAttack,\n              decay: ampDecay,\n              sustain: ampSustain,\n              release: ampRelease\n            },\n            filter: {\n              attack: filterAttack,\n              decay: filterDecay,\n              sustain: filterSustain,\n              release: filterRelease,\n              amount: filterAmount\n            }\n          },\n          filter: {\n            frequency: filterFrequency,\n            resonance: filterResonance,\n            type: filterType\n          }\n        } = state;\n        //set frequency\n        let osc1keyIndex = normaliseValue((keyboardArray.length * (keyOctave + osc1Octave) + noteIndex), 0, 83);\n        let osc2keyIndex = normaliseValue((keyboardArray.length * (keyOctave + osc2Octave) + noteIndex), 0, 83);\n        let osc1frequency = keyboardFrequencies[osc1keyIndex];\n        let osc2frequency = keyboardFrequencies[osc2keyIndex];\n        osc1frequency += (osc1Semitone * osc1frequency * keyTranspose.semitone) + (osc1Cent * osc1frequency * keyTranspose.cent);\n        osc2frequency += (osc2Semitone * osc2frequency* keyTranspose.semitone) + (osc2Cent * osc2frequency * keyTranspose.cent);\n        osc1osc.frequency.setValueAtTime(osc1frequency, time);\n        osc2osc.frequency.setValueAtTime(osc2frequency, time);\n        \n        //amp.gain.cancelScheduledValues(time);\n        let adsrValues = { attack: ampAttack, decay: ampDecay, sustain: ampSustain, release: ampRelease };\n        let keyPressDuration = duration * 0.5;\n        setAttackDecayValues(adsrValues, time, amp.gain);\n        setSustainReleaseValues(adsrValues, time + keyPressDuration, amp.gain);\n\n        //set filter asdr\n        let filterAdsrValues = { attack: filterAttack, decay: filterDecay, sustain: filterSustain, release: filterRelease };\n        setAttackDecayValues(filterAdsrValues, time, filter.frequency, value => {\n          const percentage = filterFrequency + ((value - filterFrequency) * (filterAmount * 0.01));\n          return filterPercentageToValue(percentage);\n        });\n        setSustainReleaseValues(filterAdsrValues, time + keyPressDuration, filter.frequency, value => {\n          const percentage = filterFrequency + ((value - filterFrequency) * (filterAmount * 0.01));\n          return filterPercentageToValue(percentage);\n        });\n      });\n  };\n\n  let update = (instrument, state) => {\n    updateConnections(instrument, state);\n    updateState(instrument, state);\n    updateParams(instrument, state);\n    updateStream.next(state.buffer);\n  };\n\n  let updateState = (instrument, newState) => {\n    let { machineId } = instrument;\n    let { synth } = newState;\n    let synthState = synth[machineId];\n    state = synthState;\n  };\n\n  let updateConnections = (instrument, state) => {\n    //TODO: connect FM etc\n  };\n\n  let updateParams = () => {\n    let time = context.currentTime;\n    voiceNodes\n      .forEach((voiceNode) => {\n        if(!state.oscillators) return;\n        let {\n          oscillators: {\n            osc1: {\n              osc: osc1osc,\n              amount: osc1AmountNode\n            },\n            osc2: {\n              osc: osc2osc,\n              amount: osc2AmountNode\n            }\n          },\n          gains: {\n            filter\n          }\n        } = voiceNode;\n        let {\n          oscillators: {\n            osc1: {\n              waveType: osc1WaveType,\n              amount: osc1Amount\n            },\n            osc2: {\n              waveType: osc2WaveType,\n              amount: osc2Amount\n            }\n          },\n          filter: {\n            frequency: filterFrequency,\n            resonance: filterResonance,\n            type: filterType\n          },\n          lfos: {\n            lfo1: {\n              rate: lfo1Rate,\n              amount: lfo1Amount,\n              waveType: lfo1Type\n            },\n            lfo2: {\n              rate: lfo2Rate,\n              amount: lfo2Amount,\n              waveType: lfo2Type\n            }\n          },\n          voices: numberOfVoices,\n          volume,\n          pan,\n          sends: {\n            send1,\n            send2\n          }\n        } = state;\n        voices = numberOfVoices;\n        //set wavetype\n        if(osc1osc.type != osc1WaveType) {\n          osc1osc.type = osc1WaveType;\n        }\n        if(osc2osc.type != osc2WaveType) {\n          osc2osc.type = osc2WaveType;\n        };\n        \n        //set amounts\n        osc1AmountNode.gain.setValueAtTime(osc1Amount * 0.01, time);\n        osc2AmountNode.gain.setValueAtTime(osc2Amount * 0.01, time);\n        volumeNode.gain.setValueAtTime(volume * 0.01 * SYNTH_VOLUME_COEFFICIENT, time);\n        send1Node.gain.setValueAtTime(send1 * 0.01, time);\n        send2Node.gain.setValueAtTime(send2 * 0.01, time);\n\n        if(filter.type != filterType) {\n          filter.type = filterType;\n        }\n        filter.frequency.setValueAtTime(filterPercentageToValue(filterFrequency), time);\n        filter.Q.setValueAtTime(filterResonance * 0.05, time);\n        //set pan\n        panNode.setPosition(...panPercentageToValue(pan));\n\n        //TODO - set lfos \n        // if(lfo1Node.type != lfo1Type) {\n        //   lfo1Node.type = lfo1Type;\n        // }\n        // lfo1Node.frequency.value = lfo1Rate;\n        // lfo1DryNode.gain.linearRampToValueAtTime((100 - lfo1Amount) * 0.01, time);\n        // lfo2OutNode.gain.linearRampToValueAtTime(lfo1Amount * 0.01, time);\n\n        // if(lfo2Node.type != lfo2Type) {\n        //   lfo2Node.type = lfo2Type;\n        // }\n        // lfo2Node.frequency.value = lfo2Rate;\n        // lfo2DryNode.gain.linearRampToValueAtTime((100 - lfo2Amount) * 0.01, time);\n        // lfo2OutNode.gain.linearRampToValueAtTime(lfo2Amount * 0.01, time);\n      });\n  };\n  \n  let remove = () => {\n    context = null;\n    bufferStream.unsubscribe();\n  };\n\n  init();\n\n  return {\n    update,\n    remove,\n    outputs: {\n      main: output\n    }\n  }\n};","import { createDrumMachine } from \"./drum.machine\";\nimport { createReverb } from \"./reverb\";\nimport { createMaster } from \"./master\";\nimport { objectToArrayWithKeyValue } from \"../../natives/array\";\nimport { createSynth } from \"./synth\";\n\nexport let cache = {};\n\nexport let updateInstrumentAudio = (state) => {\n  let idCache = {};\n  let { instruments } = state;\n  let instrumentNodes;\n  try {\n    instrumentNodes = instruments.map(instrument => {\n      let { id, type } = instrument;\n      let item = cache[id];\n      if(item) return item;\n      let machine;\n      switch(type) {\n        case \"drumMachine\":\n          machine = createDrumMachine();\n          break;\n        case \"synth\":\n          machine = createSynth();\n          break;\n        case \"reverb\":\n          machine = createReverb();\n          break;\n        case \"master\":\n          machine = createMaster();\n          break;\n        default:\n          machine = null;\n          break;\n      }\n      return {\n        instrument,\n        machine\n      };\n    });\n  \n    //update nodes\n    instrumentNodes.forEach(({ instrument, machine }) => {\n      cache = {\n        ...cache,\n        [instrument.id]: {\n          instrument,\n          machine\n        }\n      };\n      idCache[instrument.id] = true;\n      if(machine.update) {\n        machine.update(instrument, state);\n      }\n    });\n  \n    //remove nodes\n    let cacheArray = objectToArrayWithKeyValue(cache);\n    cacheArray.forEach(item => {\n      let { key, value } = item;\n      let { machine } = value;\n      if(!idCache[key] && machine.remove) {\n        machine.remove();\n        clearCacheById(key);\n      }\n    });\n  } catch(e) {\n    console.error(e);\n  }\n\n  return instrumentNodes;\n};\n\nexport let clearCache = () => {\n  cache = {};\n};\n\nexport let clearCacheById = id => {\n  cache = objectToArrayWithKeyValue(cache)\n    .filter(({ key }) => key === id)\n    .reduce((prev, { key, value }) => ({\n      ...prev,\n      [key]: value\n    }), {});\n};","import { getAudioContext } from \"../context\";\n\nexport let createMaster = () => {\n  let context = getAudioContext();\n  let master = context.createGain();\n  master.connect(context.destination);\n  return {\n    inputs: {\n      main: master\n    }\n  }\n};\n","import { getValueFromPath } from \"../../natives/object\";\nimport { objectToArrayWithKeyValue } from \"../../natives/array\";\nexport let connectionsCache = {};\n\nexport let updateConnections = (instrumentNodes, state) => {\n  let idCache = {};\n  let { connections } = state;\n  connections.forEach(connection => {\n    let { id, from, to } = connection;\n    let item = connectionsCache[id];\n    idCache[id] = true;\n    if(item) {\n      return;\n    };\n    let fromMachine = getMachineFromConnection(from, instrumentNodes);\n    let fromNodePath = from.nodePath;\n    let fromNode = getValueFromPath(fromMachine, fromNodePath);\n    let toMachine = getMachineFromConnection(to, instrumentNodes);\n    let toNodePath = to.nodePath;\n    let toNode = getValueFromPath(toMachine, toNodePath);\n    if(!fromNode || !toNode) return;\n    fromNode.connect(toNode);\n\n    connectionsCache = {\n      ...connectionsCache,\n      [id]: {\n        from,\n        to\n      }\n    };\n  });\n\n  //disconnect nodes\n  let connectionsCacheArray = objectToArrayWithKeyValue(connectionsCache);\n  connectionsCacheArray.forEach(item => {\n    let { key, value } = item;\n    let { id, from, to } = value;\n    if(!idCache[key]) {\n      let fromMachine = getMachineFromConnection(from, instrumentNodes);\n      let fromNodePath = from.nodePath;\n      let fromNode = getValueFromPath(fromMachine, fromNodePath);\n      let toMachine = getMachineFromConnection(to, instrumentNodes);\n      let toNodePath = to.nodePath;\n      let toNode = getValueFromPath(toMachine, toNodePath);\n      if(fromNode && toNode) {\n        fromNode.disconnect(toNode);\n      }\n      delete connectionsCache[key];\n    }\n  });\n};\n\nexport let getMachineFromConnection = (connectionNode, instrumentNodes = []) => {\n  let { machineId, type } = connectionNode;\n  let node = instrumentNodes.filter(node => \n    node.instrument.type === type && node.instrument.machineId === machineId\n  )[0];\n  return node && node.machine;\n};\n","import firebase from \"firebase\";\nimport * as firebaseui from \"firebaseui\";\nimport { init } from \"./firebase\";\n\nlet getNewTrackKey = (userId) => {\n  return init()\n    .then(() =>{\n      var database = firebase.database();\n      return database.ref(`users/${userId}`).child(\"tracks\").push().key      \n    });\n};\n\nlet saveTrack = (userId, trackId, json) => {\n  return init()\n    .then(() => {\n      var database = firebase.database();\n      return database.ref(`users/${userId}/tracks/${trackId}`)\n        .set(json);\n    });\n};\n\nlet loadTrack = (userId, trackId) => {\n  return init()\n    .then(() => {\n      var database = firebase.database();\n      return database.ref(`users/${userId}/tracks/${trackId}`)\n        .once(\"value\")\n        .then(snapshot => snapshot.val());\n    });\n};\n\nlet loadUserTracks = userId => {\n  return init()\n    .then(() => {\n      return firebase.database().ref(`users/${userId}/tracks/`).orderByChild(\"meta/updatedDate\").once(\"value\")\n      .then(function(snapshot) {\n        let tracks = [];\n        snapshot.forEach(shot => {\n          tracks = [\n            ...tracks,\n            shot.val()\n          ]\n        });\n        tracks.reverse();\n        return tracks;\n      });\n    });\n};\n\nlet loadUserSamples = userId => {\n  return init()\n    .then(() => {\n      return firebase.database().ref(`users/${userId}/samples/`).orderByChild(\"createdDate\").once(\"value\")\n      .then(function(snapshot) {\n        return {\n          userId,\n          samples: snapshot.val()\n        }\n      });\n    });\n};\n\nlet uploadUserSample = (userId, file, name, shortName, createdDate) => {\n  return init()\n    .then(() => {\n      let storage = firebase.storage().ref();\n      let filename = name + createdDate;\n      return storage.child(`user/${userId}/samples/${filename}`) \n        .put(file)\n        .then(snapshot => {\n          let sampleId = firebase.database().ref(`users/${userId}/samples/`).push().key \n          let sample = {\n            name,\n            shortName,\n            createdDate,\n            path: snapshot.downloadURL\n          };\n          return firebase.database().ref(`users/${userId}/samples/${sampleId}`)\n            .set(sample)\n            .then(() => ({\n              ...sample,\n              userId,\n              sampleId\n            }));\n        });\n    });\n};\n\nlet deleteUserSample = (userId, sampleId, url) => {\n  return init()\n    .then(() => {\n      let storage = firebase.storage();\n      return storage.refFromURL(url) \n        .delete()\n        .then(_ => firebase.database().ref(`users/${userId}/samples/${sampleId}`)\n          .remove()\n        );\n    });\n};\n\nexport { getNewTrackKey, saveTrack, loadTrack, loadUserTracks, uploadUserSample, loadUserSamples, deleteUserSample };","import { push } from \"connected-react-router\";\nimport { NEW_TRACK_LOADING } from \"../constants/track.constants\";\nimport { timeout } from \"../library/audio-api/interval\";\nimport { loadDefaultTrack, newTrackLoading, newTrackSave, newTrackLoaded } from \"../actions/track.actions\";\nimport { newNotification } from \"../actions/notifications.actions\";\nimport { matchesTrackRoute, matchesNewPath, matchesNewTrack, buildTrackRoute, paramsFromPath } from \"../library/routing/routing\";\nimport { saveTrack, getNewTrackKey, loadTrack } from \"../library/firebase/db\";\nimport rootReducer from \"../reducers/root.reducer\";\n\nexport const stateToSave = [\n  \"connections\",\n  \"drumMachine\",\n  \"instruments\",\n  \"reverb\",\n  \"tempo\",\n  \"track\",\n  \"meta\",\n  \"synth\"\n];\n\nexport const isNewTrack = store => action => {\n  let prevState = store.getState();\n  let nextState = rootReducer(prevState, action);\n\n  if(!prevState.router.location) return;\n  let trackRoute = matchesTrackRoute(nextState.router.location.pathname);\n  let isLoadingTrack = nextState.track.state === \"loading\";\n  let isTrackRoute = !!trackRoute;\n\n  if(isLoadingTrack || !isTrackRoute) return;\n\n  let { userId, trackId = \"default\" } = trackRoute.params;\n  let prevTrackId = prevState.track.trackId;\n  let noTrackLoaded = !prevTrackId;\n  let newTrack = matchesNewTrack(prevTrackId, trackId);\n\n  if(noTrackLoaded || newTrack) {\n    return {\n      userId,\n      trackId\n    };\n  }\n};\n\nexport const userCanWrite = (userId, trackUserId) => {\n  return userId === trackUserId;\n};\n\nexport const track = store => next => {\n\n  let checkNewTrack = isNewTrack(store);\n\n  let shouldLoadNewTrack = action => {\n    let newTrack = checkNewTrack(action);\n    if(newTrack){\n      let { userId, trackId } = newTrack;\n      loadNewTrack(userId, trackId);\n    }\n  };\n\n  let loadNewTrack = (userId, trackId) => {\n    let shouldLoadDefault = !userId;\n    timeout.get().then(_ => {\n      next(newTrackLoading(userId, trackId));\n    })\n    .then(_ => {\n      if(shouldLoadDefault) {\n        timeout.get().then(_ => {\n          next(loadDefaultTrack());\n        });\n      } else {\n        loadTrack(userId, trackId)\n          .then(data => {\n            let state = store.getState();\n            let uid = state.auth.user ? state.auth.user.uid : undefined;\n            let write = userCanWrite(uid, userId);\n            next(newTrackLoaded(data, write));\n            next(newNotification(\"Track loaded!\"));\n          })\n          .catch(error => {\n            next(newNotification(\"Error loading track\"));\n          });\n      }\n    })\n  };\n\n  let getStateToSave = state => stateToSave\n    .reduce((prev, key) => {\n      prev[key] = state[key]\n      return prev\n    }, {});\n\n  let onSaveTrack = action => {\n    let prevState = store.getState();\n    let nextState = rootReducer(prevState, action);\n    let { userId, trackId } = nextState.track;\n    if(!trackId || trackId === \"default\") {\n      userId = nextState.auth.user.uid;\n      getNewTrackKey(userId)\n        .then(key => {\n          trackId = key;\n          //TODO: Tidy this logic so it doesn't have to be done in this order\n          let state = store.getState();\n          nextState = rootReducer(state, newTrackSave(userId, trackId));\n          return saveTrack(userId, key, getStateToSave(nextState));\n        })\n        .then(() => {\n          return timeout.get().then(_ => {\n            next(newTrackSave(userId, trackId));\n            next(push(buildTrackRoute(userId, trackId)));\n            next(newNotification(\"Track saved!\"));\n          });\n        })\n        .catch(error => {\n          next(newNotification(\"Error saving track\"));\n        });\n    } else {\n      saveTrack(userId, trackId, getStateToSave(nextState))\n        .then(() => {\n          next(newNotification(\"Track saved!\"));\n        })\n        .catch(error => {\n          next(newNotification(\"Error saving track\"));\n        });\n    }\n  };\n\n\treturn action => {\n    switch(action.type){\n      case \"TRACK_SAVE\":\n        onSaveTrack(action);\n        return next(action);\n      default:\n        shouldLoadNewTrack(action);\n        return next(action);\n    }\n  }\n};","export let getDateToISOString = () => new Date().toISOString();","import { applyMiddleware } from \"redux\";\nimport { playState } from \"./play.state\";\nimport { buffer } from \"./buffer\";\nimport { startNoise } from \"./start.noise\";\nimport { supplyAuth } from \"./auth\";\nimport { instruments } from \"./instruments\";\nimport { track } from \"./track\";\nimport { tracks } from \"./tracks\";\nimport { historyMiddleware } from \"./history\";\nimport { meta } from \"./meta\";\nimport { samplesMiddleware } from \"./samples\";\nimport { preview } from \"./preview\";\n\nexport default applyMiddleware(\n  supplyAuth,\n  buffer,\n  playState,\n  startNoise,\n  meta,\n  track,\n  instruments,\n  tracks,\n  preview,\n  samplesMiddleware,\n  historyMiddleware\n);","import { onAuthStateChanged } from \"../library/firebase/auth\";\nimport { authStateChange } from \"../actions/auth.actions\";\n\nexport const supplyAuth = store => next => {\n  onAuthStateChanged(user => {\n    // var displayName = user.displayName;\n    // var email = user.email;\n    // var emailVerified = user.emailVerified;\n    // var photoURL = user.photoURL;\n    // var uid = user.uid;\n    // var phoneNumber = user.phoneNumber;\n    // var providerData = user.providerData;\n    //user.getIdToken().then(accessToken)\n    next(authStateChange(user));\n  });\n\n\treturn action => next(action);\n};","import firebase from \"firebase\";\nimport * as firebaseui from \"firebaseui\";\nimport { init } from \"./firebase\";\n\nlet onAuthStateChanged = (cb) => {\n  return init()\n    .then(() =>\n      firebase.auth().onAuthStateChanged(cb)\n    );\n};\n\nexport { onAuthStateChanged };","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport ogen from \"../library/generator/ogen\";\nimport { NEW_AUDIO_CONTEXT } from \"../constants/audio.context.constants\";\nimport { TOGGLE_PLAY_PAUSE } from \"../constants/play.state.constants\";\nimport { segmentsToSchedule } from \"../library/audio-api/buffer\";\nimport { getAudioContext } from \"../library/audio-api/context\";\nimport { intervalGenerator, timeout } from \"../library/audio-api/interval\";\nimport DrumMachineActions from \"../actions/root.actions\";\nimport rootReducer from \"../reducers/root.reducer\";\n\nexport const buffer = store => next => {\n    \n  let context = getAudioContext();\n  let isPlaying = false;\n  let createIntervalStream = ogen(intervalGenerator);\n  let bufferActions = DrumMachineActions.buffer;\n\n  let playPause = (action) => {\n    let prevState = store.getState();\n    let { playState } = rootReducer(prevState, action);\n    if(playState.isPlaying && !isPlaying){\n      start();\n    } else if(!playState.isPlaying && isPlaying) {\n      stop();\n    }\n    return null;\n  };\n\n  let start = () => {\n    if(isPlaying) return;\n    isPlaying = true;\n    startStream();\n  };\n\n  let startStream = () => {\n    let interval = timeout.get;\n    let shouldContinue = () => isPlaying;\n    createIntervalStream(shouldContinue, interval)\n      .subscribe(() => {\n        try {\n          let currentState = store.getState();\n          let segments = segmentsToSchedule(context.currentTime, currentState);\n          segments.forEach(({index, time, duration}) => \n            next(bufferActions.newBufferSegment(index, time, duration))\n          );\n        } catch(err) {\n          console.error(err);\n        }\n      },\n      (err) => console.error(err),\n      () => next(bufferActions.clearBufferSegments()));\n  };\n\n  let stop = () => {\n    isPlaying = false;\n  };\n\n\treturn action => {\n    playPause(action);\n    return next(action);\n  };\n};","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport ogen from \"../library/generator/ogen\";\nimport { NEW_AUDIO_CONTEXT } from \"../constants/audio.context.constants\";\nimport { TOGGLE_PLAY_PAUSE } from \"../constants/play.state.constants\";\nimport { segmentsToSchedule } from \"../library/audio-api/buffer\";\nimport { getAudioContext } from \"../library/audio-api/context\";\nimport { intervalGenerator, timeout } from \"../library/audio-api/interval\";\nimport DrumMachineActions from \"../actions/root.actions\";\nimport rootReducer from \"../reducers/root.reducer\";\n\nexport const playState = store => next => {\n    \n  let context = getAudioContext();\n  let isPlaying = false;\n  let createIntervalStream = ogen(intervalGenerator);\n  let playStateActions = DrumMachineActions.playState;\n\n  let playPause = (action) => {\n    let prevState = store.getState();\n    let { playState } = rootReducer(prevState, action);\n    if(playState.isPlaying && !isPlaying){\n      start();\n    } else if(!playState.isPlaying && isPlaying) {\n      stop();\n    }\n    return null;\n  };\n\n  let start = () => {\n    if(isPlaying) return;\n    isPlaying = true;\n    startStream();\n  };\n\n  let startStream = () => {\n    let interval = timeout.get;\n    let shouldContinue = () => isPlaying;\n    createIntervalStream(shouldContinue, interval)\n      .subscribe(() => {\n        let currentState = store.getState();\n        let { buffer } = currentState;\n        let { currentTime } = context;\n        if(!buffer.length) return;\n        let currentSegment = buffer.reduce((prev, curr) => {\n          if(curr.time <= currentTime) return curr;\n          else return prev;\n        });\n        if(currentSegment.index !== currentState.playState.currentSegmentIndex) {\n          next(playStateActions.newSegmentIndex(currentSegment.index));\n        }\n      },\n      (err) => console.error(err));\n  };\n\n  let stop = () => {\n    isPlaying = false;\n  };\n\n\treturn action => {\n    playPause(action);\n    return next(action);\n  };\n};","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { getAudioContext } from \"../library/audio-api/context\";\nimport { TOGGLE_PLAY_PAUSE } from \"../constants/play.state.constants\";\n\nexport const startNoise = store => next => {\n\n  let context = getAudioContext();\n  let startNoisePlayed = false;\n  let playStartNoise = () => {\n    if(startNoisePlayed) return;\n    startNoisePlayed = true;\n    let channels = 2;\n    let seconds = 48;\n    let buffer = context.createBuffer(channels, seconds, context.sampleRate);\n    for (let channel = 0; channel < channels; channel++) {\n      let bit = buffer.getChannelData(channel);\n      for (let i = 0; i < seconds; i++) {\n        bit[i] = Math.random() * 2 - 1;\n      }\n    }\n    let source = context.createBufferSource();\n    let gain = context.createGain();\n    gain.gain.value = 0.1;\n    source.buffer = buffer;\n    source.connect(gain);\n    gain.connect(context.destination);\n    source.start();\n  };\n  \n  return action => {\n    switch(action.type) {\n      case TOGGLE_PLAY_PAUSE:\n        playStartNoise();\n        return next(action);\n      default:\n        return next(action);\n    }\n  };\n};","import { getDateToISOString } from \"../library/natives/date\";\nimport { changeTrackCreatedDate, changeTrackUpdatedDate } from \"../actions/meta.actions\";\n\nexport const meta = store => next => {\n\n  let onSaveTrack = action => {\n    let state = store.getState();\n    let { createdDate } = state.meta;\n    if(!createdDate){\n      createdDate = getDateToISOString();\n      next(changeTrackCreatedDate(createdDate));\n    }\n    let updatedDate = getDateToISOString();\n    next(changeTrackUpdatedDate(updatedDate));\n  };\n\n\treturn action => {\n    switch(action.type){\n      case \"TRACK_SAVE\":\n        onSaveTrack(action);\n        return next(action);\n      default:\n        return next(action);\n    }\n  }\n};","import { updateInstrumentAudio } from \"../library/audio-api/instruments/instrument.audio\";\nimport { updateConnections } from \"../library/audio-api/instruments/connections\";\nimport rootReducer from \"../reducers/root.reducer\";\n\nexport const instruments = store => next => {\n  let update = action => {\n    let state = rootReducer(store.getState(), action);\n    let instrumentNodes = updateInstrumentAudio(state);\n    updateConnections(instrumentNodes, state);\n  }\n\treturn action => {\n    update(action);\n    return next(action);\n  }\n};","import { matchesUserTracksRoute } from \"../library/routing/routing\";\nimport { loadUserTracks } from \"../library/firebase/db\";\nimport rootReducer from \"../reducers/root.reducer\";\nimport { userTracksLoading, userTracksLoaded, userTracksLoadError } from \"../actions/tracks.actions\";\nimport { timeout } from \"../library/audio-api/interval\";\n\nexport const tracks = store => next => {\n\n  let isNewUserTracksRoute = action => {\n    let prevState = store.getState();\n    let nextState = rootReducer(prevState, action);\n  \n    if(!prevState.router.location) return;\n  \n    let userTracksRoute = matchesUserTracksRoute(nextState.router.location.pathname);\n    let isLoadingTracks = nextState.tracks.state === \"loading\";\n    let isUserTracksRoute = !!userTracksRoute;\n  \n    if(isLoadingTracks || !isUserTracksRoute) return;\n  \n    let { userId } = userTracksRoute.params;\n\n    return {\n      userId\n    }\n  };\n\n  let checkLoadUserTracks = action => {\n    let userTracksRoute = isNewUserTracksRoute(action);\n    if(!!userTracksRoute) {\n      let { userId } = userTracksRoute;\n      //loading action\n      timeout.get().then(_ => {\n        next(userTracksLoading(userId));\n      })\n      .then(_ => {\n        loadUserTracks(userId)\n          .then(tracks => {\n            next(userTracksLoaded(userId, tracks));\n          })\n          .catch(error => {\n            next(userTracksLoadError(\"There was an error loading tracks.\"));\n          });\n      });\n    }\n  };\n\n  return action => {\n    checkLoadUserTracks(action);\n    return next(action);\n  };\n};","import { USER_TRACKS_LOADING, USER_TRACKS_LOADED, USER_TRACKS_LOAD_ERROR } from \"../constants/tracks.constants\";\n\nexport const userTracksLoading = userId => {\n  return {\n    type: USER_TRACKS_LOADING,\n    userId\n  };\n};\n\nexport const userTracksLoaded = (userId, tracks) => {\n  return {\n    type: USER_TRACKS_LOADED,\n    userId,\n    tracks\n  };\n};\n\nexport const userTracksLoadError = error => {\n  return {\n    type: USER_TRACKS_LOAD_ERROR,\n    error\n  };\n};","import { PLAY_PREVIEW } from \"../constants/preview.constants\";\nimport { loadSound } from \"../library/audio-api/load.sounds\";\nimport { triggerBuffer } from \"../library/audio-api/instruments/trigger.buffer\";\nimport { getAudioContext } from \"../library/audio-api/context\";\nimport { loadingPreview, playPreview, pausePreview } from \"../actions/preview.actions\";\n\nexport const preview = store => next => {\n\n  let bufferNode = undefined;\n  let context = getAudioContext();\n\n  let onPlayPreview = action => {\n    let { userId, id } = action;\n    let state = store.getState();\n    let { soundPromise } = loadSound(id, state, userId);\n    next(loadingPreview(id));\n    soundPromise.then(soundBuffer => {\n      next(playPreview(userId, id));\n      bufferNode = triggerBuffer(context, soundBuffer);\n      bufferNode.connect(context.destination);\n      bufferNode.onended = function(){\n        next(pausePreview());\n      };\n    });\n  };\n\n\treturn action => {\n    switch(action.type){\n      case PLAY_PREVIEW:\n        onPlayPreview(action);\n        return; //deliberately don't pass on action\n    }\n    return next(action);\n  }\n};","import rootReducer from \"../reducers/root.reducer\";\nimport { matchesUserSamplesRoute } from \"../library/routing/routing\";\nimport { isNewTrack } from \"./track\";\nimport { UPLOAD_SAMPLE, DELETE_SAMPLE } from \"../constants/samples.constants\";\nimport { getValueFromPath } from \"../library/natives/object\";\nimport { getDateToISOString } from \"../library/natives/date\";\nimport { timeout } from \"../library/audio-api/interval\";\nimport { uploadUserSample, loadUserSamples, deleteUserSample } from \"../library/firebase/db\";\nimport { newSampleUploaded, samplesLoaded, samplesUploadError, sampleUploading, sampleDeleted, sampleDeleteError } from \"../actions/samples.actions\";\nimport { newNotification } from \"../actions/notifications.actions\";\n\nexport const samplesMiddleware = store => next => {\n  \n  let isSamplesRoute = action => {\n    let prevState = store.getState();\n    let nextState = rootReducer(prevState, action);\n  \n    if(!prevState.router.location) return;\n  \n    let userRoute = matchesUserSamplesRoute(nextState.router.location.pathname);\n    let isUserRoute = !!userRoute;\n\n    if(!isUserRoute) return;\n\n    let { userId } = userRoute.params;\n    return {\n      userId\n    }\n  };\n\n  let checkLoadUserSamples = action => {\n    let newUserTrack = isNewTrack(store)(action);\n    let samplesRoute = isSamplesRoute(action);\n    return newUserTrack || samplesRoute;\n  };\n\n  let onLoadUserSamples = action => {\n    let shouldLoadUserSamples = checkLoadUserSamples(action);\n    if(shouldLoadUserSamples) {\n      let { userId } = shouldLoadUserSamples;\n      loadUserSamples(userId)\n        .then(({ userId, samples }) => {\n          next(samplesLoaded(userId, samples));\n        })\n        .catch(error => {\n          next(newNotification(\"There was an error loading the samples.\"));\n        });;\n    }\n  };\n  \n  let onUploadSample = action => {\n    let { name, shortName, file } = action;\n    let { samples, auth } = store.getState();\n    let uploadState = getValueFromPath(samples, \"upload/state\");\n    let userId = getValueFromPath(auth, \"user/uid\");\n    if(uploadState !== \"idle\") return;\n    let createdDate = getDateToISOString();\n    timeout.get().then(_ => {\n      next(sampleUploading());\n    });\n    uploadUserSample(userId, file, name, shortName, createdDate)\n      .then(sample => {\n        next(newSampleUploaded(sample));\n      })\n      .catch(error => {\n        next(samplesUploadError());\n        next(newNotification(\"There was an error uploading the sample.\"));\n      });\n  };\n\n  let onDeleteSample = action => {\n    let { id, userId } = action;\n    let { samples, auth } = store.getState();\n    let sampleUrl = getValueFromPath(samples, `samples/${userId}/${id}/path`);\n    deleteUserSample(userId, id, sampleUrl)\n      .then(_ => {\n        next(sampleDeleted(userId, id));\n        next(newNotification(\"Sample deleted.\"));\n      })\n      .catch(error => {\n        next(sampleDeleteError(userId, id));\n        next(newNotification(\"There was an error deleting the sample.\"));\n      });\n  };\n\n  return action => {\n    switch(action.type){\n      case UPLOAD_SAMPLE:\n        onUploadSample(action);\n        break;\n      case DELETE_SAMPLE:\n        onDeleteSample(action);\n        break;\n      default:\n        onLoadUserSamples(action);\n    }\n    return next(action);\n  }\n};","import { createStore, applyMiddleware } from \"redux\";\nimport rootReducer from \"../reducers/root.reducer\";\nimport middleware from \"../middleware/middleware\";\n\nexport default function configureStore(initialState) {\n\tlet createStoreWithMiddleware = middleware(createStore);\n\tconst store = createStoreWithMiddleware(rootReducer, initialState);\n\treturn store;\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { Route, Switch } from \"react-router\";\nimport { Provider } from \"react-redux\";\nimport Track from \"./js/components/views/user/track.react.jsx\";\nimport Tracks from \"./js/components/views/user/tracks.react.jsx\";\nimport Samples from \"./js/components/views/user/samples.react.jsx\";\nimport Login from \"./js/components/views/user/login.react.jsx\";\nimport Logout from \"./js/components/views/user/logout.react.jsx\";\nimport configureStore from \"./js/store/store\";\nimport { history } from \"./js/middleware/history\";\nimport './less/all.css';\n\nconst store = configureStore();\n\nReactDOM.render(\n\t<Provider store={ store }>\n\t\t<ConnectedRouter history={ history }>\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/user/login\" component={ Login } />\n\t\t\t\t<Route path=\"/user/logout\" component={ Logout } />\n\t\t\t\t<Route path=\"/users/:userId/tracks/:trackId\" component={ Track } />\n\t\t\t\t<Route path=\"/users/:userId/tracks\" component={ Tracks } />\n\t\t\t\t<Route path=\"/users/:userId/samples\" component={ Samples } />\n\t\t\t\t<Route path=\"/\" component={ Track } />\n\t\t\t</Switch>\n\t\t</ConnectedRouter>\n\t</Provider>,\n\tdocument.getElementById(\"app\")\n);"],"sourceRoot":""}